"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[4002],{84002:(e,a,l)=>{l.r(a),l.d(a,{default:()=>W});var o=l(59835);const i=(0,o._)("div",{class:"text-h6"},"Configuracion Series",-1),n=(0,o._)("div",{class:"text-h6"},"Configuracion Bodegas",-1);function t(e,a,l,t,u,d){const s=(0,o.up)("q-card-section"),r=(0,o.up)("q-select"),c=(0,o.up)("q-btn"),m=(0,o.up)("q-card"),p=(0,o.up)("q-input"),g=(0,o.up)("q-checkbox"),v=(0,o.up)("q-separator"),b=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(b,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"my-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[i])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.serie,"onUpdate:modelValue":a[0]||(a[0]=a=>e.serie=a),options:e.series,label:"Serie",filled:""},null,8,["modelValue","options"]),(0,o.Wm)(r,{modelValue:e.tipo,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tipo=a),options:e.tipos,label:"Tipo",filled:""},null,8,["modelValue","options"]),(0,o.Wm)(r,{modelValue:e.impresion,"onUpdate:modelValue":a[2]||(a[2]=a=>e.impresion=a),options:e.impresiones,label:"Tipo Impresion",filled:""},null,8,["modelValue","options"]),(0,o.Wm)(r,{modelValue:e.bodegaSerie,"onUpdate:modelValue":a[3]||(a[3]=a=>e.bodegaSerie=a),options:e.bodegas,label:"Bodega",filled:"","option-value":"Codigo","option-label":"Nombre","emit-value":""},null,8,["modelValue","options"]),(0,o.Wm)(c,{class:"fit",color:"primary",icon:"check",label:"Guardar configuración",onClick:e.saveSerie},null,8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(m,{class:"my-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[n])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.bodega,"onUpdate:modelValue":a[4]||(a[4]=a=>e.bodega=a),options:e.bodegas,label:"Bodega",filled:"","option-value":"Codigo","option-label":"Nombre"},null,8,["modelValue","options"]),(0,o.Wm)(p,{modelValue:e.clienteTicket,"onUpdate:modelValue":a[5]||(a[5]=a=>e.clienteTicket=a),type:"number",label:"Código de cliente Ticket"},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:e.condicion,"onUpdate:modelValue":a[6]||(a[6]=a=>e.condicion=a),options:e.condiciones,label:"Código de condicion de contado",filled:"","option-value":"Codigo","option-label":"Nombre","emit-value":""},null,8,["modelValue","options"]),(0,o.Wm)(g,{modelValue:e.usaCaja,"onUpdate:modelValue":a[7]||(a[7]=a=>e.usaCaja=a),label:"Usa caja"},null,8,["modelValue"]),(0,o.Wm)(g,{modelValue:e.generaMov,"onUpdate:modelValue":a[8]||(a[8]=a=>e.generaMov=a),label:"Solicita movimiento para generar existencia si no hay"},null,8,["modelValue"]),(0,o.Wm)(g,{modelValue:e.contadoMay,"onUpdate:modelValue":a[9]||(a[9]=a=>e.contadoMay=a),label:"Permite vender a contado en mayorista"},null,8,["modelValue"]),(0,o.Wm)(v,{class:"q-mt-md",color:"blue"}),(0,o.Wm)(g,{"left-label":"",modelValue:e.bloqueaMay,"onUpdate:modelValue":a[10]||(a[10]=a=>e.bloqueaMay=a),label:"Pide contraseña para mayorista"},null,8,["modelValue"]),(0,o.Wm)(p,{disable:!e.bloqueaMay,modelValue:e.contraMay,"onUpdate:modelValue":a[11]||(a[11]=a=>e.contraMay=a),type:"text",label:"Contraseña para mayorista"},null,8,["disable","modelValue"]),(0,o.Wm)(v,{class:"q-mt-md",color:"blue"}),(0,o.Wm)(c,{class:"fit",color:"primary",icon:"check",label:"Guardar datos para la bodega",onClick:e.saveBodega},null,8,["onClick"])])),_:1})])),_:1})])),_:1})}var u=l(34136),d=l(68651),s=l(60499);const r=(0,o.aZ)({name:"Configuracion",setup(){const e=(0,s.iH)(""),a=(0,s.iH)(null),l=(0,s.iH)(null),o=(0,s.iH)(null),i=(0,s.iH)([]),n=(0,s.iH)(["FACT","FCRE","FCON","FRUT"]),t=(0,s.iH)(["TKT","DOC"]),r=(0,s.iH)(null),c=(0,s.iH)([]),m=(0,s.iH)(null),p=(0,s.iH)(!1),g=(0,s.iH)(null),v=(0,s.iH)([]),b=(0,s.iH)(!1),C=(0,s.iH)(null),V=(0,s.iH)(!1),h=(0,s.iH)(!0),S=()=>{m.value=null,p.value=!1,g.value=null,b.value=!1,C.value=null,V.value=!1,h.value=!0},f=()=>{u.api.get(u.endPoints.SERIES+"Fel").then((e=>{i.value=e.data.Series})).catch((e=>{(0,d.L1)(e)}))},y=()=>{null!==e.value&&null!==l.value&&u.api.get(u.endPoints.SERIETIPO,(0,u.configApi)({queryParams:{serie:e.value,tipo:l.value}})).then((e=>{null===e.data.Serie?(o.value=null,a.value=null):(o.value=e.data.Serie.Impresion,a.value=e.data.Serie.Bodega)})).catch((e=>{}))},W=()=>{let i={Serie:e.value,Tipo:l.value,TipoImpresion:o.value,Descripcion:null,Bodega:a.value};u.api.put(u.endPoints.SERIETIPO,i).then((e=>{(0,d.dF)("Configuración guardada correctamente")})).catch((e=>{(0,d.L1)(e)}))},M=()=>{u.api.get(u.endPoints.BODEGA).then((e=>{c.value=e.data})).catch((e=>{(0,d.L1)(e)}))},B=()=>{u.api.get(u.endPoints.CONDICIONESPAGO).then((e=>{v.value=e.data})).catch((e=>{(0,d.L1)(e)}))},q=()=>{var e;null!==r.value&&u.api.get(u.endPoints.BODEGACONFIG+"/"+(null===(e=r.value)||void 0===e?void 0:e.Codigo)).then((e=>{if(null===e.data.Configuracion)return void S();let a=e.data.Configuracion;m.value=a.Cliente,p.value=a.Caja,g.value=a.Contado,"S"===a.BloqueaMayorista?b.value=!0:b.value=!1,C.value=a.ContraMay,V.value=a.GeneraInv,h.value=a.ContadoMay})).catch((e=>{(0,d.L1)(e)}))},H=()=>{let e={Bodega:r.value.Codigo,Cliente:m.value,Caja:p.value,Contado:g.value,BloqueaMayorista:b.value?"S":"N",ContraMay:C.value,GeneraInv:V.value,ContadoMay:h.value};u.api.put(u.endPoints.BODEGACONFIG,e).then((e=>{(0,d.dF)("Datos guardados")})).catch((e=>{(0,d.L1)(e)}))};return{getSeries:f,getDataSerie:y,saveSerie:W,getBodegas:M,getCondiciones:B,getDataBodega:q,saveBodega:H,serie:e,bodegaSerie:a,tipo:l,impresion:o,series:i,tipos:n,impresiones:t,bodega:r,bodegas:c,clienteTicket:m,usaCaja:p,condicion:g,condiciones:v,bloqueaMay:b,contraMay:C,generaMov:V,contadoMay:h}},watch:{serie(e){this.getDataSerie()},tipo(e){this.getDataSerie()},bodega(e){this.getDataBodega()}},created(){this.getSeries(),this.getBodegas(),this.getCondiciones()}});var c=l(11639),m=l(69885),p=l(44458),g=l(63190),v=l(13119),b=l(26384),C=l(68879),V=l(11221),h=l(50926),S=l(69984),f=l.n(S);const y=(0,c.Z)(r,[["render",t]]),W=y;f()(r,"components",{QPage:m.Z,QCard:p.Z,QCardSection:g.Z,QInput:v.Z,QSelect:b.Z,QBtn:C.Z,QCheckbox:V.Z,QSeparator:h.Z})}}]);