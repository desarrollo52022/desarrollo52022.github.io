"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[9270],{19270:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Y});var o=l(59835),i=l(86970),t=l(61957);const n={class:"row"},r={class:"col-xs-12 col-sm-5"},c={class:"col-12 row"},d=(0,o._)("div",{class:"col-6"},[(0,o._)("div",{class:"text-h6 text-center"}," ECOMMERCE ")],-1),s={class:"col-6 bg-grey"},u={class:"text-h6 text-center"},m=(0,o._)("div",{class:"col-6"},[(0,o._)("div",{class:"text-h6 text-center"}," Número de pedido ")],-1),p={class:"col-6"},v={class:"text-h6 text-center"},g={class:"col-xs-12 col-sm-6"},b=(0,o._)("span",{class:"q-ml-sm col-12"},"Ingrese nuevos datos",-1),f={class:"col-12 row"},h=(0,o._)("span",{class:"col-1 q-pt-sm"},"NIT",-1),C=(0,o._)("span",{class:"col q-pt-sm"},"CUI",-1);function w(e,a,l,w,P,_){const T=(0,o.up)("q-btn"),y=((0,o.up)("q-checkbox"),(0,o.up)("facturacion-dialog")),N=(0,o.up)("q-inner-loading"),q=(0,o.up)("q-td"),E=(0,o.up)("q-tr"),I=(0,o.up)("q-grid"),F=(0,o.up)("q-page"),x=(0,o.up)("q-toggle"),k=(0,o.up)("q-input"),Z=(0,o.up)("q-card-section"),W=(0,o.up)("q-card-actions"),D=(0,o.up)("q-card"),Q=(0,o.up)("q-dialog"),U=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(F,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(T,{color:"primary",label:"Cargar",onClick:e.getPedidos},null,8,["onClick"]),(0,o._)("div",r,[(0,o.kq)("",!0),(0,o._)("div",c,[d,(0,o._)("div",s,[(0,o._)("div",u,(0,i.zw)(e.condicion),1)]),m,(0,o._)("div",p,[(0,o._)("div",v,(0,i.zw)(e.numeroPedido),1)])])]),(0,o._)("div",g,[(0,o.Wm)(y,{disable:e.numeroPedido<=0,numeroPedido:e.numeroPedido,serie:e.serie,contingencia:e.contingencia,Total:e.total,Credito:!1,tipoPedido:1,habilitaCupones:!1,habilitaTarjetas:!1,ecommerce:!0,onFacturado:e.facturar},null,8,["disable","numeroPedido","serie","contingencia","Total","onFacturado"])])]),(0,o._)("div",null,[(0,o.Wm)(I,{class:"afacturar",data:e.rows,columns:e.columnas,columns_filter:!0,pagination:{rowsPerPage:0}},{loading:(0,o.w5)((()=>[(0,o.Wm)(N,{showing:"",color:"primary"})])),body:(0,o.w5)((l=>[(0,o.Wm)(E,{props:l,onClick:a=>e.selectProd(a,l.row),class:(0,i.C_)([l.row.Pedido===e.numeroPedido?"bg-grey":"","cursor-pointer"]),onDblclick:a[1]||(a[1]=a=>e.showCambio=!0)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.columnas,(e=>((0,o.wg)(),(0,o.j4)(q,{key:e.name,class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(l.row[e.field.toString()]),1)])),_:2},1024)))),128))])),_:2},1032,["props","onClick","class"])])),_:1},8,["data","columns"])])])),_:1}),(0,o.Wm)(Q,{modelValue:e.showCambio,"onUpdate:modelValue":a[4]||(a[4]=a=>e.showCambio=a)},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"row items-center"},{default:(0,o.w5)((()=>[b,(0,o._)("div",f,[h,(0,o.Wm)(x,{class:"col-2",color:"pink","false-value":"","true-value":"CUI",modelValue:e.tipoCambio,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tipoCambio=a)},null,8,["modelValue"]),C]),(0,o.Wm)(k,{class:"col-12",modelValue:e.nitCambio,"onUpdate:modelValue":a[3]||(a[3]=a=>e.nitCambio=a),type:"text",label:"Nuevo nit",onKeypress:(0,t.D2)(e.cambiarNit,["enter"]),autofocus:"",ref:"nuevoNitRef"},null,8,["modelValue","onKeypress"])])),_:1}),(0,o.Wm)(W,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(T,{flat:"",label:"Cancel",color:"primary"},null,512),[[U]]),(0,o.Wm)(T,{flat:"",label:"Cambiar",color:"primary",onClick:e.cambiarNit},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var P=l(34136),_=l(32222),T=l(67825),y=l(68651),N=l(84619),q=l(60499),E=l(75256),I=l(17779),F=function(e,a,l,o){function i(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,t){function n(e){try{c(o.next(e))}catch(a){t(a)}}function r(e){try{c(o["throw"](e))}catch(a){t(a)}}function c(e){e.done?l(e.value):i(e.value).then(n,r)}c((o=o.apply(e,a||[])).next())}))};const x=[{name:"Pedido",label:"Pedido",field:"Pedido",align:"center"},{name:"Nit",label:"Nit",field:"Nit",align:"center"},{name:"Nombre",label:"Nombre",field:"Nombre",align:"center"},{name:"Total",label:"Total",field:"Total",align:"center"},{name:"Vendedor",label:"Vendedor",field:"Vendedor",align:"center"},{name:"Fecha",label:"Fecha",field:"Fecha",align:"center"},{name:"Estado",label:"Estado",field:"Estado",align:"center"},{name:"Condicion",label:"Condición",field:"Condicion",align:"center"},{name:"Tipo",label:"Tipo",field:"Tipo",align:"center"}],k=(0,o.aZ)({name:"FacturacionEcommerce",setup(){const e=(0,N.z)(),a=(0,q.iH)([]),l=(0,q.iH)(0),o=(0,q.iH)(""),i=(0,q.iH)(!1),t=(0,q.iH)(0),n=(0,q.iH)(""),r=(0,q.iH)(""),c=(0,q.iH)(0),d=(0,q.iH)(""),s=(0,q.iH)(""),u=(0,q.iH)(!1),m=()=>{P.api.get(P.endPoints.PEDIDOWEB).then((e=>{a.value=e.data.Pedidos})).catch((e=>{}))},p=(e,a)=>{l.value=a.Pedido,o.value=a.Condicion,r.value=a.Tipo,c.value=a.Total,b(r.value)},v=()=>{m()},g=()=>{let e=10,a=10;var o=screen.width/2-(e+50),i=screen.height/2-(a+50);let t="#/Reportes/PEDIDOSU/"+l.value;I.log(t);try{var n=window.open(t,"Factura","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+e+", height="+a+", top="+i+", left="+o);const r=setInterval((()=>{(null===n||void 0===n?void 0:n.closed)&&(clearInterval(r),l.value=0)}),500)}catch(r){I.log(r)}},b=(e="")=>{var a,l,o;""!==e?"FACT"===e?n.value=null!==(a=(0,T.dS)())&&void 0!==a?a:"":"FCRE"===e?n.value=null!==(l=(0,T.JT)())&&void 0!==l?l:"":"FCON"===e&&(n.value=null!==(o=(0,T.V6)())&&void 0!==o?o:""):n.value=""},f=()=>{let e=10,a=10;screen.width,screen.height;let l="#/Reportes/CONTINGENCIA/"+n.value+"/"+t.value.toString();I.log(l);try{var o=window.open(l,"Factura","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+e+", height="+a+", top=0, left=0");const i=setInterval((()=>{(null===o||void 0===o?void 0:o.closed)&&(clearInterval(i),n.value="",t.value=0)}),500)}catch(i){I.log(i)}},h=()=>F(this,void 0,void 0,(function*(){var e;if(n.value=null!==(e=yield(0,y.UA)("Serie","Ingrese la serie"))&&void 0!==e?e:"",null!==n.value){let e=yield(0,y.UA)("Factura","Ingrese el número de factura");null!==e&&(t.value=e,f())}})),C=()=>F(this,void 0,void 0,(function*(){var e;if(n.value=null!==(e=yield(0,y.UA)("Serie","Ingrese la serie"))&&void 0!==e?e:"",null!==n.value){let e=yield(0,y.UA)("Factura","Ingrese el número de factura");null!==e&&(t.value=e,yield P.api.get(P.endPoints.FACTURAR,(0,P.configApi)({serie:n.value,queryParams:{numeroFactura:t.value}})).then((e=>{null!==e.data.Encabezado?(0,T.Qe)()?open(T.qC+e.data.Encabezado.Uuid,"factura"):(0,_.EW)((0,T.LX)(),"factura.pdf",{urlDownload:T.qC+e.data.Encabezado.Uuid}):(0,y.x2)("No existe la factura")})).catch((e=>{(0,y.L1)(e)})).finally((()=>{n.value="",t.value=0})))}})),w=()=>{P.api.post(P.endPoints.PEDIDOENC+"cambiarEstado",l.value).then((e=>{(0,y.dF)("Pedido regresado"),m()})).catch((e=>{(0,y.L1)(e)}))},E=()=>{let e={Pedido:l.value,Nit:s.value,Tipo:d.value,Sucursal:(0,T.TT)()};P.api.post(P.endPoints.PEDIDOSGL+"CambiarNit",e).then((e=>{(0,y.dF)("Cambiado correctamente"),u.value=!1,m(),s.value="",d.value=""})).catch((e=>{(0,y.L1)(e)}))};return{getPedidos:m,selectProd:p,facturar:v,reimprimirContingencia:h,reimprimirFel:C,regresar:w,reimprmirPedido:g,cambiarNit:E,facturacion:e,columnas:x,rows:a,numeroPedido:l,contingencia:i,serie:n,condicion:o,tipo:r,total:c,tipoCambio:d,nitCambio:s,showCambio:u}},created(){this.getPedidos()},watch:{serie(e){this.facturacion.serie=this.serie}},components:{FacturacionDialog:E.Z}});var Z=l(11639),W=l(69885),D=l(68879),Q=l(11221),U=l(60854),H=l(31233),V=l(67220),A=l(32074),S=l(44458),z=l(63190),O=l(23175),R=l(13119),L=l(11821),K=l(84277),j=l(62146),B=l(69984),G=l.n(B);const M=(0,Z.Z)(k,[["render",w]]),Y=M;G()(k,"components",{QPage:W.Z,QBtn:D.Z,QCheckbox:Q.Z,QInnerLoading:U.Z,QTr:H.Z,QTd:V.Z,QDialog:A.Z,QCard:S.Z,QCardSection:z.Z,QToggle:O.Z,QInput:R.Z,QCardActions:L.Z,QTable:K.Z}),G()(k,"directives",{ClosePopup:j.Z})}}]);