"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[5633],{55633:(e,a,l)=>{l.r(a),l.d(a,{default:()=>M});var n=l(59835);const o={class:"row q-pa-xl"},i={class:"col col-sm-12 col-md-12 q-pb-md"},t={class:"row q-pa-xs"},d={class:"col-xs-12 col-md-5"},c={class:"row justify-between"},s={class:"q-pa-md col col-sm-12 col-md-3"},r={class:"q-pa-xl col col-sm-12 col-md-8"},m={class:"col col-sm-12 col-md-12"},u={class:"row justify-between"},E={class:"q-pa-md col col-sm-12 col-md-3"},p={class:"q-pa-xl col-sm-12 col-md-8"},v={class:"row q-pa-lg"},O={class:"q-pa-sm col-sm-12 col-md-11"},T={class:"q-pa-sm col-sm-12 col-md-11"};function h(e,a,l,h,N,f){const D=(0,n.up)("q-select"),g=(0,n.up)("q-date"),I=(0,n.up)("q-table"),P=(0,n.up)("q-expansion-item"),b=(0,n.up)("q-btn"),w=(0,n.up)("q-td"),C=(0,n.up)("q-icon"),_=(0,n.up)("q-input"),H=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(H,{class:"q-pa-sm"},{default:(0,n.w5)((()=>[(0,n._)("div",o,[(0,n._)("div",i,[(0,n.Wm)(P,{"expand-separator":"",icon:"engineering",label:"Programación Técnicos",caption:"Detalle de Ordenes por Técnico","header-class":"text-indigo"},{default:(0,n.w5)((()=>[(0,n._)("div",t,[(0,n._)("div",d,[(0,n.Wm)(D,{outlined:"","use-chips":"",modelValue:e.modelTecnicos,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.modelTecnicos=a),a[1]||(a[1]=a=>{e.fechasTecnicos(a.value)})],options:e.optionsTecnicos,label:"TÉCNICOS"},null,8,["modelValue","options"])])]),(0,n._)("div",c,[(0,n._)("div",s,[(0,n.Wm)(g,{color:"indigo",modelValue:e.myDateTech,"onUpdate:modelValue":[a[2]||(a[2]=a=>e.myDateTech=a),e.showEventsTech],landscape:"",events:e.eventsTech,"event-color":"orange"},null,8,["modelValue","events","onUpdate:modelValue"])]),(0,n._)("div",r,[(0,n.Wm)(I,{title:"Detalle de Ordenes de Fecha: "+e.myDate,rows:e.rowsTech,columns:e.colsDate,class:"q-pl-xl"},null,8,["title","rows","columns"])])])])),_:1})]),(0,n._)("div",m,[(0,n.Wm)(P,{"expand-separator":"",icon:"handyman",label:"Programación de Instalaciones",caption:"Detalle de Ordenes por Fecha - Tipo de Instalacion","header-class":"text-indigo"},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n._)("div",E,[(0,n.Wm)(g,{color:"indigo",modelValue:e.myDate,"onUpdate:modelValue":[a[3]||(a[3]=a=>e.myDate=a),e.showEvents],landscape:"",events:e.events,"event-color":"orange"},null,8,["modelValue","events","onUpdate:modelValue"])]),(0,n._)("div",p,[(0,n.Wm)(I,{title:"Detalle de Ordenes de Fecha: "+e.myDate,rows:e.rows,columns:e.colsDate,class:"q-pl-xl"},null,8,["title","rows","columns"])])])])),_:1})])]),(0,n._)("div",v,[(0,n._)("div",O,[(0,n.Wm)(I,{title:"Ordenes Procesadas",filter:e.filtroProcesado,separator:"vertical",rows:e.rowsProcesado,columns:e.colsProcesado,pagination:{rowsPerPage:0},"virtual-scroll":""},{"body-cell-Editar":(0,n.w5)((a=>[(0,n.Wm)(w,{props:a,style:{padding:"0px",width:"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{outline:"",color:"purple",icon:"edit",onClick:l=>e.editarOrdenNavegar(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(_,{borderless:"",dense:"",modelValue:e.filtroProcesado,"onUpdate:modelValue":a[4]||(a[4]=a=>e.filtroProcesado=a),placeholder:"Buscar",clearable:""},{append:(0,n.w5)((()=>[(0,n.Wm)(C,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["filter","rows","columns"])]),(0,n._)("div",T,[(0,n.Wm)(I,{filter:e.filtroTerminado,separator:"vertical",title:"Ordenes Terminadas",rows:e.rowsTerminado,columns:e.colsTerminado,pagination:{rowsPerPage:0},dense:""},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(_,{borderless:"",dense:"",modelValue:e.filtroTerminado,"onUpdate:modelValue":a[5]||(a[5]=a=>e.filtroTerminado=a),placeholder:"Buscar",clearable:""},{append:(0,n.w5)((()=>[(0,n.Wm)(C,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["filter","rows","columns"])])])])),_:1})}var N=l(34136),f=l(68651),D=l(60499),g=l(54170),I=l(78618),P=l(18910),b=l(17779),w=function(e,a,l,n){function o(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,i){function t(e){try{c(n.next(e))}catch(a){i(a)}}function d(e){try{c(n["throw"](e))}catch(a){i(a)}}function c(e){e.done?l(e.value):o(e.value).then(t,d)}c((n=n.apply(e,a||[])).next())}))};const C=[{name:"Fecha",label:"Fecha",field:"Fecha",align:"center",format:(e,a)=>`${g.ZP.formatDate(e,"DD-MM-YYYY hh:mm aa")}`},{name:"Nit",label:"Nit",field:"NitCliente",align:"center"},{name:"Cliente",label:"Cliente",field:"NombreCliente",align:"center"},{name:"Total",label:"Total",field:"Total",align:"center"},{name:"Factura",label:"Factura",field:"Factura",align:"center"},{name:"Orden",label:"Orden",field:"Orden",align:"center"},{name:"Pedido",label:"Pedido",field:"Pedido",align:"center"},{name:"UUID",label:"UUID",field:"Uuid",align:"center"}],_=[{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"HORA",label:"Hora",field:"HORA",align:"center"},{name:"CLIENTE",label:"Cliente",field:"CLIENTE",align:"center"},{name:"TIPO_INSTALACION",label:"Instalacion",field:"TIPO_INSTALACION",align:"center"},{name:"TECNICO",label:"Tecnico",field:"TECNICO",align:"center"}],H=[{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"CLIENTE",label:"Cliente",field:"CLIENTE",align:"center"},{name:"TIPO_INSTALACION",label:"Instalacion",field:"TIPO_INSTALACION",align:"center"},{name:"FECHA_ORDEN",label:"Fecha Instalación",field:"FECHA_ORDEN",align:"center"},{name:"HORA_ORDEN",label:"Hora Instalación",field:"HORA_ORDEN",align:"center"},{name:"TECNICO",label:"Tecnico",field:"TECNICO",align:"center"},{name:"Editar",label:"Editar",field:"Editar",align:"center"}],S=[{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"CLIENTE",label:"Cliente",field:"CLIENTE",align:"center"},{name:"TIPO_INSTALACION",label:"Instalacion",field:"TIPO_INSTALACION",align:"center"},{name:"FECHA_ORDEN",label:"Fecha Instalado",field:"FECHA_ORDEN",align:"center"},{name:"HORA_ORDEN",label:"Hora Instalado",field:"HORA_ORDEN",align:"center"},{name:"TECNICO",label:"Tecnico",field:"TECNICO",align:"center"}],R=(0,n.aZ)({name:"EstadoOrdenes",setup(e,{emit:a}){const l=(0,P.tv)(),n=(0,D.iH)([]),o=(0,D.iH)([]),i=(0,D.iH)([]),t=(0,D.iH)([]),d=(0,D.iH)([]),c=(0,D.iH)(null),s=(0,D.iH)([]),r=(0,D.iH)([]),m=(0,D.iH)([]),u=(0,D.iH)(""),E=(0,D.iH)(""),p=(0,D.iH)(0),v=(0,D.iH)(0),O=(0,D.iH)(0),T=(0,D.iH)(""),h=(0,D.iH)(!1),R=(0,D.iH)(!1),A=(0,D.iH)(""),y=(0,D.iH)(""),F=g.ZP.formatDate(Date.now(),"YYYY/MM/DD"),q=(0,D.iH)(F),L=(0,D.iH)(F),x=(0,D.iH)(F),V=()=>w(this,void 0,void 0,(function*(){yield N.api.get(N.endPoints.ORDENES_PENDIENTES+"Tecnicos").then((e=>{const{data:a}=e;s.value=a.TECNICOS})).catch((e=>{(0,f.L1)(e)}))})),W=e=>w(this,void 0,void 0,(function*(){yield(0,I._R)(100),(0,f.wp)("Confirmar","¿Está seguro de editar el detalle de Orden de Instalacion?",{onPressOk:()=>w(this,void 0,void 0,(function*(){yield N.api.get(N.endPoints.ORDENES_PENDIENTES+"NumPedido",{params:{orden:e.ORDEN}}).then((e=>w(this,void 0,void 0,(function*(){let a=e.data.PEDIDO;yield l.push({name:"Ordenes",params:{numeroPedido:a}})})))).catch((e=>{(0,f.L1)(e)}))}))})})),Z=()=>w(this,void 0,void 0,(function*(){null!==q.value&&(yield N.api.get(N.endPoints.ORDENES_PENDIENTES+"OrdenPorFecha",{params:{fecha:q.value}}).then((e=>{o.value=e.data.ORDENES})).catch((e=>{(0,f.L1)(e)})))})),U=()=>w(this,void 0,void 0,(function*(){null!==c.value&&null!==L.value&&(yield N.api.get(N.endPoints.ORDENES_PENDIENTES+"OrdenPorFechaTech",{params:{fecha:L.value,id:c.value.value}}).then((e=>{b.log(e.data.ORDENES),i.value=e.data.ORDENES})).catch((e=>{(0,f.L1)(e)})))})),Q=()=>{N.api.get(N.endPoints.ORDENES_PENDIENTES+"EstadosOrdenes",{params:{estado:"S"}}).then((e=>{t.value=e.data.ESTADO_ORDEN})).catch((e=>{(0,f.L1)(e)})),N.api.get(N.endPoints.ORDENES_PENDIENTES+"EstadosOrdenes",{params:{estado:"T"}}).then((e=>{d.value=e.data.ESTADO_ORDEN})).catch((e=>{(0,f.L1)(e)}))},Y=e=>w(this,void 0,void 0,(function*(){yield N.api.get(N.endPoints.ORDENES_PENDIENTES+"FechasTecnicos",{params:{idTech:e}}).then((e=>{const a=e.data.FECHAS.map((({FECHA:e})=>e.split("T")[0].toString().replaceAll("-","/")));m.value=a})).catch((e=>{(0,f.L1)(e)}))})),k=()=>w(this,void 0,void 0,(function*(){var e,a;p.value=0,O.value=0,v.value=null,T.value="",h.value=!0,A.value="";const l={FechaInicial:null!==(e=x.value["from"])&&void 0!==e?e:x.value,FechaFinal:null!==(a=x.value["to"])&&void 0!==a?a:x.value,NombreCliente:y.value};N.api.post(N.endPoints.ORDENES_PENDIENTES+"HistorialOrdenes",l).then((e=>{n.value=e.data.Orden})).catch((e=>{(0,f.L1)(e)})).finally((()=>{h.value=!1})),N.api.get(N.endPoints.ORDENES_PENDIENTES+"FechasOrdenes").then((e=>{const a=e.data.FECHAS.map((({FECHA:e})=>e.split("T")[0].toString().replaceAll("-","/")));r.value=a})).catch((e=>{(0,f.L1)(e)})),Q(),yield V()}));return{rowsTech:i,filtroProcesado:u,editarOrdenNavegar:W,filtroTerminado:E,rowsTerminado:d,rowsProcesado:t,colsTerminado:S,colsProcesado:H,rows:o,colsDate:_,events:r,eventsTech:m,showEvents:Z,myDate:q,date:g.ZP,loadData:k,orden:p,factura:v,serie:T,data:n,loadError:R,recargarLoad:h,columns:C,dates:x,nombreCliente:y,optionsTecnicos:s,modelTecnicos:c,getTecnicos:V,fechasTecnicos:Y,myDateTech:L,showEventsTech:U}},created(){return w(this,void 0,void 0,(function*(){yield this.loadData()}))}});var A=l(11639),y=l(69885),F=l(50651),q=l(26384),L=l(92952),x=l(84277),V=l(67220),W=l(68879),Z=l(13119),U=l(22857),Q=l(69984),Y=l.n(Q);const k=(0,A.Z)(R,[["render",h],["__scopeId","data-v-422aafd3"]]),M=k;Y()(R,"components",{QPage:y.Z,QExpansionItem:F.Z,QSelect:q.Z,QDate:L.Z,QTable:x.Z,QTd:V.Z,QBtn:W.Z,QInput:Z.Z,QIcon:U.Z})}}]);