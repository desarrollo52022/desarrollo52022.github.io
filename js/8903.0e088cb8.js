"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[8903],{58903:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});var t=a(59835),n=a(86970);const o=(0,t._)("div",{class:"row"},[(0,t._)("div",{class:"col col-xs-12 col-sm-4"},[(0,t._)("div",{class:"row"},[(0,t._)("div",{class:"col"})])])],-1),i={class:""},r={class:"row q-mt-sm"},c={class:"col-xs-12 col-sm-6 col-md-5 col-lg-4"},d={class:"col-xs-12 col-sm-6 col-md-7"},s={class:"row full-height"},u={class:"col col-xs-12 col-sm-12"},m={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},v={class:"row"},p={class:"text-center col-2"},w={class:"text-subtitle2"},f={class:"text-center col-2 border-All"},b={class:"col q-pl-sm"};function h(e,l,a,h,g,_){const C=(0,t.up)("KeyPageDetect"),D=(0,t.up)("q-date"),q=(0,t.up)("q-input"),F=(0,t.up)("q-btn"),P=(0,t.up)("q-icon"),k=(0,t.up)("q-card-section"),H=(0,t.up)("q-card"),O=(0,t.up)("q-table"),Z=(0,t.up)("q-page-sticky"),x=(0,t.up)("q-page");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(C),(0,t.Wm)(x,{class:"q-pa-sm"},{default:(0,t.w5)((()=>{var a,h;return[o,(0,t._)("div",i,[(0,t._)("h6",null," Del: "+(0,n.zw)(null===e.dates?"":null!==(a=e.dates["from"])&&void 0!==a?a:e.dates)+" al "+(0,n.zw)(null===e.dates?"":null!==(h=e.dates["to"])&&void 0!==h?h:e.dates),1)]),(0,t._)("div",r,[(0,t._)("div",c,[(0,t.Wm)(D,{modelValue:e.dates,"onUpdate:modelValue":l[0]||(l[0]=l=>e.dates=l),range:"","today-btn":"",landscape:""},null,8,["modelValue"])]),(0,t._)("div",d,[(0,t.Wm)(q,{class:"q-mt-lg",modelValue:e.nombreCliente,"onUpdate:modelValue":l[1]||(l[1]=l=>e.nombreCliente=l),type:"text",label:"Nombre del cliente"},null,8,["modelValue"]),(0,t.Wm)(F,{class:"q-pa-sm",color:"primary",icon:"search",label:"Buscar",onClick:e.loadData},null,8,["onClick"])])]),(0,t._)("div",s,[(0,t._)("div",u,[(0,t.Wm)(O,{grid:"",title:"Historial de Ordenes de Instalación",filter:e.filter,rows:e.data,columns:e.columns,onRowClick:e.selectFact,"virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0],pagination:{rowsPerPage:0},loading:e.recargarLoad},{"top-right":(0,t.w5)((()=>[(0,t.Wm)(q,{borderless:"",dense:"",modelValue:e.filter,"onUpdate:modelValue":l[2]||(l[2]=l=>e.filter=l),placeholder:"Buscar Orden de Instalación",clearable:""},{append:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"search"})])),_:1},8,["modelValue"])])),item:(0,t.w5)((l=>[(0,t._)("div",m,[(0,t.Wm)(H,{class:(0,n.C_)(["cursor-pointer q-hoverable",e.orden===l.row.Orden?"shadow-24 bg-grey":""]),onClick:a=>e.selectFact(null,l.row,l.rowIndex)},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t._)("div",p,[(0,t._)("div",null,(0,n.zw)(e.date.formatDate(l.row.Fecha,"MMM")),1),(0,t._)("div",w,(0,n.zw)(e.date.formatDate(l.row.Fecha,"DD")),1),(0,t._)("div",null,(0,n.zw)(e.date.formatDate(l.row.Fecha,"YYYY")),1)]),(0,t._)("div",f,[(0,t._)("div",null,"Orden: "+(0,n.zw)(l.row.Orden),1),(0,t._)("div",null,"Ped: "+(0,n.zw)(l.row.Pedido),1),(0,t._)("div",null,"Fact: "+(0,n.zw)(l.row.Factura),1)]),(0,t._)("div",b,[(0,t._)("div",null,(0,n.zw)(l.row.NitCliente),1),(0,t._)("div",null,(0,n.zw)(l.row.NombreCliente),1),(0,t._)("div",null,"Q."+(0,n.zw)(l.row.Total),1)])])])),_:2},1024)])),_:2},1032,["class","onClick"])])])),_:1},8,["filter","rows","columns","onRowClick","loading"])])]),(0,t.Wm)(Z,{position:"top",offset:[25,40]},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{disable:0===e.orden,class:"q-ma-xs",color:"primary",icon:"send",label:"Imprimir Orden: "+e.orden,onClick:e.reporteOrdenesInstalacion},null,8,["disable","label","onClick"]),(0,t.Wm)(F,{disable:0===e.factura||null===e.factura||!e.uuid,class:"q-ma-xs",color:"primary",icon:"print",label:(e.factura,"-"),onClick:e.reimprimir},null,8,["disable","label","onClick"])])),_:1})]})),_:1})],64)}var g=a(34136),_=a(68651),C=a(60499),D=a(54170),q=a(67825),F=a(37655),P=a(78618),k=a(38346),H=a(17779),O=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{c(t.next(e))}catch(l){o(l)}}function r(e){try{c(t["throw"](e))}catch(l){o(l)}}function c(e){e.done?a(e.value):n(e.value).then(i,r)}c((t=t.apply(e,l||[])).next())}))};const Z=[{name:"Fecha",label:"Fecha",field:"Fecha",align:"center",format:(e,l)=>`${D.ZP.formatDate(e,"DD-MM-YYYY hh:mm aa")}`},{name:"Nit",label:"Nit",field:"NitCliente",align:"center"},{name:"Cliente",label:"Cliente",field:"NombreCliente",align:"center"},{name:"Total",label:"Total",field:"Total",align:"center"},{name:"Factura",label:"Factura",field:"Factura",align:"center"},{name:"Orden",label:"Orden",field:"Orden",align:"center"},{name:"Pedido",label:"Pedido",field:"Pedido",align:"center"},{name:"UUID",label:"UUID",field:"Uuid",align:"center"}],x=(0,t.aZ)({name:"HistorialOrdenes",setup(e,{emit:l}){const a=(0,C.iH)([]),t=(0,C.iH)(""),n=(0,C.iH)(0),o=(0,C.iH)(0),i=(0,C.iH)(0),r=(0,C.iH)(""),c=(0,C.iH)(!1),d=(0,C.iH)(!1),s=(0,C.iH)(""),u=(0,C.iH)(!1),m=(0,C.iH)(""),v=(0,C.iH)(!1),p=D.ZP.formatDate(Date.now(),"YYYY/MM/DD"),w=(0,C.iH)(p),f=()=>{var e,l;n.value=0,i.value=0,o.value=null,r.value="",c.value=!0,s.value="";const t={FechaInicial:null!==(e=w.value["from"])&&void 0!==e?e:w.value,FechaFinal:null!==(l=w.value["to"])&&void 0!==l?l:w.value,NombreCliente:m.value};g.api.post(g.endPoints.ORDENES_PENDIENTES+"HistorialOrdenes",t).then((e=>{a.value=e.data.Orden})).catch((e=>{(0,_.L1)(e)})).finally((()=>{c.value=!1}))},b=(e,l,a)=>{n.value=0,i.value=0,o.value=null,s.value="",r.value=l.Serie,s.value=l.Uuid,n.value=l.Orden,i.value=l.Pedido,o.value=l.Factura,s.value=l.Uuid},h=()=>{window.open(q.qC+s.value,"Facturawt")},x=()=>O(this,void 0,void 0,(function*(){h(),yield(0,P._R)(500),r.value=""})),y=()=>{let e=q.qC+s.value,l="Puede ver tú factura en el siguiente enlace \n "+e;var a="https://wa.me/?text="+l;window.open(a,"Facturawt")},I=()=>{var e;let l=10,a=10,t="";t="#/Reportes/ORDENES/"+(null===(e=i.value)||void 0===e?void 0:e.toString()),l=k.Z.width,a=k.Z.height,H.log(t),(0,F.Q)("Imprimiendo...",void 0,void 0,"QSpinnerRadio");try{var n=window.open(t,"Factura","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+l+", height="+a+", top=0, left=0");const e=setInterval((()=>{(null===n||void 0===n?void 0:n.closed)&&(clearInterval(e),v.value=!1,(0,F.E)())}),500)}catch(o){H.log(o),(0,F.E)()}};return{date:D.ZP,loadData:f,selectFact:b,reimprimir:x,send:y,orden:n,factura:o,serie:r,data:a,loadError:d,recargarLoad:c,columns:Z,filter:t,showImprimir:u,dates:w,nombreCliente:m,reporteOrdenesInstalacion:I,uuid:s}},created(){this.loadData()}});var y=a(11639),I=a(69885),z=a(92952),Q=a(13119),W=a(68879),Y=a(84277),N=a(22857),E=a(44458),U=a(63190),S=a(50926),V=a(30627),T=a(69984),M=a.n(T);const R=(0,y.Z)(x,[["render",h]]),B=R;M()(x,"components",{QPage:I.Z,QDate:z.Z,QInput:Q.Z,QBtn:W.Z,QTable:Y.Z,QIcon:N.Z,QCard:E.Z,QCardSection:U.Z,QSeparator:S.Z,QPageSticky:V.Z})}}]);