"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[7083],{77083:(e,o,a)=>{a.r(o),a.d(o,{default:()=>Na});var l=a(59835),i=a(86970),t=a(61957);const n=e=>((0,l.dD)("data-v-81913c26"),e=e(),(0,l.Cn)(),e),d={class:"row items-center"},r={class:"cursor-pointer non-selectable",id:"layout-opciones"},c=(0,l.Uk)(" Opciones "),u=(0,l.Uk)("Cargar Ultimo Pedido(Ctrl+A)"),s=(0,l.Uk)("Cargar Pedido por Número"),p=(0,l.Uk)("Reimprimir Factura(Ctrl+R) "),v=(0,l.Uk)("Reimprimir Devolución(Ctrl+D) "),m=(0,l.Uk)("Reimprimir Pedido "),g=(0,l.Uk)(" Nuevo Pedido "),b=(0,l.Uk)(" (Ctrl+Espacio) "),P=(0,l.Uk)(" Anular Pedido "),f=(0,l.Uk)(" (Delete/Supr) "),h=n((()=>(0,l._)("div",{class:"q-ml-md cursor-pointer non-selectable",id:"layout-anular-pedido"},null,-1))),w=n((()=>(0,l._)("div",{class:"no-pointer non-selectable"},null,-1))),C={class:"text-h5"},y={class:"text-h6"},D={class:"row"},k={class:"col-xs-12"},_={class:"col col-xs-12 col-sm-7",style:{}},x={class:"row items-center no-wrap",id:"pos-opcion-ticket"},T={class:"text-center"},N=n((()=>(0,l._)("br",null,null,-1))),q={class:"row items-center no-wrap",id:"pos-opcion-may"},E={class:"text-center"},W=n((()=>(0,l._)("br",null,null,-1))),V={class:"row justify-center"},I={key:0,class:"col-12 row"},L={class:"col-xs-12 col-sm-5 col-md-4"},S={class:"q-ma-sm row"},H={key:1},F={key:2,class:"col col-xs-12 col-sm-12 col-md-12 col-lg-6"},U={class:"row"},R={class:"col-sm-8 col-md-5"},O={key:0,class:"text-red text-caption border-radius-inherit",style:{display:"inline-block"}},Z={class:"col col-xs-12 col-sm-5"},z={class:"row"},A={class:"col-xs-12 col-md-6"},Q=n((()=>(0,l._)("div",{class:"text-subtitle2"},"Número de Pedido",-1))),M={class:"text-h4"},j=n((()=>(0,l._)("div",{class:"col-xs-12 col-md-6"},null,-1))),B=n((()=>(0,l._)("div",{class:"text-subtitle2"},"Subtotal",-1))),K={class:"text-h4"},Y={class:"row"},$={class:"row"},G={key:0,class:"q-pl-md"},X={key:0},J={key:2},ee=n((()=>(0,l._)("thead",{class:"bg-secondary"},[(0,l._)("tr",null,[(0,l._)("th",{class:"text-center bg-grey"},"Código"),(0,l._)("th",{class:"text-center bg-grey"},"Descripción"),(0,l._)("th",{class:"text-center bg-grey"},"Factor")])],-1))),oe=["onDblclick"],ae={class:"text-center"},le={class:"text-center"},ie={class:"text-center"},te={key:0,class:"row"},ne={class:"col-xs-12 col-sm-4 border-R"},de={class:"text-h4 text-center"},re={class:"col-xs-9 col-sm-5 border-R"},ce={class:"text-h4 text-center"},ue={class:"col-3 text-center"},se=n((()=>(0,l._)("div",{class:"text-subtitle2"},"Contingencia",-1))),pe={class:"row"},ve={class:"col-xs-12 col-sm-12 col-md-5"},me={key:0,class:"bg-red text-h6 q-ma-xs"},ge={class:"row"},be={class:"col col-xs-12 col-sm-8"},Pe={class:"col col-xs-12 col-sm-3 q-mr-sm q-mt-xs"},fe=n((()=>(0,l._)("br",null,null,-1))),he={key:1,class:"col col-5 text-subtitle2 q-pa-xs"},we=n((()=>(0,l._)("br",null,null,-1))),Ce=(0,l.Uk)(" Subtotal:"),ye={class:"bg-secondary q-pa-xs",style:{display:"inline-block"}},De={class:"col-xs-12 col-sm-7 col-md-4 q-pa-sm",id:"pos-precios"},ke=n((()=>(0,l._)("thead",{class:"bg-secondary"},[(0,l._)("tr",null,[(0,l._)("th",{class:"text-center"},"Inicial"),(0,l._)("th",{class:"text-center"},"Final"),(0,l._)("th",{class:"text-center"},"Precio"),(0,l._)("th",{class:"text-center"},"Existencia"),(0,l._)("th",{class:"text-center"},"Reserva")])],-1))),_e={class:"text-center"},xe={class:"text-center"},Te={class:"text-center"},Ne=["rowspan"],qe=["rowspan"],Ee={key:0,class:"col-xs-12 col-sm-4 col-md-3 q-pa-sm",id:"pos-ums"},We=n((()=>(0,l._)("thead",{class:"bg-secondary"},[(0,l._)("tr",null,[(0,l._)("th",{class:"text-center bg-grey"},"Código"),(0,l._)("th",{class:"text-center bg-grey"},"Descripción"),(0,l._)("th",{class:"text-center bg-grey"},"Factor")])],-1))),Ve=["onDblclick"],Ie={class:"text-center"},Le={class:"text-center"},Se={class:"text-center"};function He(e,o,a,n,He,Fe){const Ue=(0,l.up)("q-item-section"),Re=(0,l.up)("q-item"),Oe=(0,l.up)("q-separator"),Ze=(0,l.up)("q-list"),ze=(0,l.up)("q-menu"),Ae=(0,l.up)("q-tooltip"),Qe=(0,l.up)("q-space"),Me=(0,l.up)("q-bar"),je=(0,l.up)("KeyPageDetect"),Be=(0,l.up)("ProductosOfertadosDialog"),Ke=(0,l.up)("q-card-section"),Ye=(0,l.up)("q-input"),$e=(0,l.up)("q-btn"),Ge=(0,l.up)("q-card-actions"),Xe=(0,l.up)("q-card"),Je=(0,l.up)("q-dialog"),eo=(0,l.up)("PedidosPendientes"),oo=(0,l.up)("q-icon"),ao=(0,l.up)("q-btn-toggle"),lo=(0,l.up)("q-option-group"),io=(0,l.up)("ClientesDialog"),to=(0,l.up)("PuntosCliente"),no=(0,l.up)("AClientesDialog"),ro=(0,l.up)("q-checkbox"),co=(0,l.up)("q-form"),uo=(0,l.up)("q-toggle"),so=(0,l.up)("DespacharPendientes"),po=(0,l.up)("FacturacionDialog"),vo=(0,l.up)("TransformarDialog"),mo=(0,l.up)("ReservasDialog"),go=(0,l.up)("ProductosBuscados"),bo=(0,l.up)("qrscannerVue"),Po=(0,l.up)("q-markup-table"),fo=(0,l.up)("ProductsDialog"),ho=(0,l.up)("q-popup-edit"),wo=(0,l.up)("q-td"),Co=(0,l.up)("q-table"),yo=(0,l.up)("q-page"),Do=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(Me,{dark:"",class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l._)("div",r,[c,(0,l.Wm)(ze,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Ze,{dense:""},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(Re,{clickable:"",onClick:e.cargarUltimo,id:"layout-ultimo"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:1},8,["onClick"])),[[Do]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Re,{clickable:"",onClick:e.cargarNumero},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:1},8,["onClick"])),[[Do]]),(0,l.Wm)(Oe),(0,l.Wm)(Re,{clickable:"",onClick:o[0]||(o[0]=o=>e.openPrompt("fact"))},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,null,{default:(0,l.w5)((()=>[p])),_:1})])),_:1}),(0,l.Wm)(Re,{clickable:"",onClick:o[1]||(o[1]=o=>e.openPrompt("nc"))},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,null,{default:(0,l.w5)((()=>[v])),_:1})])),_:1}),(0,l.Wm)(Re,{clickable:"",onClick:o[2]||(o[2]=o=>e.openPrompt("pedido"))},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,null,{default:(0,l.w5)((()=>[m])),_:1})])),_:1})])),_:1})])),_:1})]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:"q-ml-md cursor-pointer non-selectable",onClick:o[3]||(o[3]=(...o)=>e.abrirCaja&&e.abrirCaja(...o)),id:"layout-abrir-caja"}," Abrir caja ")),(0,l._)("div",{class:"q-ml-md cursor-pointer non-selectable",onClick:o[4]||(o[4]=o=>e.numeroPedido=0),id:"layout-nuevo-pedido"},[g,(0,l.Wm)(Ae,null,{default:(0,l.w5)((()=>[b])),_:1})]),(0,l._)("div",{class:"q-ml-md cursor-pointer non-selectable",onClick:o[5]||(o[5]=(...o)=>e.anularPedido&&e.anularPedido(...o)),id:"layout-anular-pedido"},[P,(0,l.Wm)(Ae,null,{default:(0,l.w5)((()=>[f])),_:1})]),h,(0,l.Wm)(Qe),w])])),_:1}),(0,l.Wm)(yo,{padding:"",class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(je,{keys:["F3","C+A","C+ ","Delete","C+R","C+D"],onMyKeyDown:e.pageKey},null,8,["onMyKeyDown"]),(0,l.Wm)(Be,{NivelPrecio:e.nivelPrecio,onSelectProd:e.productoDialog},null,8,["NivelPrecio","onSelectProd"]),(0,l.Wm)(Je,{modelValue:e.prompt,"onUpdate:modelValue":o[8]||(o[8]=o=>e.prompt=o),onHide:o[9]||(o[9]=o=>e.numeroReimp=null)},{default:(0,l.w5)((()=>[(0,l.Wm)(Xe,{style:{"min-width":"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(Ke,null,{default:(0,l.w5)((()=>[(0,l._)("div",C," Reimpresión de "+(0,i.zw)(e.textReimpresion),1)])),_:1}),(0,l.Wm)(Ke,null,{default:(0,l.w5)((()=>[(0,l._)("div",y," Número de "+(0,i.zw)(e.textReimpresion),1)])),_:1}),(0,l.Wm)(Ke,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ye,{dense:"",modelValue:e.numeroReimp,"onUpdate:modelValue":o[6]||(o[6]=o=>e.numeroReimp=o),autofocus:"",onKeyup:o[7]||(o[7]=(0,t.D2)((()=>{e.prompt=!1,e.reimprimirFactDoc()}),["enter"]))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(Ge,{align:"right",class:"text-primary"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)($e,{flat:"",label:"Cancel"},null,512),[[Do]]),(0,l.wy)((0,l.Wm)($e,{flat:"",label:"Reimprimir",onClick:e.reimprimirFactDoc},null,8,["onClick"]),[[Do]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l._)("div",D,[(0,l._)("div",k,[(0,l.Wm)(eo,{onSetPedido:e.setNumeroPedido},null,8,["onSetPedido"])]),(0,l._)("div",_,[(0,l.Wm)(ao,{disable:e.numeroPedido>0,class:"q-ma-xs",modelValue:e.tipoPedido,"onUpdate:modelValue":o[10]||(o[10]=o=>e.tipoPedido=o),push:"",spread:"",rounded:"",color:"white","text-color":"black",options:[{value:1,slot:"ticket",disable:!e.enableTicket},{value:2,slot:"mayorista",disable:!e.enableMayorista}]},{ticket:(0,l.w5)((()=>[(0,l._)("div",x,[(0,l._)("div",T,[(0,l.Uk)(" FACT-Ticket - "+(0,i.zw)(e.clientePOS)+" ",1),N,1===e.tipoPedido?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)(" Nivel: "+(0,i.zw)(e.nivelPrecio)+" - "+(0,i.zw)(e.descripcionNivel),1)],64)):(0,l.kq)("",!0)]),(0,l.Wm)(oo,{right:"",name:"point_of_sale"})])])),mayorista:(0,l.w5)((()=>[(0,l._)("div",q,[(0,l._)("div",E,[(0,l.Uk)(" Mayorista - "+(0,i.zw)(e.codigoCliente),1),W,2===e.tipoPedido?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)(" Nivel: "+(0,i.zw)(e.nivelPrecio)+" - "+(0,i.zw)(e.descripcionNivel),1)],64)):(0,l.kq)("",!0)]),(0,l.Wm)(oo,{right:"",name:"credit_score"})])])),_:1},8,["disable","modelValue","options"]),(0,l._)("div",V,[2===e.tipoPedido?((0,l.wg)(),(0,l.j4)(lo,{key:0,for:"pos-tipo",disable:e.numeroPedido>0,class:"q-ml-md",modelValue:e.opcion,"onUpdate:modelValue":o[11]||(o[11]=o=>e.opcion=o),options:[{label:"Pedido",value:"S"},{label:"Cotización",value:"M"}],color:"primary",inline:""},null,8,["disable","modelValue"])):(0,l.kq)("",!0)]),(0,l.Wm)(co,{ref:"formEncRef"},{default:(0,l.w5)((()=>[2===e.tipoPedido?((0,l.wg)(),(0,l.iD)("div",I,[(0,l.Wm)(io,{id:"pos-buscar-clientes",clienteTicket:e.clientePOS,onSelectCliente:e.clienteDialog,ref:"botonClientes"},null,8,["clienteTicket","onSelectCliente"]),(0,l.Wm)(Ye,{for:"pos-codigo-cliente",disable:e.numeroPedido>0,class:"col-xs-10 col-sm-5 col-md-7",outlined:"",label:"Codigo de cliente",modelValue:e.codigoCliente,"onUpdate:modelValue":o[12]||(o[12]=o=>e.codigoCliente=o),dense:"",type:"number",debounce:"500",ref:"codigoClienteRef",rules:[e=>!!e||"Debe ingresar el código",o=>o!==e.clientePOS.toString()||"El cliente no puede ser el cliente Ticket"],"hide-bottom-space":"",onKeydownCapture:o[13]||(o[13]=o=>e.keyDownCliente(o)),standout:""},null,8,["disable","modelValue","rules"]),(0,l._)("div",L,[(0,l.Wm)(to,{Cliente:e.codigoCliente!==e.clientePOS?e.codigoCliente:null},null,8,["Cliente"])])])):(0,l.kq)("",!0),(0,l._)("div",S,[1===e.tipoPedido?((0,l.wg)(),(0,l.j4)(no,{key:0,id:"pos-buscar-aclientes","cliente-ticket":e.clientePOS,onSelectCliente:e.aclienteDialog},null,8,["cliente-ticket","onSelectCliente"])):(0,l.kq)("",!0),e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",H,[1===e.tipoPedido?((0,l.wg)(),(0,l.j4)($e,{key:0,color:"primary",label:"CF",onClick:o[14]||(o[14]=o=>e.nuevoCF()),outline:""})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l.Wm)(lo,{modelValue:e.tipo_especial,"onUpdate:modelValue":o[15]||(o[15]=o=>e.tipo_especial=o),color:"secondary",inline:"",class:"q-mr-sm",options:[{label:"NIT",value:"NIT"},{label:"DPI",value:"DPI"}]},null,8,["modelValue"]),(0,l._)("div",{class:(0,i.C_)([2===e.tipoPedido?"col col-xs-12":"col-xs-12","row"])},[(0,l.Wm)(Ye,{autofocus:"",for:"pos-nit",disable:e.numeroPedido>0||2===e.tipoPedido,class:"col-xs-7 col-sm-8 col-md-9",outlined:"",label:"NIT/DPI",ref:"NITRef",modelValue:e.NIT,"onUpdate:modelValue":o[17]||(o[17]=o=>e.NIT=o),loading:e.loadingNit,dense:"",debounce:"500",onKeydownCapture:o[18]||(o[18]=o=>e.setCF(o)),onKeypress:(0,t.D2)(e.consultarNit,["enter"]),rules:[e=>!!e||"Debe ingresar el Nit del cliente"],"hide-bottom-space":""},(0,l.Nv)({append:(0,l.w5)((()=>[])),_:2},[e.NIT&&0===e.numeroPedido&&1===e.tipoPedido?{name:"prepend",fn:(0,l.w5)((()=>[(0,l.Wm)(oo,{name:"cancel",onClick:o[16]||(o[16]=(0,t.iM)((o=>e.NIT=null),["stop"])),class:"cursor-pointer"})]))}:void 0]),1032,["disable","modelValue","loading","onKeypress","rules"]),(0,l.Wm)(ro,{id:"pos-validaNit",class:"text-subtitle2",modelValue:e.validarNit,"onUpdate:modelValue":o[19]||(o[19]=o=>e.validarNit=o),label:"Validar NIT","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"])],2),2===e.tipoPedido?((0,l.wg)(),(0,l.iD)("div",F,[e.tieneRuteros?((0,l.wg)(),(0,l.j4)(ro,{key:0,disable:e.numeroPedido>0,"left-label":"",modelValue:e.pedidoRuteros,"onUpdate:modelValue":o[20]||(o[20]=o=>e.pedidoRuteros=o),label:"Pedido Ruta"},null,8,["disable","modelValue"])):(0,l.kq)("",!0),e.pedidoRuteros?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(lo,{key:1,style:{display:"inline-block"},disable:e.numeroPedido>0,modelValue:e.creditoContado,"onUpdate:modelValue":o[21]||(o[21]=o=>e.creditoContado=o),inline:"",options:[{label:"Contado",value:!1,checkedIcon:"task_alt",uncheckedIcon:"panorama_fish_eye"},{label:"Credito",value:!0,checkedIcon:"task_alt",uncheckedIcon:"panorama_fish_eye"}],color:"primary"},null,8,["disable","modelValue"])),(0,l._)("div",U,[(0,l._)("div",R,[(0,l.Wm)(t.uT,{appear:"","enter-active-class":"animated heartBeat"},{default:(0,l.w5)((()=>[e.errorCreditoContado?((0,l.wg)(),(0,l.iD)("div",O," Debe seleccionar la condición de crédito ")):(0,l.kq)("",!0)])),_:1})])])])):(0,l.kq)("",!0)]),(0,l.Wm)(Ye,{for:"pos-nombre",readonly:e.numeroPedido>0||2===e.tipoPedido,class:"q-ma-sm",outlined:"",label:"Nombre del cliente",modelValue:e.nombreCliente,"onUpdate:modelValue":o[22]||(o[22]=o=>e.nombreCliente=o),dense:"",rules:[e=>"Nit no valido"!==e||"Debe ingresar un Nit valido",e=>!!e||"Debe ingresar el nombre a facturar",e=>e.length<=60||"El nombre no puede ser mayor a 60 caracteres"],"hide-bottom-space":""},null,8,["readonly","modelValue","rules"]),(0,l.Wm)(Ye,{for:"pos-direccion",readonly:e.numeroPedido>0||2===e.tipoPedido,class:"q-ma-sm",outlined:"",label:"Dirección del cliente",modelValue:e.direccionCliente,"onUpdate:modelValue":o[23]||(o[23]=o=>e.direccionCliente=o),dense:"",rules:[e=>!!e||"Debe ingresar la dirección a facturar",e=>e.length<=60||"La dirección no puede ser mayor a 60 caracteres"],"hide-bottom-space":""},null,8,["readonly","modelValue","rules"]),(0,l.Wm)(Ye,{modelValue:e.observacion,"onUpdate:modelValue":o[24]||(o[24]=o=>e.observacion=o),class:"q-ma-sm",type:"text",label:"Observaciones",outlined:"",dense:"",rules:[e=>e.length<=70||"La observación no puede ser mayor a 70 caracteres"],"hide-bottom-space":""},(0,l.Nv)({_:2},[e.numeroPedido>0?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)($e,{round:"",dense:"",flat:"",icon:"save","text-color":"green",onClick:e.guardarObservacion},null,8,["onClick"])]))}:void 0]),1032,["modelValue","rules"]),(0,l.Wm)(Ye,{for:"pos-correo",readonly:e.numeroPedido>0||2===e.tipoPedido,class:"q-ma-sm",outlined:"",label:"Correo electrónico",modelValue:e.correoCliente,"onUpdate:modelValue":o[25]||(o[25]=o=>e.correoCliente=o),dense:"",rules:[o=>e.validateEmail(o)||"Debe ingresar un email con el formato correcto"],"hide-bottom-space":""},null,8,["readonly","modelValue","rules"]),1===e.tipoPedido?((0,l.wg)(),(0,l.j4)(Ye,{key:1,for:"pos-telefono",readonly:e.numeroPedido>0,class:"q-ma-sm",outlined:"",label:"Teléfono",modelValue:e.telefonoCliente,"onUpdate:modelValue":o[26]||(o[26]=o=>e.telefonoCliente=o),dense:"","hide-bottom-space":""},null,8,["readonly","modelValue"])):(0,l.kq)("",!0)])),_:1},512)]),(0,l._)("div",Z,[(0,l.Wm)(Xe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Ke,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(uo,{id:"pos-contingencia",label:"Contingencia",modelValue:e.contingencia,"onUpdate:modelValue":o[27]||(o[27]=o=>e.contingencia=o),"checked-icon":"check",color:"green","unchecked-icon":"clear",size:"lg"},null,8,["modelValue"]),(0,l.Wm)(so,{id:"pos-despachar",onCargarPedido:e.despachado},null,8,["onCargarPedido"])])),_:1}),(0,l.Wm)(Ke,{id:"pos-pedido"},{default:(0,l.w5)((()=>[(0,l._)("div",z,[(0,l._)("div",A,[Q,(0,l._)("div",M,(0,i.zw)(e.numeroPedido),1)]),j])])),_:1}),(0,l.Wm)(Oe,{color:"blue"}),(0,l.Wm)(Ke,{id:"pos-subtotal"},{default:(0,l.w5)((()=>[B,(0,l._)("div",K,"Q."+(0,i.zw)(e.subTotal),1)])),_:1}),0===e.numeroPedido?((0,l.wg)(),(0,l.j4)($e,{key:0,id:"pos-crear-pedido",disable:e.loadingNit||null===e.serie,class:"q-ma-sm",label:"Crear Pedido (F3)",color:"primary",onClick:e.crearPedido},null,8,["disable","onClick"])):(0,l.kq)("",!0),e.numeroPedido>0&&"S"===e.opcion?((0,l.wg)(),(0,l.j4)(po,{key:1,disable:e.loadProducto||e.loadAgregando||e.agregandoListaProductos,numeroPedido:e.numeroPedido,serie:e.serie,contingencia:e.contingencia,Credito:e.creditoContado,Total:e.subTotal,tipoPedido:e.tipoPedido,onFacturado:o[28]||(o[28]=o=>e.numeroPedido=0),onCuponAplicado:e.onCuponAplicado},null,8,["disable","numeroPedido","serie","contingencia","Credito","Total","tipoPedido","onCuponAplicado"])):(0,l.kq)("",!0),e.numeroPedido>0&&"M"===e.opcion?((0,l.wg)(),(0,l.j4)(vo,{key:2,disable:e.loadingNit,numeroPedido:e.numeroPedido,ref:"transformarRef",onTransformado:e.transformado},null,8,["disable","numeroPedido","onTransformado"])):(0,l.kq)("",!0)])),_:1})])]),(0,l._)("div",Y,[(0,l.Wm)(Xe,{class:(0,i.C_)("scroll col "+(e.inFullscreen?"fullscreen":""))},{default:(0,l.w5)((()=>[(0,l._)("div",$,[(0,l.Wm)(Me,{class:"col-12 bg-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(mo,{initProducto:e.maestroProducto,initLote:e.lote},null,8,["initProducto","initLote"]),(0,l.Wm)(go),e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",G,[e.$q.platform.is.nativeMobile?((0,l.wg)(),(0,l.iD)("div",X,[e.$q.platform.is.android?((0,l.wg)(),(0,l.j4)($e,{key:0,class:"full-width",color:"primary",icon:"qr_code_scanner",onClick:e.scanBarraCordova},null,8,["onClick"])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.j4)(bo,{key:1,onBarra:e.scanBarra},null,8,["onBarra"]))])):(0,l.kq)("",!0),e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)(Qe,{key:1})):(0,l.kq)("",!0),e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",J,[(0,l.Wm)($e,{color:"primary",label:"UM",onClick:o[30]||(o[30]=o=>e.showUMTool=!e.showUMTool)},{default:(0,l.w5)((()=>[(0,l.Wm)(Ae,{modelValue:e.showUMTool,"onUpdate:modelValue":o[29]||(o[29]=o=>e.showUMTool=o),anchor:"top middle",self:"bottom middle"},{default:(0,l.w5)((()=>[(0,l.Wm)(Po,{dense:"",flat:"",bordered:"",separator:"cell"},{default:(0,l.w5)((()=>[ee,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.ums,(o=>((0,l.wg)(),(0,l.iD)("tr",{key:o.Codigo,onDblclick:a=>e.cantidadPedir=o.Factor,class:"cursor-pointer q-hoverable",style:{"user-select":"none"}},[(0,l._)("td",ae,(0,i.zw)(o.Codigo),1),(0,l._)("td",le,(0,i.zw)(o.Descripcion),1),(0,l._)("td",ie,(0,i.zw)(o.Factor),1)],40,oe)))),128))])])),_:1})])),_:1},8,["modelValue"])])),_:1})])):(0,l.kq)("",!0),(0,l.Wm)(Qe),(0,l.Wm)($e,{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:o[31]||(o[31]=o=>e.inFullscreen=!e.inFullscreen),class:"q-ml-md",size:"lg"},null,8,["icon"])])),_:1})]),e.inFullscreen?((0,l.wg)(),(0,l.iD)("div",te,[(0,l._)("div",ne,[(0,l._)("div",de,"Pedido: "+(0,i.zw)(e.numeroPedido),1)]),(0,l._)("div",re,[(0,l._)("div",ce,"Subtotal: Q."+(0,i.zw)(e.subTotal),1)]),(0,l._)("div",ue,[(0,l.Wm)(uo,{dense:"",id:"pos-contingencia",modelValue:e.contingencia,"onUpdate:modelValue":o[32]||(o[32]=o=>e.contingencia=o),"checked-icon":"check",color:"green","unchecked-icon":"clear",size:"lg"},null,8,["modelValue"]),se])])):(0,l.kq)("",!0),(0,l.Wm)(Ke,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",pe,[(0,l._)("div",ve,[(0,l.Wm)(co,{ref:"formDetRef"},{default:(0,l.w5)((()=>[e.enableEliminar?((0,l.wg)(),(0,l.iD)("div",me," Eliminando Producto "+(0,i.zw)(e.producto),1)):(0,l.kq)("",!0),(0,l._)("div",ge,[(0,l._)("div",be,[(0,l.Wm)(Ye,{for:"pos-producto",disable:e.loadAgregando,"input-class":"text-uppercase",label:"Producto",dense:"",modelValue:e.producto,"onUpdate:modelValue":o[36]||(o[36]=o=>e.producto=o),class:"q-pr-md",color:"black",debounce:e.debounceProducto,onKeypress:o[37]||(o[37]=o=>e.keyPressProducto(o)),onKeydownCapture:o[38]||(o[38]=o=>e.keyDownProducto(o)),ref:"productoRef","hide-bottom-space":"",loading:e.loadProducto||e.loadAgregando,rules:[e=>!!e||"Debe ingresar un producto"],clearable:""},{append:(0,l.w5)((()=>[(0,l.Wm)(ro,{id:"pos-check-cantidad",modelValue:e.enableCantidad,"onUpdate:modelValue":o[33]||(o[33]=o=>e.enableCantidad=o),"checked-icon":"shopping_cart_checkout","unchecked-icon":"remove_shopping_cart","keep-color":""},null,8,["modelValue"])])),prepend:(0,l.w5)((()=>[(0,l.Wm)(fo,{id:"pos-buscar-producto",producto:e.maestroProducto,nivel:null!==e.nivelPrecio?e.nivelPrecio:0,onSelectProd:e.productoDialog,onAgregarLote:e.agregarProductoLote,ref:"botonProd"},null,8,["producto","nivel","onSelectProd","onAgregarLote"])])),before:(0,l.w5)((()=>[e.$q.platform.is.nativeMobile?((0,l.wg)(),(0,l.j4)(ro,{key:0,id:"pos-eliminar-prod",class:"q-pa-sm",modelValue:e.enableConsulta,"onUpdate:modelValue":o[34]||(o[34]=o=>e.enableConsulta=o),size:"lg","checked-icon":"manage_search","unchecked-icon":"search_off","keep-color":"",dense:""},null,8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(ro,{id:"pos-eliminar-prod",class:"q-ma-none q-pa-none",modelValue:e.enableEliminar,"onUpdate:modelValue":o[35]||(o[35]=o=>e.enableEliminar=o),size:!1===e.enableEliminar?"md":"xl",color:!1===e.enableEliminar?"black":"red","checked-icon":"delete_forever","unchecked-icon":"delete","keep-color":"",dense:""},null,8,["modelValue","size","color"])])),_:1},8,["disable","modelValue","debounce","loading","rules"])]),(0,l._)("div",Pe,[(0,l.Wm)(Ye,{for:"pos-cantidad",label:"Cantidad",dense:"",type:"number",modelValue:e.cantidadPedir,"onUpdate:modelValue":o[39]||(o[39]=o=>e.cantidadPedir=o),disable:!e.enableCantidad,onKeydownCapture:o[40]||(o[40]=o=>e.keyDownProductoCant(o)),ref:"cantRef",rules:[e=>!!e||"Debe ingresar la cantidad",e=>parseInt(e)>=1||"La cantidad no puede ser menor o igual a cero"],"hide-bottom-space":""},null,8,["modelValue","disable","rules"])]),""!==e.descripcionProd?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,i.C_)(["col col-7 text-subtitle2 q-pa-xs","Producto no encotrado"===e.descripcionProd?"bg-red":""])},[(0,l.Uk)((0,i.zw)(e.maestroProducto)+" - "+(0,i.zw)(e.descripcionProd)+" ",1),fe,(0,l.Uk)(" Lote: "+(0,i.zw)(e.lote)+" - "+(0,i.zw)(e.descripcionLote),1)],2)):(0,l.kq)("",!0),""!==e.descripcionProd?((0,l.wg)(),(0,l.iD)("div",he,[(0,l.Uk)(" Precio: Q."+(0,i.zw)(e.precioProducto.toFixed(2)),1),we,Ce,(0,l._)("div",ye,"Q."+(0,i.zw)((e.precioProducto*e.cantidadPedir).toFixed(2)),1)])):(0,l.kq)("",!0)])])),_:1},512)]),(0,l._)("div",De,[(0,l.Wm)(Po,{dense:"",flat:"",bordered:"",separator:"cell"},{default:(0,l.w5)((()=>[ke,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.preciosProd,((o,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:o.Inicial},[(0,l._)("td",_e,(0,i.zw)(o.Inicial),1),(0,l._)("td",xe,(0,i.zw)(o.Final),1),(0,l._)("td",Te,(0,i.zw)(o.Precio),1),0===a?((0,l.wg)(),(0,l.iD)("td",{key:0,class:"text-center",rowspan:e.preciosProd.length},(0,i.zw)(o.Disponible),9,Ne)):(0,l.kq)("",!0),0===a?((0,l.wg)(),(0,l.iD)("td",{key:1,class:"text-center",rowspan:e.preciosProd.length},(0,i.zw)(o.Reservado),9,qe)):(0,l.kq)("",!0)])))),128))])])),_:1})]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Ee,[(0,l.Wm)(Po,{dense:"",flat:"",bordered:"",separator:"cell"},{default:(0,l.w5)((()=>[We,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.ums,(o=>((0,l.wg)(),(0,l.iD)("tr",{key:o.Codigo,onDblclick:a=>e.cantidadPedir=o.Factor,class:"cursor-pointer q-hoverable",style:{"user-select":"none"}},[(0,l._)("td",Ie,(0,i.zw)(o.Codigo),1),(0,l._)("td",Le,(0,i.zw)(o.Descripcion),1),(0,l._)("td",Se,(0,i.zw)(o.Factor),1)],40,Ve)))),128))])])),_:1})]))])])),_:1}),(0,l.Wm)(Oe,{color:"blue"}),(0,l.Wm)(Ke,{class:"scroll",style:(0,i.j5)(e.getSuperMode()?"height: 700px":"450px")},{default:(0,l.w5)((()=>[(0,l.Wm)(Co,{title:"Productos agregados: "+e.rowsAgregados.length,dense:"",id:"pos-detalles",columns:e.columnsAgregados,rows:e.rowsAgregados,"row-key":"producto",filter:e.filterAgregados,pagination:{rowsPerPage:0},onRowDblclick:e.selectRow,loading:e.loadAgregando,style:{height:"400px"}},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(Ye,{for:"pos-buscar-detalles",borderless:"",dense:"",modelValue:e.filterAgregados,"onUpdate:modelValue":o[41]||(o[41]=o=>e.filterAgregados=o),placeholder:"Buscar detalles",clearable:""},{append:(0,l.w5)((()=>[(0,l.Wm)(oo,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-Cantidad":(0,l.w5)((o=>[(0,l.Wm)(wo,{props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(o.value)+" ",1),(0,l.Wm)(ho,{modelValue:o.value,"onUpdate:modelValue":e=>o.value=e},{default:(0,l.w5)((a=>[(0,l.Wm)(Ye,{type:"number",modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,dense:"",autofocus:"",onKeydown:[(0,t.D2)((0,t.iM)(a.cancel,["prevent"]),["enter"]),(0,t.D2)((l=>e.cambiarCantidad(a.value,o.row.Producto,o.row.Lote,a.initialValue)),["enter"])]},{after:(0,l.w5)((()=>[(0,l.Wm)($e,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:[(0,t.iM)(a.cancel,["stop"]),l=>e.cambiarCantidad(a.value,o.row.Producto,o.row.Lote,a.initialValue)],disable:!1===a.validate(a.value)||a.initialValue===a.value},null,8,["onClick","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","onKeydown"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),"body-cell-Precio":(0,l.w5)((o=>[(0,l.Wm)(wo,{props:o},{default:(0,l.w5)((()=>[(0,l.Uk)(" Q."+(0,i.zw)(o.value)+" ",1),e.permiteCambioPrecio?((0,l.wg)(),(0,l.j4)(ho,{key:0,modelValue:o.value,"onUpdate:modelValue":e=>o.value=e},{default:(0,l.w5)((a=>[(0,l.Wm)(Ye,{type:"number",modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,dense:"",autofocus:"",onKeydown:[(0,t.D2)((0,t.iM)(a.cancel,["prevent"]),["enter"]),(0,t.D2)((l=>e.cambiarPrecio(a.value,o.row.Producto,a.initialValue)),["enter"])]},{after:(0,l.w5)((()=>[(0,l.Wm)($e,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:[(0,t.iM)(a.cancel,["stop"]),l=>e.cambiarPrecio(a.value,o.row.Producto,a.initialValue)],disable:!1===a.validate(a.value)||a.initialValue===a.value},null,8,["onClick","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","onKeydown"])])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,l.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-Eliminar":(0,l.w5)((o=>[(0,l.Wm)(wo,{props:o,style:{padding:"0px",width:"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{outline:"",color:"red",icon:"delete_forever",class:"",onClick:a=>e.eliminarTodoProducto(o.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["title","columns","rows","filter","onRowDblclick","loading"]),e.getSuperMode()?((0,l.wg)(),(0,l.j4)(Co,{key:0,title:"Productos no agregados",dense:"",rows:e.productosErrorSuper,columns:[{name:"Producto",label:"Producto",field:"Producto",align:"center"},{name:"Descripcion",label:"Descripcion",field:"Descripcion",align:"center"},{name:"Lote",label:"Lote",field:"Lote",align:"center"}],pagination:{rowsPerPage:0},style:{height:"250px"}},null,8,["rows"])):(0,l.kq)("",!0)])),_:1},8,["style"])])),_:1},8,["class"])])])),_:1})],64)}var Fe=a(57674),Ue=a(38346),Re=a(34136),Oe=a(67825),Ze=a(60499),ze=a(68651),Ae=a(19302),Qe=a(18910),Me=a(78618),je=a(4608),Be=a(28886),Ke=a(75256),Ye=a(30336),$e=a(61549);const Ge={class:"text-subtitle2 q-pa-sm"},Xe={class:"text-h6 bg-green q-mr-lg q-pa-sm"},Je=(0,l._)("span",{class:"q-ml-sm"},"Productos con lotes no despachados",-1);function eo(e,o,a,n,d,r){const c=(0,l.up)("q-btn"),u=(0,l.up)("q-space"),s=(0,l.up)("q-card-section"),p=(0,l.up)("q-inner-loading"),v=(0,l.up)("q-table"),m=(0,l.up)("q-card-actions"),g=(0,l.up)("q-separator"),b=(0,l.up)("q-card"),P=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(c,{class:"q-ma-sm",label:"Imprimir Cotización",color:"primary",disable:e.disable,onClick:e.imprimirCotizacion},null,8,["disable","onClick"]),(0,l.Wm)(c,{class:"q-ma-sm",label:"Transformar en pedido ",color:"green",disable:e.disable,onClick:e.transformarPedido},null,8,["disable","onClick"]),(0,l.Wm)(P,{modelValue:e.dialog,"onUpdate:modelValue":o[5]||(o[5]=o=>e.dialog=o),persistent:"",maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(s,{class:"row no-padding"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",Ge,"Productos con lote único no despachados",512),[[t.F8,!1]]),(0,l.Wm)(u),(0,l._)("div",Xe,(0,i.zw)(e.selected),1)])),_:1}),(0,l.kq)("",!0),(0,l.kq)("",!0)]),(0,l.Wm)(g,{spaced:""}),(0,l.Wm)(s,{class:"row items-center"},{default:(0,l.w5)((()=>[Je])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"q-grid-tranformados",rows:e.rows2,columns:e.columns2,"row-key":"Producto",onRowClick:e.getSelected2},{loading:(0,l.w5)((()=>[(0,l.Wm)(p,{showing:"",color:"primary"})])),_:1},8,["rows","columns","onRowClick"])])),_:1}),(0,l.Wm)(m,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{outline:"",label:"Despachar disponible",color:"green",icon:"check_circle",onClick:o[2]||(o[2]=o=>e.despacharDisponible("4"))}),(0,l.Wm)(c,{outline:"",label:"Eliminar Producto",color:"red",icon:"cancel",onClick:o[3]||(o[3]=o=>e.eliminarProducto("4"))})])),_:1}),(0,l.Wm)(g,{spaced:""}),(0,l.Wm)(m,{align:"center",class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{color:"primary",icon:"check",label:"Finalizar Proceso",onClick:o[4]||(o[4]=o=>e.finalizar(!0))})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var oo=a(17779),ao=function(e,o,a,l){function i(e){return e instanceof a?e:new a((function(o){o(e)}))}return new(a||(a=Promise))((function(a,t){function n(e){try{r(l.next(e))}catch(o){t(o)}}function d(e){try{r(l["throw"](e))}catch(o){t(o)}}function r(e){e.done?a(e.value):i(e.value).then(n,d)}r((l=l.apply(e,o||[])).next())}))};const lo=[{name:"Pedido",label:"Pedido",field:"Pedido",align:"center",sortable:!0},{name:"Producto",label:"Producto",field:"Producto",align:"center",sortable:!0},{name:"Descripcion",label:"Descripcion",field:"Descripcion",align:"center",sortable:!0},{name:"Solicitado",label:"Solicitado",field:"Solicitado",align:"center",sortable:!0},{name:"Disponible",label:"Disponible",field:"Disponible",align:"center",sortable:!0},{name:"Lote",label:"Lote",field:"Lote",align:"center",sortable:!0}],io=[{name:"Pedido",label:"Pedido",field:"Pedido",align:"center",sortable:!0},{name:"Producto",label:"Producto",field:"Producto",align:"center",sortable:!0},{name:"Solicitado",label:"Solicitado",field:"Solicitado",align:"center",sortable:!0},{name:"Disponible",label:"Disponible",field:"Disponible",align:"center",sortable:!0},{name:"Lote",label:"Lote",field:"Lote",align:"center",sortable:!0}],to=(0,l.aZ)({name:"TransformarDialog",props:{numeroPedido:(0,Me.w3)(null),disable:{type:Boolean,default:!1}},emits:["transformado"],setup(e,{emit:o}){const a=(0,Ze.iH)(!1),i=(0,Ze.iH)([]),t=(0,Ze.iH)([]),n=(0,Ze.iH)(""),d=(0,Ze.iH)(e.numeroPedido),r=(0,Ze.iH)(""),c=(0,Ze.iH)(""),u=(0,Ze.iH)(0);(0,l.YP)(e,(()=>{d.value=e.numeroPedido}));const s=()=>{var e;let o=screen.width,a=screen.height;screen.width,screen.height;let l="#/Reportes/COTIZACIONEX/"+(null===(e=d.value)||void 0===e?void 0:e.toString());oo.log(l);try{var i=window.open(l,"Cotizacion","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+o+", height="+a+", top=0, left=0");const e=setInterval((()=>{(null===i||void 0===i?void 0:i.closed)&&clearInterval(e)}),500)}catch(t){oo.log(t)}},p=()=>{Re.api.put(Re.endPoints.PEDIDOENC,e.numeroPedido).then((e=>{(0,ze.dF)("Transformado correctamente"),"SI"===e.data.Ver?(m(),a.value=!0):h(!1)})).catch((e=>{(0,ze.L1)(e)}))},v=()=>{oo.log("show"),a.value=!0,m()},m=()=>ao(this,void 0,void 0,(function*(){var e;yield Re.api.get(Re.endPoints.PEDIDOENC+"Transformar/"+(null===(e=d.value)||void 0===e?void 0:e.toString())).then((e=>{i.value=e.data.Transformar3,t.value=e.data.Transformar4})).catch((e=>{(0,ze.L1)(e)}))}));m();const g=(e,o,a)=>{r.value=o.Producto.trim(),c.value=o.Lote.trim(),u.value=o.Solicitado,n.value="Producto: "+r.value+"| Descripción"+o.Descripcion},b=(e,o,a)=>{r.value=o.Producto.trim(),c.value=o.Lote,u.value=o.Solicitado,n.value="Producto: "+r.value+"| Lote: "+c.value},P=e=>ao(this,void 0,void 0,(function*(){let o;if(yield(0,ze.UA)("Cantidad","Ingrese la cantidad a despachar","number").then((e=>{o=e})),o){let a={Pedido:d.value,Producto:r.value,Lote:c.value,Cantidad:o,Tipo:e.toString()};Re.api.put(Re.endPoints.PEDIDODET+"DespacharT",a).then((e=>{(0,ze.dF)("Despachado correctamente"),m()})).catch((e=>{(0,ze.L1)(e)}))}})),f=e=>{let o={Pedido:d.value,Producto:r.value,Lote:c.value,Cantidad:u.value,Tipo:e.toString()};Re.api.delete(Re.endPoints.PEDIDODET+"EliminarT",(0,Re.configApi)({datos:o})).then((e=>{(0,ze.dF)("Eliminado correctamente"),m()})).catch((e=>{(0,ze.L1)(e)}))},h=e=>ao(this,void 0,void 0,(function*(){yield m(),i.value.length>0||t.value.length>0?(0,ze.x2)("Faltan productos por despachar, no puede salir de esta ventana"):Re.api.post(Re.endPoints.PEDIDOENC+"Finalizar",d.value).then((o=>{e?w():a.value=!1})).catch((e=>{(0,ze.L1)(e)}))})),w=()=>{var e;let l=1,i=1;screen.width,screen.height;let t="#/Reportes/FALTANTES/"+(null===(e=d.value)||void 0===e?void 0:e.toString());oo.log(t);try{var n=window.open(t,"Faltantes","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+l+", height="+i+", top=0, left=0");const e=setInterval((()=>{(null===n||void 0===n?void 0:n.closed)&&(clearInterval(e),o("transformado",d.value),a.value=!1)}),500)}catch(r){oo.log(r)}};return{show:v,imprimirCotizacion:s,transformarPedido:p,getTransformados:m,getSelected2:b,getSelected:g,despacharDisponible:P,eliminarProducto:f,finalizar:h,dialog:a,columns:lo,columns2:io,rows:i,rows2:t,selected:n}}});var no=a(11639),ro=a(68879),co=a(32074),uo=a(44458),so=a(63190),po=a(90136),vo=a(84277),mo=a(60854),go=a(11821),bo=a(50926),Po=a(69984),fo=a.n(Po);const ho=(0,no.Z)(to,[["render",eo]]),wo=ho;fo()(to,"components",{QBtn:ro.Z,QDialog:co.Z,QCard:uo.Z,QCardSection:so.Z,QSpace:po.Z,QTable:vo.Z,QInnerLoading:mo.Z,QCardActions:go.Z,QSeparator:bo.Z});var Co=a(8118);const yo=(0,l.Uk)("Cerrar"),Do={class:"col col-2"},ko={class:"col col-5 q-ma-sm"},_o={class:"text-subtitle1"},xo={class:"text-subtitle1"},To={class:"text-subtitle1"},No={class:"col col-2"},qo={class:"col col-2"},Eo=(0,l._)("div",{class:"text-subtitle1"},"No. Pedido",-1),Wo={class:"text-h6 text-center bg-grey"};function Vo(e,o,a,t,n,d){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-space"),u=(0,l.up)("q-tooltip"),s=(0,l.up)("q-bar"),p=(0,l.up)("q-input"),v=(0,l.up)("q-checkbox"),m=(0,l.up)("q-card-section"),g=(0,l.up)("q-inner-loading"),b=(0,l.up)("q-table"),P=(0,l.up)("q-separator"),f=(0,l.up)("q-card"),h=(0,l.up)("q-dialog"),w=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(r,{id:"depachar-btn",class:"q-ma-sm",label:"Despachar ",color:"green",onClick:e.show},null,8,["onClick"]),(0,l.Wm)(h,{modelValue:e.dialog,"onUpdate:modelValue":o[2]||(o[2]=o=>e.dialog=o),persistent:"",maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c),(0,l.wy)(((0,l.wg)(),(0,l.j4)(r,{dense:"",flat:"",icon:"close",onClick:e.cerrar},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[yo])),_:1})])),_:1},8,["onClick"])),[[w]])])),_:1}),(0,l.Wm)(m,{class:"row"},{default:(0,l.w5)((()=>[(0,l._)("div",Do,[(0,l.Wm)(p,{modelValue:e.cotizacion,"onUpdate:modelValue":o[0]||(o[0]=o=>e.cotizacion=o),type:"text",label:"Numero Cotización",class:"q-mb-sm",disable:e.disableInput},null,8,["modelValue","disable"]),(0,l.Wm)(r,{color:"primary",label:"Cargar",onClick:e.cargar},null,8,["onClick"]),(0,l.Wm)(r,{color:"primary",label:"Nuevo",onClick:e.nuevo},null,8,["onClick"])]),(0,l._)("div",ko,[(0,l._)("div",_o,"Nombre: "+(0,i.zw)(e.nombre),1),(0,l._)("div",xo,"Nit: "+(0,i.zw)(e.nit),1),(0,l._)("div",To,"Dirección: "+(0,i.zw)(e.direccion),1)]),(0,l._)("div",No,[(0,l.Wm)(r,{color:"primary",icon:"print",label:"Imprimir",onClick:e.imprimir},null,8,["onClick"]),(0,l.Wm)(r,{color:"primary",icon:"add",label:"Crear pedido",onClick:e.crearPedido},null,8,["onClick"])]),(0,l._)("div",qo,[(0,l.Wm)(v,{modelValue:e.todos,"onUpdate:modelValue":o[1]||(o[1]=o=>e.todos=o),label:"Todos"},null,8,["modelValue"]),Eo,(0,l._)("div",Wo,(0,i.zw)(e.numeroPedido),1)])])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"q-grid-despachar",rows:e.rows,columns:e.columns,"row-key":"Producto",onRowDblclick:e.getSelected,pagination:{rowsPerPage:0}},{loading:(0,l.w5)((()=>[(0,l.Wm)(g,{showing:"",color:"primary"})])),_:1},8,["rows","columns","onRowDblclick"])])),_:1}),(0,l.Wm)(P,{spaced:""}),(0,l.Wm)(P,{spaced:""})])),_:1})])),_:1},8,["modelValue"])],64)}var Io=a(17779),Lo=function(e,o,a,l){function i(e){return e instanceof a?e:new a((function(o){o(e)}))}return new(a||(a=Promise))((function(a,t){function n(e){try{r(l.next(e))}catch(o){t(o)}}function d(e){try{r(l["throw"](e))}catch(o){t(o)}}function r(e){e.done?a(e.value):i(e.value).then(n,d)}r((l=l.apply(e,o||[])).next())}))};const So=[{name:"Producto",label:"Producto",field:"Producto",align:"center",sortable:!0},{name:"Descripcion",label:"Descripcion",field:"Descripcion",align:"center",sortable:!0},{name:"Lote",label:"Lote",field:"Lote",align:"center",sortable:!0},{name:"DescripcionLote",label:"Descripción Lote",field:"DescripcionLote",align:"center",sortable:!0},{name:"Solicitado",label:"Solicitado",field:"Solicitado",align:"center",sortable:!0},{name:"Procesado",label:"Procesado",field:"Procesado",align:"center",sortable:!0},{name:"Restante",label:"Restante",field:"Restante",align:"center",sortable:!0},{name:"Disponible",label:"Disponible",field:"Disponible",align:"center",sortable:!0},{name:"Precio",label:"Precio",field:"Precio",align:"center",sortable:!0}],Ho=(0,l.aZ)({name:"DespacharPendientes",emits:["cargarPedido"],inheritAttrs:!1,setup(e,{emit:o}){const a=(0,Ze.iH)(!1),l=(0,Ze.iH)([]),i=(0,Ze.iH)(null),t=(0,Ze.iH)(!1),n=(0,Ze.iH)(0),d=(0,Ze.iH)(!1),r=(0,Ze.iH)(""),c=(0,Ze.iH)(""),u=(0,Ze.iH)(0),s=(0,Ze.iH)(""),p=(0,Ze.iH)(""),v=(0,Ze.iH)(""),m=(0,Ze.iH)(""),g=(0,Ze.iH)(!0),b=(0,Ze.iH)(0),P=(0,Ze.iH)(!1),f=()=>{Re.api.get(Re.endPoints.PEDIDOENC+"All/"+i.value).then((e=>{Io.log(e.data),m.value=e.data.Pedido.Cliente,s.value=e.data.Pedido.Nombre,p.value=e.data.Pedido.Nit,v.value=e.data.Pedido.Direccion,b.value=e.data.Pedido.Nivel,t.value=!0,h()})).catch((e=>{(0,ze.L1)(e)}))},h=()=>{Re.api.get(Re.endPoints.PEDIDODET+"EliminadosCotizacion/"+i.value).then((e=>{l.value=e.data.Faltantes})).catch((e=>{(0,ze.L1)(e)}))},w=()=>{i.value=null,s.value="",p.value="",v.value="",l.value=[],t.value=!1},C=()=>{var e;let o=1,a=1;screen.width,screen.height;let l="";l=d.value?"#/Reportes/PENDIENTES/0":"#/Reportes/PENDIENTES/"+(null===(e=i.value)||void 0===e?void 0:e.toString()),Io.log(l);try{var t=window.open(l,"Faltantes","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+o+", height="+a+", top=0, left=0");const e=setInterval((()=>{(null===t||void 0===t?void 0:t.closed)&&clearInterval(e)}),500)}catch(n){Io.log(n)}},y=()=>Lo(this,void 0,void 0,(function*(){const e={Nombre:s.value,Nit:p.value,Direccion:v.value,Cliente:m.value,Vendedor:(0,Oe.Xw)(),Credito:g.value,Nivel:b.value,Despacho:"S"};yield Re.api.post(Re.endPoints.PEDIDOENC,e).then((e=>{n.value=e.data,(0,ze.dF)("Pedido "+n.value.toString()+" creado")})).catch((e=>{(0,ze.L1)(e,{timeout:0,position:"top"})})),n.value=n.value})),D=()=>Lo(this,void 0,void 0,(function*(){if(0===n.value)return void(0,ze.x2)("Debe crear un pedido primero");const e=yield(0,ze.UA)("Cantidad","Ingrese la cantidad a pedir","number");if(null!==e){const o={Pedido:i.value,Producto:r.value,Cantidad:e,Precio:u.value,Lote:c.value,PedidoNuevo:n.value};yield Re.api.post(Re.endPoints.LOTES3,o).then((e=>{(0,ze.dF)("Producto "+r.value+" agregado correctamente"),r.value=""})).catch((e=>{P.value=!1,(0,ze.L1)(e,{timeout:0,position:"top"})})).finally((()=>{P.value=!1,h()})),P.value=!1}})),k=()=>{a.value=!0},_=(e,o,a)=>{r.value=o.Producto.trim(),c.value=o.Lote.toString().trim(),u.value=o.Precio,D()},x=()=>{o("cargarPedido",n.value),w()};return{show:k,getSelected:_,cargar:f,nuevo:w,imprimir:C,crearPedido:y,cerrar:x,dialog:a,columns:So,rows:l,cotizacion:i,disableInput:t,numeroPedido:n,todos:d,nombre:s,nit:p,direccion:v}}});var Fo=a(64526),Uo=a(46858),Ro=a(13119),Oo=a(11221),Zo=a(62146);const zo=(0,no.Z)(Ho,[["render",Vo]]),Ao=zo;fo()(Ho,"components",{QBtn:ro.Z,QDialog:co.Z,QCard:uo.Z,QBar:Fo.Z,QSpace:po.Z,QTooltip:Uo.Z,QCardSection:so.Z,QInput:Ro.Z,QCheckbox:Oo.Z,QTable:vo.Z,QInnerLoading:mo.Z,QCardActions:go.Z,QSeparator:bo.Z}),fo()(Ho,"directives",{ClosePopup:Zo.Z});var Qo=a(86248),Mo=a(35084),jo=a(84619),Bo=a(7781),Ko=a(37655),Yo=a(51745),$o=a(87913);const Go={class:"row bordered"},Xo=(0,l.Uk)(" Minimizar "),Jo=(0,l.Uk)(" Maximizar "),ea=(0,l.Uk)("Cerrar"),oa={style:{width:"100vw",height:"80vh"},class:""},aa={class:"text-h6"};function la(e,o,a,t,n,d){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-space"),u=(0,l.up)("q-tooltip"),s=(0,l.up)("q-bar"),p=(0,l.up)("q-td"),v=(0,l.up)("q-tr"),m=(0,l.up)("q-grid"),g=(0,l.up)("q-card-section"),b=(0,l.up)("q-card"),P=(0,l.up)("q-dialog"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Go,[(0,l.Wm)(r,{label:"Pedidos",dense:"",outline:"",color:"primary",icon:"pending_actions",onClick:o[0]||(o[0]=o=>e.modal=!0)})]),(0,l.Wm)(P,{modelValue:e.modal,"onUpdate:modelValue":o[3]||(o[3]=o=>e.modal=o),maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c),(0,l.Wm)(r,{dense:"",flat:"",icon:"minimize",onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[Xo])),_:1})):(0,l.kq)("",!0)])),_:1},8,["disable"]),(0,l.Wm)(r,{dense:"",flat:"",icon:"crop_square",onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[Jo])),_:1}))])),_:1},8,["disable"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(r,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[ea])),_:1})])),_:1})),[[f]])])),_:1}),(0,l.Wm)(g,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l._)("div",oa,[(0,l._)("div",aa,[(0,l.Wm)(r,{color:"primary",icon:"refresh",label:"Cargar Pedidos Pendientes",onClick:e.getPedidos,loading:e.loading},null,8,["onClick","loading"])]),(0,l.Wm)(m,{class:"puntosDialog",data:e.rows,columns:e.columns,columns_filter:!0,pagination:{rowsPerPage:0}},{body:(0,l.w5)((o=>[(0,l.Wm)(v,{props:o,class:"cursor-pointer",onDblclick:a=>e.selectRow(a,o.row)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columns,(e=>((0,l.wg)(),(0,l.j4)(p,{key:e.name,class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.format?e.format(o.row[e.field]):o.row[e.field]),1)])),_:2},1024)))),128))])),_:2},1032,["props","onDblclick"])])),_:1},8,["data","columns"])])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"])],64)}var ia=function(e,o,a,l){function i(e){return e instanceof a?e:new a((function(o){o(e)}))}return new(a||(a=Promise))((function(a,t){function n(e){try{r(l.next(e))}catch(o){t(o)}}function d(e){try{r(l["throw"](e))}catch(o){t(o)}}function r(e){e.done?a(e.value):i(e.value).then(n,d)}r((l=l.apply(e,o||[])).next())}))};const ta=[{name:"Numero",label:"Número pedido",field:"Numero",align:"center",sortable:!0},{name:"Fecha",label:"Fecha",field:"Fecha",align:"center",sortable:!0},{name:"Cliente",label:"Cliente",field:"Cliente",align:"center",sortable:!0},{name:"Nombre",label:"Nombre Cliente",field:"Nombre",align:"center",sortable:!0},{name:"Total",label:"Total",field:"Total",align:"center",sortable:!0,format:e=>`Q.${e}`},{name:"Vendedor",label:"Vendedor",field:"Vendedor",align:"center",sortable:!0}],na=(0,l.aZ)({name:"PedidosPendientes",emits:["setPedido"],setup(e,{emit:o}){const a=(0,Ze.iH)(!1),l=(0,Ze.iH)([]),i=(0,Ze.iH)(!1),t=()=>ia(this,void 0,void 0,(function*(){i.value=!0,yield Re.api.get(Re.endPoints.PEDIDOENC+"PedidosVendedor").then((e=>{l.value=e.data.Pedidos})).catch((e=>{})),i.value=!1})),n=(e,l)=>{o("setPedido",l.Numero),a.value=!1};return{getPedidos:t,selectRow:n,maximizedToggle:(0,Ze.iH)(!0),modal:a,rows:l,columns:ta,loading:i}},watch:{modal(e){e&&this.getPedidos()}}});var da=a(31233),ra=a(67220);const ca=(0,no.Z)(na,[["render",la]]),ua=ca;fo()(na,"components",{QBtn:ro.Z,QDialog:co.Z,QCard:uo.Z,QBar:Fo.Z,QSpace:po.Z,QTooltip:Uo.Z,QCardSection:so.Z,QTr:da.Z,QTd:ra.Z}),fo()(na,"directives",{ClosePopup:Zo.Z});var sa=a(51392),pa=a(17779),va=function(e,o,a,l){function i(e){return e instanceof a?e:new a((function(o){o(e)}))}return new(a||(a=Promise))((function(a,t){function n(e){try{r(l.next(e))}catch(o){t(o)}}function d(e){try{r(l["throw"](e))}catch(o){t(o)}}function r(e){e.done?a(e.value):i(e.value).then(n,d)}r((l=l.apply(e,o||[])).next())}))};const ma=(0,l.aZ)({components:{ProductsDialog:$e.Z,ClientesDialog:je.Z,AClientesDialog:Be.Z,FacturacionDialog:Ke.Z,KeyPageDetect:Ye.Z,TransformarDialog:wo,ProductosOfertadosDialog:Co.Z,DespacharPendientes:Ao,PuntosCliente:Qo.Z,ReservasDialog:Mo.Z,qrscannerVue:$o.Z,PedidosPendientes:ua,ProductosBuscados:sa.Z},setup(){const e=[{name:"Producto",label:"Producto",field:"Producto",align:"center"},{name:"Descripcion",label:"Descripción",field:"Descripcion",align:"center"},{name:"Lote",label:"Lote",field:"Lote",align:"center"},{name:"DescripcionLote",label:"Descripción Lote",field:"DescripcionLote",align:"center"},{name:"Cantidad",label:"Cantidad",field:"Cantidad",align:"center"},{name:"Precio",label:"Precio",field:"Precio",align:"center"},{name:"Subtotal",label:"Subtotal",field:"Subtotal",align:"center",format:e=>`Q.${e}`},{name:"Eliminar",label:"Eliminar",field:"Eliminar",align:"center",headerStyle:"padding:0px; padding-right:16px; width:50px;"}],o=(0,jo.z)(),a=(0,Bo.L)(),i=(0,Ze.iH)([]),t=(0,Ae.Z)(),n=(0,Qe.tv)(),d=(0,Ze.iH)(!1),r=(0,Ze.iH)(""),c=(0,Ze.iH)(""),u=(0,Ze.iH)(null),s=(0,Ze.iH)(""),p=(0,Ze.iH)(""),v=(0,Ze.iH)(""),m=(0,Ze.iH)(""),g=(0,Ze.iH)(""),b=(0,Ze.iH)(""),P=(0,Ze.iH)(""),f=(0,Ze.iH)(""),h=(0,Ze.iH)(""),w=(0,Ze.iH)(""),C=(0,Ze.iH)(0),y=(0,Ze.iH)(!1),D=(0,Ze.iH)(!1),k=(0,Ze.iH)(!1),_=(0,Ze.iH)(1),x=(0,Ze.iH)(!0),T=(0,Ze.iH)(1),N=(0,Ze.iH)(0),q=(0,Ze.iH)(0),E=(0,Ze.iH)(null),W=(0,Ze.iH)(!1),V=(0,Ze.iH)(null),I=(0,Ze.iH)(null),L=(0,Ze.iH)(""),S=(0,Ze.iH)([]),H=(0,Ze.iH)(0),F=(0,Ze.iH)(""),U=(0,Ze.iH)(!1),R=(0,Ze.iH)("S"),O=(0,Ze.iH)(!1),Z=(0,Ze.iH)(!1),z=(0,Ze.iH)(!1),A=(0,Ze.iH)(!1),Q=(0,Ze.iH)(!1),M=(0,Ze.iH)(!1),j=(0,Ze.iH)(!1),B=(0,Ze.iH)([]),K=(0,Ze.iH)(""),Y=(0,Ze.iH)(!0),$=(0,Ze.iH)(!0),G=(0,Ze.iH)(!1),X=(0,Ze.iH)(null),J=(0,Ze.iH)(null),ee=(0,Ze.iH)(null),oe=(0,Ze.iH)(null),ae=(0,Ze.iH)(null),le=(0,Ze.iH)(null),ie=(0,Ze.iH)(null),te=(0,Ze.iH)(null),ne=(0,Ze.iH)(null),de=(0,Ze.iH)(!1),re=(0,Ze.iH)("fact"),ce=(0,Ze.iH)(""),ue=(0,Ze.iH)(null),se=(0,Ze.iH)("NIT"),pe=(0,Ze.iH)([]),ve=(0,Ze.iH)(0),me=(0,Ze.iH)(!1),ge=(0,Ze.iH)([]);(0,Oe.lz)()?ve.value=0:ve.value=300;const be=()=>{const e=[];e.push({id:"layout-menu",texto:"Abre el menu lateral",titulo:"Menu"}),e.push({id:"layout-menu-paginas",texto:"Listado expandible de las páginas disponible en el POS",titulo:"Paginas"}),e.push({id:"layout-menu-ajustes",texto:"Listado expandible para ajustes de Impresoras y otros configurables del POS",titulo:"Ajustes"}),e.push({id:"layout-sucursal",texto:"Nombre de la sucursal actual",titulo:""}),e.push({id:"layout-serie",texto:"Serie en la cual se va a facturar",titulo:""}),e.push({id:"layout-vendedor",texto:"Nombre del vendedor actual en el sistema",titulo:""}),e.push({id:"layout-opciones",texto:"Menú con opciones disponibles en facturación",titulo:""}),e.push({id:"layout-abrir-caja",texto:"Opción para abrir la caja si se posee",titulo:""}),e.push({id:"pos-opcion-ticket",texto:"Opción para facturar de contado las facturar Ticket",titulo:""}),e.push({id:"pos-opcion-may",texto:"Opción para facturar a clientes mayorista o colaboradores",titulo:""}),e.push({id:"pos-buscar-aclientes",texto:"Botón para buscar los clientes guardados en el sistema"}),e.push({id:"pos-nit",texto:"Campo para buscar datos del cliente por el número de NIT"}),e.push({id:"pos-validaNit",texto:"Check para habilitar la validación del NIT online"}),e.push({id:"pos-nombre",texto:"Nombre del cliente"}),e.push({id:"pos-direccion",texto:"Dirección del cliente"}),e.push({id:"pos-correo",texto:"Correo del cliente"}),e.push({id:"pos-contingencia",texto:"En caso de fallar la certificación se debe habilitar la opción de contingecia, la cual genera únicamente una factura local y despúes se debe mandar a certificar"}),e.push({id:"depachar-btn",texto:"Botón para despachar productos pendientes de una cotización"}),e.push({id:"ofertados-btn",texto:"Botón de notificaciones de productos ofertados, para ver los productos debe dar click sobre el botón"}),e.push({id:"pos-pedido",texto:"Número de pedido actual, si se encuentra en 0, no hay creado ningún pedido"}),e.push({id:"pos-subtotal",texto:"SubTotal del pedido"}),e.push({id:"pos-crear-pedido",texto:"Botón para crear un nuevo pedido, también se puede crear precionando la tecla (F3)"}),e.push({id:"pos-eliminar-prod",texto:"Check para eliminar productos, si la opción se encuentra marcada el producto escaneado será eliminado del pedido",scroll:!0}),e.push({id:"pos-buscar-producto",texto:"Botón para abrir el buscador de productos",on:"bottom"}),e.push({id:"pos-producto",texto:"Campo de texto para ingrear el código del producto"}),e.push({id:"pos-check-cantidad",texto:"Check para habilitar el campo de cantidad, de caso contrario el valor por defecto sera 1"}),e.push({id:"pos-cantidad",texto:"Campo numérico para ingresar las unidad que se desean despachar"}),e.push({id:"pos-precios",texto:"Precios y secuencias del producto escaneado"}),e.push({id:"pos-detalles",texto:"Detalles del pedido agregados"}),e.push({id:"pos-buscar-detalles",texto:"Campo de texto para buscar un producto dentro de los detalles"});const o=(0,Yo.Z)(e,"POS",(()=>{window.scrollTo(0,0),Pe(),(0,Oe.KY)("POS"),(0,Oe.KY)("MainLayout")}));null===o||void 0===o||o.start()},Pe=()=>va(this,void 0,void 0,(function*(){T.value=2,yield(0,Me._R)(500);const e=[];e.push({id:"pos-buscar-clientes",texto:"Botón para abrir el buscardor de clientes"}),e.push({id:"pos-codigo-cliente",texto:"Campo de texto para ingresar el código del cliente"}),e.push({id:"puntos-estado",texto:"Estado de puntos para cliente ingresado, si se encuentra en rojo el clinte no acumula puntos, de caso contrario si se encuentra en verde, el cliente si acumula puntos"}),e.push({id:"puntos-btn",texto:"Botón para ver el historial de puntos del cliente"});const o=(0,Yo.Z)(e,"POS-Clientes",(()=>{(0,Oe.KY)("POS-Clientes")}));null===o||void 0===o||o.start()}));(0,l.YP)(a,(()=>{a.cargarUltimo&&eo(),a.cargarNumero&&oo()}));const fe=e=>{switch(e){case"C+A":eo();break;case"F3":je();break;case"F6":n.push("/INIT/PENDIENTES");break;case"C+ ":N.value=0;break;case"Delete":he();break;case"C+R":ho("fact");break;case"C+D":ho("nc");break;default:break}},he=()=>{0!==N.value&&(0,ze.wp)("Anular","¿Está seguro de anular el pedido "+N.value+"?",{onPressOk:()=>{Re.api.post(Re.endPoints.PEDIDOENC+"Anular",N.value).then((e=>{(0,ze.dF)("Pedido anulado correctamente"),N.value=0})).catch((e=>{(0,ze.L1)(e)}))},onPressCancel:()=>{}})},we=(e="FACT")=>va(this,void 0,void 0,(function*(){var a;yield Re.api.get(Re.endPoints.DATOSVEND+(0,Oe.Xw)(),(0,Re.configApi)({queryParams:{tipo:e}})).then((a=>va(this,void 0,void 0,(function*(){if(H.value=a.data.Cliente,1===T.value&&(V.value=a.data.Cliente,I.value=parseInt(a.data.Nivel)),L.value=a.data.Descripcion,o.nombreSucursal=a.data.Nombre_Sucursal,o.nombreVendedor=a.data.Nombre,K.value=a.data.Serie,A.value=a.data.TieneRutero,M.value=a.data.TieneTecnico,j.value=a.data.CambioPrecio,(0,Oe.zD)(a.data.SerieRuta),2===T.value&&"S"===a.data.BloqueaMayorista){let e=!1;do{if(e=yield Ce(),null===e)break;null!=e&&1!=e&&(0,ze.x2)("Clave Incorrecta",{position:"top"})}while(!e)}De(e)})))).catch((e=>{(0,ze.L1)(e,{position:"top"})})),null===(a=oe.value)||void 0===a||a.focus()})),Ce=()=>va(this,void 0,void 0,(function*(){const e=yield(0,ze.UA)("Contraseña Mayoristas","Ingrese la clave de autorización para clientes mayoristas","password");if(null===e)return T.value=1,null;const o=yield ye(e);return o})),ye=e=>va(this,void 0,void 0,(function*(){let o=!1;return yield Re.api.post(Re.endPoints.DATOSVEND+"Clave",e).then((e=>{o=e.data})).catch((e=>{})),o})),De=(e="")=>{var o,a,l,i;""!==e?"FACT"===e?K.value=null!==(o=(0,Oe.dS)())&&void 0!==o?o:"":"FCRE"===e?K.value=null!==(a=(0,Oe.JT)())&&void 0!==a?a:"":"FCON"===e?K.value=null!==(l=(0,Oe.V6)())&&void 0!==l?l:"":"FRUT"===e&&(K.value=null!==(i=(0,Oe.nZ)())&&void 0!==i?i:"",(0,Fe.Z)("primary","#b88b11")):K.value=""},ke=()=>{d.value=!1;let e="",o="";if(2===T.value){if(!V.value||""===V.value.toString())return Ne(),I.value=null,void(L.value="");e=Re.endPoints.CLIENTE+V.value,o="Cliente no encontrado"}else{if(!r.value||""===r.value)return void Ne();e=Re.endPoints.ACLIENTES+x.value.toString()+"/"+r.value+"/"+se.value,o="Nit/DPI no encotrado interno"}d.value=!0,Re.api.get(e).then((e=>{var a;if(null==e.data)return(0,ze.x2)(o,{timeout:1e3}),d.value=!1,null===(a=ne.value)||void 0===a||a.select(),void Ne();2===T.value&&(r.value=e.data.Nit,c.value=e.data.Nit,I.value=parseInt(e.data.Nivel),L.value=e.data.Descripcion,u.value=e.data.Dpi,se.value="NIT"),1===T.value&&"CF"===r.value?(s.value="CONSUMIDOR FINAL",p.value="CIUDAD",v.value=""):(s.value=e.data.Nombre,p.value=e.data.Direccion,v.value=e.data.Email,m.value=e.data.Telefono,void 0!==e.data.Tipo_especial&&(se.value=e.data.Tipo_especial)),d.value=!1})).catch((e=>{(0,ze.L1)(e),d.value=!1,Ne()}))},_e=()=>va(this,void 0,void 0,(function*(){var e;if(null==b.value||!b.value||""===b.value)return w.value="",C.value=0,f.value="",P.value="",S.value=[],void(B.value=[]);if(O.value)while(O.value)pa.log("buscando..."),yield new Promise((e=>setTimeout(e,250)));O.value=!0;const o=b.value.toUpperCase().replace(".","_");yield Re.api.get(Re.endPoints.PRODUCTO+I.value+"/"+o).then((e=>va(this,void 0,void 0,(function*(){if(null==e.data.Producto)return w.value="Producto no encotrado",C.value=0,f.value="",h.value="",P.value="",S.value=[],void(B.value=[]);P.value=e.data.Producto.Producto,w.value=e.data.Producto.Descripcion,h.value=e.data.Producto.DescripcionLote,yield(0,Me._R)(100),f.value=e.data.Producto.Lote,S.value=e.data.Precios,B.value=e.data.Um,Te()})))).catch((e=>{O.value=!1,(0,ze.L1)(e)})).finally((()=>{O.value=!1})),null===(e=X.value)||void 0===e||e.focus()})),xe=()=>va(this,void 0,void 0,(function*(){var e;if(pa.log("Consulater lote",b.value),h.value="",!b.value&&""===b.value)return;const o=b.value.toUpperCase().replace(".","_");yield Re.api.get(Re.endPoints.PRODUCTO+(null===(e=I.value)||void 0===e?void 0:e.toString())+"/"+o).then((e=>{if(null==e.data.Producto)return f.value="",void(h.value="Lote no encontrado");h.value=e.data.Producto.DescripcionLote})).catch((e=>{pa.log(e),(0,ze.L1)(e)}))})),Te=()=>{if(0===S.value.length)return void(C.value=0);let e=S.value.find((e=>0===e.Final||e.Inicial<=_.value&&e.Final>=_.value?e:void 0));e&&(C.value=e.Precio)},Ne=()=>{var e;s.value="",p.value="",v.value="",m.value="",c.value="",u.value="",2===T.value&&(r.value="",null===(e=oe.value)||void 0===e||e.resetValidation()),z.value=!1,i.value=[]},qe=e=>va(this,void 0,void 0,(function*(){var o,a;"+"===e.key&&e.preventDefault(),"*"===e.key&&e.preventDefault(),"-"===e.key&&(null===(o=r.value)||void 0===o?void 0:o.includes("-"))&&e.preventDefault(),"/"===e.key&&(null===(a=r.value)||void 0===a?void 0:a.includes("/"))&&e.preventDefault(),"F2"===e.key&&(r.value="CF",yield(0,Me._R)(500),je()),e.key})),Ee=()=>va(this,void 0,void 0,(function*(){r.value="CF",yield(0,Me._R)(500),je()})),We=e=>va(this,void 0,void 0,(function*(){var o,a,l,i,t,n,d,r;if(yield new Promise((e=>setTimeout(e,ve.value))),(0,Oe.lz)()){if("\n"===e.key)_e();else if("Enter"===e.key){let e=yield null===(o=J.value)||void 0===o?void 0:o.validate();e&&(y.value?null===(a=ee.value)||void 0===a||a.focus():D.value?(yield Ye(),null===(l=X.value)||void 0===l||l.focus()):(pe.value.push(b.value),null===(i=X.value)||void 0===i||i.select(),me.value||Ve()))}}else{if(Z.value)return;if("Enter"===e.key){if(O.value)while(O.value)pa.log("esperando..."),yield new Promise((e=>setTimeout(e,500)));let e=yield null===(t=J.value)||void 0===t?void 0:t.validate();e&&(y.value?null===(n=ee.value)||void 0===n||n.focus():k.value||(D.value?(yield Ye(),null===(d=X.value)||void 0===d||d.focus()):(yield Be(),null===(r=X.value)||void 0===r||r.focus())))}}})),Ve=()=>va(this,void 0,void 0,(function*(){var e;me.value=!0;let o=[];while(pe.value.length>0){let e,a,l,i,t,n=pe.value.find(((e,o,a)=>0===o));if(void 0===n)return;if(pa.log("agregando ->"+n),t=_.value,yield Re.api.get(Re.endPoints.PRODUCTO+I.value+"/"+n).then((o=>{null!=o.data.Producto?(e=o.data.Producto.Producto,a=o.data.Producto.Descripcion,l=o.data.Producto.Lote,i=o.data.Precios[0].Precio):(0,ze.x2)("Producto",{subtitulo:"No se encontro el producto "+n})})).catch((e=>{(0,ze.L1)(e)})),void 0!==e){const n={Pedido:N.value,Producto:e,Cantidad:t,Precio:i,Lote:l,GeneraMov:!1,Despacho:"S"};yield Re.api.post(Re.endPoints.PEDIDODET,n).then((n=>{n.data.Mov&&o.push({Producto:e,Descripcion:a,Lote:l,Precio:i,Cantidad:t})})).catch((o=>{(0,ze.L1)(o,{timeout:8e3,position:"top"}),ge.value.push({Producto:e,Descripcion:a,Lote:l,Precio:i,Cantidad:t})})).finally((()=>{}))}pe.value.shift()}Je(),me.value=!1;let a=0;me.value=!0,o.forEach((e=>va(this,void 0,void 0,(function*(){pa.log("Agregando mov43-> ",e.Producto,e.Lote),yield(0,ze.pW)("Existencia","El producto "+e.Producto+" "+e.Descripcion+" - "+e.Lote+" no tiene existencia, desea generar MOVIMIENTO_43",{onPressOk:()=>va(this,void 0,void 0,(function*(){const o={Pedido:N.value,Producto:e.Producto,Cantidad:e.Cantidad,Precio:e.Precio,Lote:e.Lote,GeneraMov:!0,Despacho:"S"};yield Re.api.post(Re.endPoints.PEDIDODET,o).then((e=>{})).catch((e=>{(0,ze.L1)(e,{timeout:8e3,position:"top"})})).finally((()=>{}))})),onPressCancel:()=>{}}),a++,a===o.length&&(yield(0,Me._R)(1500),Je(),me.value=!1)})))),me.value=!1,null===(e=X.value)||void 0===e||e.select()}));let Ie=!1,Le="";const Se=e=>{var o;if(Ie){let o=parseInt(e.key);if(!Number.isNaN(o))return Le+=e.key,_.value=parseInt(Le),void e.preventDefault();"Escape"===e.key?(_.value=1,Le="",Ie=!1):(Le="",Ie=!1)}"F1"===e.key?(null===(o=ae.value)||void 0===o||o.openDialog(),e.preventDefault()):e.ctrlKey&&"E"===e.key.toUpperCase()?(D.value=!D.value,e.preventDefault()):"+"===e.key?(e.ctrlKey?y.value=!0:(_.value++,(0,ze.dF)("Más 1 agregado",{timeout:1e3,position:"top"})),e.preventDefault()):"-"===e.key?(e.ctrlKey?y.value=!1:_.value>1&&(_.value--,(0,ze.dF)("Menos 1 agregado",{timeout:1e3,position:"top"})),e.preventDefault()):"*"===e.key&&(Ie=!0)},He=e=>va(this,void 0,void 0,(function*(){var o,a,l;if("Enter"===e.key){let e=yield null===(o=J.value)||void 0===o?void 0:o.validate();e&&(D.value?(yield Ye(),null===(a=X.value)||void 0===a||a.focus()):(0,Oe.lz)()?(pe.value.push(b.value),null===(l=X.value)||void 0===l||l.select(),me.value||(yield Ve())):yield Be(),_.value=1)}})),je=()=>va(this,void 0,void 0,(function*(){var e,o;if(W.value=!1,d.value)while(d.value)pa.log("esperando..."),yield new Promise((e=>setTimeout(e,500)));if(0!==N.value)return void(0,ze.dF)("Tiene un pedido cargado",{tipo:"warning"});let a=yield null===(e=te.value)||void 0===e?void 0:e.validate();if(a){if(2===T.value&&V.value===H.value)return void(0,ze.x2)("No puede facturar al cliente Ticket");if(2===T.value&&null===E.value&&!1===Q.value)return void(W.value=!0);null===K&&(0,ze.x2)("No hay serie");const e={Nombre:s.value,Nit:r.value,Direccion:p.value,Cliente:V.value,Vendedor:(0,Oe.Xw)(),Credito:1!==T.value&&E.value,Nivel:I.value,Despacho:R.value,Correro:v.value,ValidarNit:x.value,Observacion:g.value,Ruta:Q.value,Tipo_especial:se.value,TelCliente:m.value};(0,Ko.Q)("Creando Pedido..."),yield Re.api.post(Re.endPoints.PEDIDOENC,e,(0,Re.configApi)({serie:K.value})).then((e=>{N.value=e.data,(0,ze.dF)("Pedido "+N.value.toString()+" creado"),z.value=!0})).catch((e=>{(0,ze.L1)(e,{timeout:0,position:"top"})})),(0,Ko.E)(),null===(o=X.value)||void 0===o||o.focus()}})),Be=(e=!1)=>va(this,void 0,void 0,(function*(){var o,a,l;if(""!==P.value&&""===f.value)return void(null===(o=ae.value)||void 0===o||o.openDialog());if(null===P.value||null===f.value)return void(0,ze.x2)("El producto no existe");if(0===N.value)return void(0,ze.x2)("Debe crear un pedido primero");Z.value=!0;let t=yield null===(a=J.value)||void 0===a?void 0:a.validate();if(t){const o={Pedido:N.value,Producto:P.value,Cantidad:_.value,Precio:C.value,Lote:f.value,GeneraMov:e,Despacho:R.value};if(2===T.value&&(0,Oe.X6)()){var n=i.value.find((e=>e.Producto===P.value&&e.Lote===f.value));if(pa.log(n),n)return(0,ze.x2)("Ya existe el producto"+P.value+" con lote "+f.value),void(Z.value=!1)}yield Re.api.post(Re.endPoints.PEDIDODET,o).then((e=>va(this,void 0,void 0,(function*(){e.data.Mov?yield(0,ze.pW)("Existencia","El producto no tiene existencia, desea generar MOVIMIENTO 43",{onPressOk:()=>va(this,void 0,void 0,(function*(){yield Be(!0)})),onPressCancel:()=>{}}):((0,ze.dF)("Producto "+P.value+" agregado correctamente"),b.value="",_.value=1)})))).catch((e=>{var o,a;Z.value=!1,null===(o=X.value)||void 0===o||o.select(),null===(a=X.value)||void 0===a||a.focus(),(0,ze.L1)(e,{timeout:8e3,position:"top"})})).finally((()=>{Z.value=!1,Je()}))}Z.value=!1,null===(l=X.value)||void 0===l||l.focus()})),Ke=(e,o,a,l)=>va(this,void 0,void 0,(function*(){var i;if(0===N.value)return void(0,ze.x2)("Debe crear un pedido primero");const t={Pedido:N.value,Producto:e.trim(),Cantidad:l,Precio:a,Lote:o.trim(),GeneraMov:!1,Despacho:R.value};yield Re.api.post(Re.endPoints.PEDIDODET,t).then((a=>{a.data.Mov?(0,ze.x2)("El producto no tiene existencia suficiente para la cantidad de: "+l+" unidades"):((0,ze.dF)("Producto "+e.trim()+" y lote "+o.trim()+" agregado correctamente",{position:"top"}),b.value="",_.value=1)})).catch((e=>{var o,a;Z.value=!1,null===(o=X.value)||void 0===o||o.select(),null===(a=X.value)||void 0===a||a.focus(),(0,ze.L1)(e,{timeout:8e3,position:"top"})})).finally((()=>{Z.value=!1,Je()})),Z.value=!1,null===(i=X.value)||void 0===i||i.focus()})),Ye=()=>va(this,void 0,void 0,(function*(){var e,o,a;if(0===N.value)return void(0,ze.x2)("Error",{subtitulo:"Debe crear un pedido primero"});if(""!==P.value&&""===f.value)return void(null===(e=ae.value)||void 0===e||e.openDialog());Z.value=!0;let l=yield null===(o=J.value)||void 0===o?void 0:o.validate();const i={Pedido:N.value,Producto:P.value,Cantidad:_.value,Precio:C.value,Lote:f.value};l&&(yield Re.api.delete(Re.endPoints.PEDIDODET,(0,Re.configApi)({datos:i})).then((e=>{(0,ze.dF)("Producto eliminado correctamente"),b.value="",_.value=1})).catch((e=>{(0,ze.L1)(e,{position:"right"})})).finally((()=>{Z.value=!1,Je()}))),Z.value=!1,null===(a=X.value)||void 0===a||a.focus()})),$e=e=>{const o={Pedido:N.value,Producto:e.Producto,Cantidad:e.Cantidad,Precio:e.Precio,Lote:e.Lote};(0,ze.wp)("Confirmar","¿Está seguro de eliminar todo el producto?",{onPressOk:()=>va(this,void 0,void 0,(function*(){var e;Z.value=!0,yield Re.api.delete(Re.endPoints.PEDIDODET,(0,Re.configApi)({datos:o})).then((e=>{(0,ze.dF)("Producto eliminado correctamente"),b.value="",_.value=1})).catch((e=>{(0,ze.L1)(e,{timeout:0,position:"right"})})).finally((()=>{Z.value=!1,Je()})),Z.value=!1,null===(e=X.value)||void 0===e||e.focus()}))})},Ge=()=>va(this,void 0,void 0,(function*(){U.value=!0;let e="";(0,Ko.Q)("CARGANDO PEDIDO...","grey-9","dark","QSpinnerIos"),yield Re.api.get(Re.endPoints.PEDIDOENC+N.value).then((o=>va(this,void 0,void 0,(function*(){let a=o.data.Pedido;return o.data.Pedido?"P"!==o.data.Pedido.Estado?((0,ze.x2)("El pedido ya no está pendiente ("+o.data.Pedido.Estado+")"),void(N.value=0)):(r.value=a.Nit,yield(0,Me._R)(500),s.value=a.Nombre,p.value=a.Direccion,v.value=a.Correo,m.value=a.Telefono,q.value=a.Total,I.value=parseInt(a.Nivel),R.value=a.Despacho,g.value=a.Observacion,a.Cliente===H.value?(T.value=1,e="FACT",De(e)):(T.value=2,V.value=a.Cliente,Q.value=a.EsRuta,a.EsRuta||(E.value=a.Credito)),void Je()):((0,ze.x2)("No existe el pedido"),void(N.value=0))})))).catch((e=>{(0,ze.L1)(e),N.value=0})),(0,Ko.E)(),U.value=!1})),Xe=()=>{Re.api.get(Re.endPoints.PEDIDOENC+N.value).then((e=>{let o=e.data.Pedido;q.value=o.Total})).catch((e=>{(0,ze.L1)(e)}))},Je=()=>{Re.api.get(Re.endPoints.PEDIDODET+N.value).then((e=>{i.value=e.data.Detalles,Xe()})).catch((e=>{(0,ze.L1)(e)}))},eo=()=>va(this,void 0,void 0,(function*(){0!==N.value&&(N.value=0),(0,Ko.Q)("CARGANDO ÚLTIMO PEDIDO...","grey-9","dark","QSpinnerIos"),yield Re.api.get(Re.endPoints.PEDIDOENC+"Ultimo").then((e=>{N.value=e.data})).catch((e=>{(0,ze.L1)(e),N.value=0})),(0,Ko.E)()})),oo=()=>{t.dialog({title:"Pedido",message:"Ingrese el número de pedido",prompt:{model:"",type:"number"},cancel:!0,persistent:!1}).onOk((e=>{""!==e?ao(parseInt(e)):N.value=0})).onCancel((()=>{})).onDismiss((()=>{}))},ao=e=>va(this,void 0,void 0,(function*(){0!==N.value&&(N.value=0,yield(0,Me._R)(500)),N.value=e})),lo=e=>{ao(e)},io=e=>{N.value,void 0!==e.Lote?b.value=e.Producto+"L"+e.Lote:(b.value=e.Producto,(0,Me.fC)("Enter"))},to=e=>{var o;if(N.value>0)return;V.value=null,V.value=e.Cliente;null===(o=ne.value)||void 0===o||o.validate(e.Cliente)},no=e=>va(this,void 0,void 0,(function*(){r.value&&""!==r.value||(r.value=null,yield(0,Me._R)(500)),r.value=e.Nit})),ro=()=>va(this,void 0,void 0,(function*(){var e,o;2===T.value&&(V.value=null,Q.value||(K.value="")),r.value="",c.value="",u.value="",se.value="NIT",q.value=0,b.value="",f.value="",i.value.pop(),g.value="",v.value="",pe.value=[],ge.value=[],yield(0,Me._R)(500),1===T.value?null===(e=oe.value)||void 0===e||e.focus():null===(o=ne.value)||void 0===o||o.focus()})),co=(e,o,a,l)=>va(this,void 0,void 0,(function*(){var i;if(e===l)return;let t=0;t=e-l;const n={Pedido:N.value,Producto:o,Cantidad:t,Precio:C.value,Lote:a,GeneraMov:!0,Despacho:R.value};yield Re.api.post(Re.endPoints.PEDIDODET,n).then((e=>{e.data.Mov?(0,ze.wp)("Existencia","El producto no tiene existencia, desea generar MOVIMIENTO 43",{onPressOk:()=>{Be(!0)},onPressCancel:()=>{}}):((0,ze.dF)("Cantidad cambiada para "+P.value+" correctamente"),b.value="",_.value=1)})).catch((e=>{var o,a;Z.value=!1,null===(o=X.value)||void 0===o||o.select(),null===(a=X.value)||void 0===a||a.focus(),(0,ze.L1)(e,{timeout:8e3,position:"top"})})).finally((()=>{Z.value=!1,Je()})),Z.value=!1,null===(i=X.value)||void 0===i||i.focus()})),uo=(e,o,a)=>va(this,void 0,void 0,(function*(){let a=0,l=!0;yield Re.api.get(Re.endPoints.PRODUCTO+"Precio",(0,Re.configApi)({queryParams:{nivel:I.value,producto:o,numeroPedido:N.value}})).then((e=>{a=e.data})).catch((e=>{(0,ze.L1)(e),l=!1}));let i=null;if(e<a){if(i=yield(0,ze.UA)("Contraseña","INGRESE EL CODIGO DE AUTORIZACION","password"),!i)return void(0,ze.x2)("Debe ingresar la contraseña para bajar el precio",{timeout:2500});yield Re.api.post(Re.endPoints.DATOSVEND+"validarContra",i).then((e=>{l=!0})).catch((e=>{(0,ze.L1)(e),l=!1}))}if(!l)return;let t={Pedido:N.value,Producto:o,Precio:e,Nivel:I.value,Pass:i};Re.api.put(Re.endPoints.PEDIDODET,t).then((e=>{Je()})).catch((e=>{(0,ze.L1)(e)}))})),so=()=>{we("")},po=e=>{var o;"Enter"===e.key||"F1"===e.key&&(null===(o=le.value)||void 0===o||o.openDialog(),e.preventDefault())},vo=e=>{pa.log("aplicado totoal"),Je()},mo=e=>{ao(e)},go=()=>{var e;N.value=0,null===(e=oe.value)||void 0===e||e.focus()},bo=(e,o,a)=>{b.value=o.Producto+"L"+o.Lote},Po=e=>{b.value=e},fo=()=>{cordova.plugins["barcodeScanner"].scan((function(e){if(0==e.cancelled&&(b.value=e.text,!y.value)){var o={key:"Enter"};We(o)}}),(function(e){(0,ze.dF)("Fallo al scanear: "+e)}),{showFlipCameraButton:!0,showTorchButton:!0,saveHistory:!0,resultDisplayDuration:0,formats:"CODABAR,CODE_128,EAN_13",orientation:"portrait"})},ho=e=>{if(null!==o.serie&&""!==o.serie)switch(re.value=e,de.value=!0,e){case"nc":ce.value="Devolución";break;case"fact":ce.value="Factura";break;case"pedido":ce.value="Pedido";break;default:break}else(0,ze.x2)("No hay serie, selecciones opción de ticket")},wo=()=>{var e,a,l;let i=10,t=10;screen.width,screen.height;let n="";"nc"===re.value?n="#/Reportes/NCDEV/"+o.serie+"/"+(null===(e=ue.value)||void 0===e?void 0:e.toString()):"fact"===re.value?n="#/Reportes/FACTURA/"+o.serie+"/"+(null===(a=ue.value)||void 0===a?void 0:a.toString()):"pedido"===re.value&&(n="#/Reportes/PEDIDOS/"+(null===(l=ue.value)||void 0===l?void 0:l.toString()),i=Ue.Z.width,t=Ue.Z.height),pa.log(n),(0,Ko.Q)("Imprimiendo...",void 0,void 0,"QSpinnerRadio");try{var d=window.open(n,"Factura","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+i+", height="+t+", top=0, left=0");const e=setInterval((()=>{(null===d||void 0===d?void 0:d.closed)&&(clearInterval(e),ue.value=null,de.value=!1,(0,Ko.E)())}),500)}catch(r){pa.log(r),(0,Ko.E)()}},Co=()=>va(this,void 0,void 0,(function*(){let e=yield(0,ze.UA)("Ingrese la contraseña","","password");null!==e&&(yield Re.api.post(Re.endPoints.DATOSVEND+"validarContra",e).then((e=>{Re.api.get(Oe.Rz+"Open?impresora="+(0,Oe.d4)()).then((e=>{})).catch((e=>{(0,ze.L1)(e)}))})).catch((e=>{(0,ze.L1)(e)})))})),yo=()=>{let e={NumeroPedido:N.value,Observacion:g.value};Re.api.put(Re.endPoints.PEDIDOENC+"Observacion",e).then((e=>{(0,ze.dF)("Observación guardada correctamente")})).catch((e=>{(0,ze.L1)(e)}))};return{scanBarra:Po,scanBarraCordova:fo,consultarNit:ke,setCF:qe,nuevoCF:Ee,keyDownProducto:Se,keyPressProducto:We,keyDownProductoCant:He,consultarProducto:_e,consultarLote:xe,limpiarDatos:Ne,crearPedido:je,agregarProducto:Be,agregarProductoLote:Ke,eliminarTodoProducto:$e,obtenerDatosFacturacion:we,obtenerSerieFacturacion:De,obtenerEnc:Ge,obtenerProductos:Je,cargarUltimo:eo,cargarNumero:oo,productoDialog:io,clienteDialog:to,aclienteDialog:no,limpiarNuevo:ro,cambiarCantidad:co,cambiarPrecio:uo,cambiarTipo:so,keyDownCliente:po,onCuponAplicado:vo,pageKey:fe,setNumeroPedido:ao,transformado:lo,despachado:mo,onFacturado:go,tutorial:be,selectRow:bo,buscarPrecio:Te,openPrompt:ho,reimprimirFactDoc:wo,anularPedido:he,abrirCaja:Co,guardarObservacion:yo,getSuperMode:Oe.lz,facturacion:o,loadingNit:d,NIT:r,codigoCliente:V,nombreCliente:s,direccionCliente:p,correoCliente:v,telefonoCliente:m,observacion:g,nivelPrecio:I,descripcionNivel:L,columnsAgregados:e,rowsAgregados:i,producto:b,maestroProducto:P,lote:f,descripcionLote:h,descripcionProd:w,precioProducto:C,ums:B,cantidadPedir:_,enableCantidad:y,validarNit:x,tipoPedido:T,numeroPedido:N,subTotal:q,creditoContado:E,errorCreditoContado:W,preciosProd:S,clientePOS:H,filterAgregados:F,enableEliminar:D,enableConsulta:k,isFromLoad:U,opcion:R,serie:K,loadProducto:O,loadAgregando:Z,contingencia:G,enableTicket:Y,enableMayorista:$,inFullscreen:z,productoRef:X,formDetRef:J,cantRef:ee,NITRef:oe,formEncRef:te,botonClientes:le,botonProd:ae,codigoClienteRef:ne,transformarRef:ie,tieneRuteros:A,pedidoRuteros:Q,showUMTool:(0,Ze.iH)(!1),tieneTecnicos:M,prompt:de,textReimpresion:ce,numeroReimp:ue,permiteCambioPrecio:j,tipo_especial:se,DPI:u,NITAUX:c,debounceProducto:ve,agregandoListaProductos:me,productosErrorSuper:ge}},watch:{NIT(e){e&&e.includes("/")?this.NIT=null===e||void 0===e?void 0:e.replace("/",""):(this.NIT=null===e||void 0===e?void 0:e.toUpperCase(),this.isFromLoad||1===this.tipoPedido&&this.consultarNit())},codigoCliente(e){this.isFromLoad||(2===this.tipoPedido&&this.consultarNit(),e&&""!==e?this.errorCreditoContado=!1:this.creditoContado=null)},producto(e){let o="";o=e,null!=o&&(o=o.trim().replace("+","").replace("*","").replace("/","")),this.producto=o,(0,Oe.lz)()||this.consultarProducto()},lote(e){""===this.descripcionLote&&this.consultarLote()},tipoPedido(e){this.isFromLoad||(this.limpiarDatos(),1===this.tipoPedido?(this.obtenerDatosFacturacion(),this.opcion="S"):(this.obtenerDatosFacturacion(""),this.creditoContado=null,this.codigoCliente=null,this.nivelPrecio=null,this.descripcionNivel="",this.tipo_especial="NIT"),""!==this.producto&&(this.producto=""))},enableCantidad(e){var o,a;try{e?null===(o=this.cantRef)||void 0===o||o.select():this.cantidadPedir=1,null===(a=this.productoRef)||void 0===a||a.focus()}catch(l){pa.log(l)}},numeroPedido(e){0!==e?this.obtenerEnc():this.limpiarNuevo()},opcion(e){},creditoContado(e){this.errorCreditoContado=!1,null===e?this.obtenerSerieFacturacion(""):e?this.obtenerSerieFacturacion("FCRE"):this.obtenerSerieFacturacion("FCON")},serie(e){this.facturacion.serie=this.serie},cantidadPedir(e){this.buscarPrecio()},pedidoRuteros(e){(0,Fe.Z)("primary","#1976d2"),e?this.obtenerSerieFacturacion("FRUT"):this.obtenerSerieFacturacion("")},tipo_especial(e){2===this.tipoPedido&&("NIT"===e?this.NIT=this.NITAUX:"DPI"===e&&(this.NIT=this.DPI))}},created(){return va(this,void 0,void 0,(function*(){(0,Fe.Z)("primary","#1976d2"),yield this.obtenerDatosFacturacion(),this.$nextTick((()=>{this.tutorial()})),this.$route.params.numeroPedido&&(yield this.setNumeroPedido(Number(this.$route.params.numeroPedido)))}))},unmounted(){(0,Fe.Z)("primary","#1976d2")},methods:{forceUpdate(){pa.log("Update"),setTimeout((()=>{location.reload()}),2e3)},validateEmail(e){if(null==e||""==e)return!0;const o=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return o.test(e)}}});var ga=a(56362),ba=a(13246),Pa=a(490),fa=a(76749),ha=a(69885),wa=a(1389),Ca=a(22857),ya=a(8830),Da=a(8326),ka=a(23175),_a=a(66933),xa=a(85863);const Ta=(0,no.Z)(ma,[["render",He],["__scopeId","data-v-81913c26"]]),Na=Ta;fo()(ma,"components",{QBar:Fo.Z,QMenu:ga.Z,QList:ba.Z,QItem:Pa.Z,QItemSection:fa.Z,QSeparator:bo.Z,QBtn:ro.Z,QTooltip:Uo.Z,QSpace:po.Z,QPage:ha.Z,QDialog:co.Z,QCard:uo.Z,QCardSection:so.Z,QInput:Ro.Z,QCardActions:go.Z,QBtnToggle:wa.Z,QIcon:Ca.Z,QOptionGroup:ya.Z,QForm:Da.Z,QCheckbox:Oo.Z,QToggle:ka.Z,QMarkupTable:_a.Z,QTable:vo.Z,QTd:ra.Z,QPopupEdit:xa.Z}),fo()(ma,"directives",{ClosePopup:Zo.Z})}}]);