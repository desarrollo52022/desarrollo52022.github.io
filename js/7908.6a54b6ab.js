"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[7908],{7908:(e,t,a)=>{a.r(t),a.d(t,{default:()=>De});var i=a(59835),s=a(86970);const l={class:"notPrint"},n={class:"report-letter",id:"documentoOrden"},o={class:"row justify-center"},d={class:"col-12"},c=["src"],r=(0,i._)("div",{class:"row col-xs-12 col-md-12 justify-center"},[(0,i._)("h6",null,"Reporte de Orden de Instalacion")],-1),v={class:"row col-12 justify-end q-mr-xl"},u={class:"bg-black text-white text-h6 q-pa-xs"},_={class:"row col-xs-7 col-md-7 justify-center"},b={class:"col-12 row"},m=(0,i._)("div",{class:"col-3 border-BR text-caption"},"Vendedor: ",-1),p={class:"col-8 border-Bottom text-caption q-mr-md"},w=(0,i._)("div",{class:"col-3 border-BR text-caption"},"Cliente: ",-1),h={class:"col-8 border-Bottom text-caption q-mr-md"},E=(0,i._)("div",{class:"col-3 border-BR text-caption"},"Telefono: ",-1),f={class:"col-8 border-Bottom text-caption q-mr-md"},D=(0,i._)("div",{class:"col-3 border-BR text-caption"},"Dirección Instalación: ",-1),O={class:"col-8 border-Bottom text-caption q-mr-md"},x=(0,i._)("div",{class:"col-3 border-BR text-caption"},"Observaciones: ",-1),y={class:"col-8 border-Bottom text-caption q-mr-md"},k={class:"col-12 q-pa-sm"},N={class:"col-12 q-pa-sm"},I={class:"col-12 q-pa-sm"},q={class:"col-12 q-pa-none"},L={class:"col-12 q-pa-none"},g=(0,i._)("div",{class:"q-ma-s"},null,-1),P=(0,i._)("thead",null,[(0,i._)("tr",{class:"bg-grey-5"},[(0,i._)("th",{class:"break2Lines",style:{width:"25px"}},"Id"),(0,i._)("th",{class:"break2Lines",style:{width:"70%"}},"Descripción Servicio de Instalación"),(0,i._)("th",{class:"break2Lines",style:{width:"30%"}},"Técnico Instalador"),(0,i._)("th",{class:"break2Lines",style:{width:"30%"}},"Horas Laboradas")])],-1),T={class:"break2Lines"},R={class:"break2Lines"},z={class:""},C={class:"break2Lines"},H={class:""},M={class:"break2Lines"},S=(0,i._)("div",{class:"q-ma-xs"},null,-1),F=(0,i._)("thead",null,[(0,i._)("tr",{class:"bg-grey-5"},[(0,i._)("th",{class:"break2Lines",style:{width:"25px"}},"Id"),(0,i._)("th",{class:"break2Lines",style:{width:"20%"}},"Producto"),(0,i._)("th",{class:"break2Lines",style:{width:"35%"}},"Descripción"),(0,i._)("th",{class:"break2Lines",style:{width:"17%"}},"Descripción Lote"),(0,i._)("th",{class:"break2Lines",style:{width:"10%"}},"Cantidad"),(0,i._)("th",{class:"break2Lines",style:{width:"10%"}},"Precio")])],-1),Y={class:"break2Lines"},A={class:"break2Lines"},B={class:""},Z={class:"break2Lines"},j={class:""},Q={class:"break2Lines"},$={class:""},V={class:"break2Lines"},U={class:""},W={class:"break2Lines"},K={class:"row col-12 justify-end"},G=(0,i._)("div",{class:"text-h6 q-pa-sm q-mr-sm"},"Total:",-1),X={class:"text-h6 q-pa-sm q-mr-xl"},J=(0,i.uE)('<div class="col-12 q-mt-xl"></div><div class="row q-pa-md justify-center q-gutter-lg"><div class="col-3 text-center text-subtitle2 border-Top"> f. Vendedor <br></div><div class="col-3 text-center text-subtitle2 border-Top"> f. Tecnico <br></div><div class="col-3 text-center text-subtitle2 border-Top"> f. Cliente <br></div></div>',2);function ee(e,t,ee,te,ae,ie){var se,le,ne,oe,de,ce,re,ve;const ue=(0,i.up)("q-btn"),_e=(0,i.up)("q-markup-table");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",l,[(0,i.Wm)(ue,{color:"primary",icon:"print",label:"Imprimir",onClick:e.imprimir},null,8,["onClick"])]),(0,i._)("div",n,[(0,i._)("div",o,[(0,i._)("div",d,(0,s.zw)(null===(se=e.enc)||void 0===se?void 0:se.Corr),1),(0,i._)("img",{src:a(76209)("./"+e.getLogo()),width:"100",class:""},null,8,c),r,(0,i._)("div",v,[(0,i._)("div",u,"Orden No. "+(0,s.zw)(e.numeroOrden),1)]),(0,i._)("div",_,[(0,i._)("div",b,[m,(0,i._)("div",p,(0,s.zw)(null===(le=e.enc)||void 0===le?void 0:le.Vendedor),1),w,(0,i._)("div",h,(0,s.zw)(null===(ne=e.enc)||void 0===ne?void 0:ne.Nombre),1),E,(0,i._)("div",f,(0,s.zw)(null===(oe=e.ordenEnc)||void 0===oe?void 0:oe.TELEFONO),1),D,(0,i._)("div",O,(0,s.zw)(null===(de=e.ordenEnc)||void 0===de?void 0:de.DIRECCION_INSTALACION),1),x,(0,i._)("div",y,(0,s.zw)(null===(ce=e.enc)||void 0===ce?void 0:ce.Observacion),1)])]),(0,i._)("div",{class:(0,s.C_)(["row col-5 justify-center",e.$q.screen.xs||e.$q.screen.sm?"":"q-pt-xl"])},[(0,i._)("div",k,"Fecha Generado: "+(0,s.zw)(e.fecha),1),(0,i._)("div",N,"Fecha Inicio Instalación: "+(0,s.zw)(e.fechaInstalacion),1),(0,i._)("div",I,"Fecha Final Instalación: "+(0,s.zw)(e.fechaFinInstalacion),1),(0,i._)("div",q,"Items: "+(0,s.zw)(e.detalles.length),1),(0,i._)("div",L,"Estado: "+(0,s.zw)("S"===(null===(re=e.ordenEnc)||void 0===re?void 0:re.ESTADO_ORDEN)?"PROCESANDO":"T"===(null===(ve=e.ordenEnc)||void 0===ve?void 0:ve.ESTADO_ORDEN)?"TERMINADO":"NO-STATUS"),1)],2)]),(0,i._)("div",{class:(0,s.C_)(["row",e.$q.screen.xs||e.$q.screen.sm?"":"q-mt-md"])},[g,(0,i.Wm)(_e,{class:"fill-black",flat:"",square:"",bordered:"",separator:"cell",id:"tabladata"},{default:(0,i.w5)((()=>[P,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.detallesOrden,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",null,(0,s.zw)(t+1),1),(0,i._)("td",T,[(0,i._)("div",R,(0,s.zw)(e.DESCRIPCION),1)]),(0,i._)("td",z,[(0,i._)("div",C,(0,s.zw)(e.NOMBRE),1)]),(0,i._)("td",H,[(0,i._)("div",M,(0,s.zw)(e.HORAS),1)])])))),128))])])),_:1}),S,(0,i.Wm)(_e,{class:"fill-black",flat:"",square:"",bordered:"",separator:"cell",id:"tabladata"},{default:(0,i.w5)((()=>[F,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.detalles,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",null,(0,s.zw)(t+1),1),(0,i._)("td",Y,[(0,i._)("div",A,(0,s.zw)(e.Barra),1)]),(0,i._)("td",B,[(0,i._)("div",Z,(0,s.zw)(e.Descripcion),1)]),(0,i._)("td",j,[(0,i._)("div",Q,(0,s.zw)(e.DescripcionLote),1)]),(0,i._)("td",$,[(0,i._)("div",V,(0,s.zw)(e.Cantidad),1)]),(0,i._)("td",U,[(0,i._)("div",W," Q. "+(0,s.zw)(e.Precio.toFixed(2)),1)])])))),128))])])),_:1}),(0,i._)("div",K,[G,(0,i._)("div",X,"Q. "+(0,s.zw)(e.subTotal.toFixed(2)),1)])],2),J])],64)}var te=a(34136),ae=a(68651),ie=a(60499),se=a(54170),le=a(47506),ne=a(32222),oe=a(67825),de=a(75700),ce=a(78618),re=a(37655),ve=a(18910),ue=(a(17779),function(e,t,a,i){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function n(e){try{d(i.next(e))}catch(t){l(t)}}function o(e){try{d(i["throw"](e))}catch(t){l(t)}}function d(e){e.done?a(e.value):s(e.value).then(n,o)}d((i=i.apply(e,t||[])).next())}))});const _e=(0,i.aZ)({setup(){const e=(0,ie.iH)(null),t=(0,ie.iH)(null),a=(0,ie.iH)(""),i=(0,ie.iH)(""),s=(0,ie.iH)(""),l=(0,ie.iH)([]),n=(0,ie.iH)([]),o=(0,ie.iH)(0),d=(0,ie.iH)(0),c=(0,ie.iH)(0),r=(0,ie.iH)([]),v=(0,ve.tv)(),u=()=>ue(this,void 0,void 0,(function*(){if(yield te.api.get(te.endPoints.ORDENES_PENDIENTES+"NumeroOrden",{params:{pedido:o.value}}).then((e=>ue(this,void 0,void 0,(function*(){if(!e.data.Orden.NUMERO_ORDEN)return(0,ae.x2)("No se encontro la Orden de Instalacion"),(0,re.E)(),yield(0,ce._R)(1e3),window.close(),void(le.ZP.is.nativeMobile&&v.back());d.value=e.data.Orden.NUMERO_ORDEN,yield p()})))),yield te.api.get(te.endPoints.ORDENES_PENDIENTES+o.value).then((l=>ue(this,void 0,void 0,(function*(){if(!l.data.Pedido)return(0,ae.x2)("No existe el pedido"),(0,re.E)(),yield(0,ce._R)(1e3),window.close(),void(le.ZP.is.nativeMobile&&v.back());e.value=l.data.Pedido,t.value=l.data.Orden;let n=l.data.Fecha.FECHA_INSTALACION,o=l.data.FechaFin.FECHA_FIN_INSTALACION;a.value=se.ZP.formatDate(e.value.Fecha,"DD-MMMM-YYYY"),i.value=se.ZP.formatDate(n,"DD-MMMM-YYYY HH:mm")+" hrs",s.value=se.ZP.formatDate(o,"DD-MMMM-YYYY HH:mm")+" hrs",yield _()})))).catch((e=>{(0,ae.L1)(e)})),null!==e.value)return r.value=yield(0,de.E)("Cotizacion"),void(0,re.E)();yield(0,ce._R)(1e3),(0,re.E)(),window.close(),le.ZP.is.nativeMobile&&v.back(),window.close()})),_=()=>ue(this,void 0,void 0,(function*(){yield te.api.get(te.endPoints.PEDIDODET+o.value).then((e=>{l.value=e.data.Detalles,c.value=0,l.value.map((e=>{c.value+=e.Subtotal}))})).catch((e=>{(0,ae.L1)(e)}))})),b=()=>{var e="Orden_"+d.value.toString();document.title=e,le.ZP.is.nativeMobile&&cordova.plugins["printer"].print(null,{name:e}),window.print()},m=()=>{(0,ne.PX)("tabladata")},p=()=>ue(this,void 0,void 0,(function*(){yield te.api.get(te.endPoints.ORDENES_PENDIENTES+"VOrdenDet",{params:{pedido:o.value,orden:d.value}}).then((e=>{n.value=e.data.Ordenes})).catch((e=>{(0,ae.x2)(e)}))}));return{ordenEnc:t,getData:u,getLogo:oe.R7,imprimir:b,convert:m,numeroPedido:o,numeroOrden:d,enc:e,fecha:a,detalles:l,subTotal:c,textos:r,getOrdenDet:p,detallesOrden:n,fechaInstalacion:i,fechaFinInstalacion:s}},created(){this.numeroPedido=parseInt(this.$router.currentRoute.value.params.Pedido.toString()),this.getData()}});var be=a(11639),me=a(68879),pe=a(66933),we=a(84277),he=a(69984),Ee=a.n(he);const fe=(0,be.Z)(_e,[["render",ee]]),De=fe;Ee()(_e,"components",{QBtn:me.Z,QMarkupTable:pe.Z,QTable:we.Z})}}]);