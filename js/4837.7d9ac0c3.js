"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[4837],{94837:(e,o,t)=>{t.r(o),t.d(o,{default:()=>L});var a=t(59835),n=t(86970);const l={class:"row"},i=(0,a.Uk)("Buscar Correlativo"),r={class:"row items-center justify-end"};function s(e,o,t,s,c,d){const u=(0,a.up)("q-space"),m=(0,a.up)("q-btn"),p=(0,a.up)("q-separator"),C=(0,a.up)("q-td"),f=(0,a.up)("q-icon"),h=(0,a.up)("q-input"),v=(0,a.up)("q-checkbox"),w=(0,a.up)("q-tooltip"),b=(0,a.up)("q-date"),g=(0,a.up)("q-popup-proxy"),y=(0,a.up)("q-table"),k=(0,a.up)("q-page"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(k,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(u),(0,a.Wm)(m,{onClick:e.buscarCorrelativo,color:"primary",icon:"search"},{default:(0,a.w5)((()=>[i])),_:1},8,["onClick"])]),(0,a.Wm)(p,{vertical:"",inset:""}),(0,a.Wm)(y,{style:{height:"75vh"},title:"Clientes",rows:e.clientes,loading:e.isLoading,columns:e.cols,"row-key":"name","rows-per-page-options":[0],dense:""},{"body-cell-contrato":(0,a.w5)((o=>[(0,a.Wm)(C,{props:o},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{loading:e.isLoading&&o.row.Cliente==e.selectedCliente,size:"md",outline:"",color:"indigo",icon:"description",onClick:t=>e.generarContrato(o.row),label:"Contrato"},null,8,["loading","onClick"])])),_:2},1032,["props"])])),"top-left":(0,a.w5)((()=>[(0,a.Wm)(h,{autofocus:"",borderless:"",dense:"",debounce:"500",clearable:"",modelValue:e.nombreCliente,"onUpdate:modelValue":o[0]||(o[0]=o=>e.nombreCliente=o),placeholder:"Buscar Cliente",class:"fit q-ml-sm"},{append:(0,a.w5)((()=>[(0,a.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-gratis":(0,a.w5)((o=>[(0,a.Wm)(C,{props:o},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:o.row.Gratis,"onUpdate:modelValue":e=>o.row.Gratis=e,dense:"",onClick:t=>e.cambiarEstado(o.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1032,["props"])])),"body-cell-Comentario":(0,a.w5)((e=>[(0,a.Wm)(C,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{name:"message",size:"sm"}),e.row.Comentario?((0,a.wg)(),(0,a.j4)(w,{key:0,class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.Comentario),1)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-fecha":(0,a.w5)((e=>[(0,a.Wm)(C,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{filled:"",modelValue:e.row.Fecha,"onUpdate:modelValue":o=>e.row.Fecha=o,mask:"date",rules:["date"],dense:"","hide-bottom-space":""},{append:(0,a.w5)((()=>[(0,a.Wm)(f,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:e.row.Fecha,"onUpdate:modelValue":o=>e.row.Fecha=o},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.wy)((0,a.Wm)(m,{label:"Close",color:"primary",flat:""},null,512),[[W]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["rows","loading","columns"])])),_:1})}var c=t(34136),d=t(88656),u=t(68651),m=t(60499),p=t(54170),C=function(e,o,t,a){function n(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,l){function i(e){try{s(a.next(e))}catch(o){l(o)}}function r(e){try{s(a["throw"](e))}catch(o){l(o)}}function s(e){e.done?t(e.value):n(e.value).then(i,r)}s((a=a.apply(e,o||[])).next())}))};const f=(0,a.aZ)({setup(){const e=(0,m.iH)([]),o=(0,m.iH)(""),t=(0,m.iH)(!1);let a=(0,m.iH)(0);const n=()=>C(this,void 0,void 0,(function*(){const e=yield(0,u.UA)("Ingrese el numero de Correlativo","","number");null!==e&&Number(e)?yield c.api.get(c.endPoints.GYMCLIENTES+"CorrelativoReimpresion",{params:{correlativo:e}}).then((o=>C(this,void 0,void 0,(function*(){const t=o.data.CODIGO_CLIENTE;yield(0,d.x)(t,e)})))).catch((e=>{(0,u.L1)(e)})):(0,u.x2)("Debe Ingresar el numero de Correlativo")})),l=[{name:"cliente",label:"Cliente",field:"Cliente",align:"center"},{name:"nombre",label:"Nombre",field:"Nombre",align:"center"},{name:"fecha",label:"Fecha vence",field:"Fecha",align:"center"},{name:"gratis",label:"Entra Gratis",field:"Gratis",align:"center"},{name:"Comentario",label:"Comentario",field:"Comentario",align:"center"},{name:"FechaUltimoContrato",label:"Fecha de Contrato",field:"FechaUltimoContrato",align:"center",format:(e,o)=>null===e?"":`${p.ZP.formatDate(e,"DD-MMMM-YYYY")}`},{name:"contrato",label:"Contrato",field:"contrato",align:"center"}],i=()=>C(this,void 0,void 0,(function*(){var t;let a={rowsPerPage:100,nombre:null!==(t=o.value)&&void 0!==t?t:"",nit:""};yield c.api.get(c.endPoints.CLIENTE+"NombreGym",(0,c.configApi)({queryParams:a})).then((o=>{let t=[]=o.data.Clientes;e.value=t})).catch((e=>{(0,u.L1)(e)}))})),r=e=>C(this,void 0,void 0,(function*(){t.value=!0;let o="";o=e.Gratis?"A":"I";let a=new Date(e.Fecha);if("A"===o){if(null===e.Fecha)return(0,u.x2)("Debe seleccionar la fecha"),e.Gratis=!e.Gratis,void(t.value=!1);if("Invalid Date"===a.toString())return(0,u.x2)("La fecha no es valida"),e.Gratis=!e.Gratis,void(t.value=!1)}else a=null;const n=yield(0,u.UA)("Ingrese un Comentario","","text");if(null===n||!String(n))return(0,u.x2)("Debe Ingresar un Comentario"),t.value=!1,void(e.Gratis=!e.Gratis);yield c.api.post(c.endPoints.CLIENTE+"CambiaEstadoGym",a,(0,c.configApi)({queryParams:{codigo:e.Cliente,estado:o,comentario:n}})).then((e=>C(this,void 0,void 0,(function*(){yield i(),(0,u.dF)("Guardado correctamente")})))).catch((e=>C(this,void 0,void 0,(function*(){yield i(),(0,u.L1)(e)})))),t.value=!1})),s=e=>C(this,void 0,void 0,(function*(){a.value=e.Cliente,t.value=!0,yield c.api.post(c.endPoints.GYMCLIENTES+"contratoInfluencer",null,{params:{CodCli:e.Cliente}}).then((e=>{})).catch((e=>{(0,u.L1)(e)})),yield(0,d.x)(e.Cliente),yield i(),t.value=!1}));return{getClientes:i,cambiarEstado:r,generarContrato:s,clientes:e,cols:l,nombreCliente:o,isLoading:t,selectedCliente:a,buscarCorrelativo:n}},created(){this.getClientes()},watch:{nombreCliente(){this.getClientes()}}});var h=t(11639),v=t(69885),w=t(90136),b=t(68879),g=t(50926),y=t(84277),k=t(67220),W=t(13119),G=t(22857),q=t(11221),Z=t(46858),_=t(52765),I=t(92952),V=t(62146),x=t(69984),E=t.n(x);const P=(0,h.Z)(f,[["render",s]]),L=P;E()(f,"components",{QPage:v.Z,QSpace:w.Z,QBtn:b.Z,QSeparator:g.Z,QTable:y.Z,QTd:k.Z,QInput:W.Z,QIcon:G.Z,QCheckbox:q.Z,QTooltip:Z.Z,QPopupProxy:_.Z,QDate:I.Z}),E()(f,"directives",{ClosePopup:V.Z})}}]);