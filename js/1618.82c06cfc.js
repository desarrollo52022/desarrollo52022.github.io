"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[1618],{21618:(e,l,a)=>{a.r(l),a.d(l,{default:()=>le});var o=a(59835),i=a(86970);const t={class:"row"},n={class:"q-ma-sm"},r={class:"row items-start q-gutter-md justify-center"},s=(0,o.Uk)(" Doble click para continuar al login "),u={class:"fit",style:{overflow:"hidden"}},d=(0,o._)("div",{class:"col-12"},[(0,o._)("span",{class:"q-ml-sm"},"Selecciones las series a configurar")],-1),c=(0,o._)("div",{class:"col-12 row"},[(0,o._)("div",{class:"col"},"Serie Ticket"),(0,o._)("div",{class:"col"},"Serie Credito"),(0,o._)("div",{class:"col"},"Serie Contado")],-1),p={class:"col-12 row"},v={class:"col"},m={class:"col"},g={class:"col"};function f(e,l,f,b,w,C){const h=(0,o.up)("q-space"),S=(0,o.up)("q-btn"),_=(0,o.up)("q-toolbar-title"),k=(0,o.up)("q-toolbar"),q=(0,o.up)("q-img"),y=(0,o.up)("q-tab"),W=(0,o.up)("q-tabs"),Z=(0,o.up)("q-header"),Q=(0,o.up)("q-tooltip"),E=(0,o.up)("q-icon"),H=(0,o.up)("q-avatar"),I=(0,o.up)("q-item-section"),L=(0,o.up)("q-item-label"),V=(0,o.up)("q-item"),P=(0,o.up)("q-separator"),T=(0,o.up)("q-card-section"),x=(0,o.up)("q-responsive"),A=(0,o.up)("q-card"),U=(0,o.up)("q-page-container"),D=(0,o.up)("q-select"),j=(0,o.up)("q-card-actions"),z=(0,o.up)("q-dialog"),N=(0,o.up)("q-layout"),R=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(N,{view:"hHh Lpr fFf"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{elevated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o._)("div",t,[(0,o._)("span",null," Empresas "+(0,i.zw)(e.empresaSelect)+"-"+(0,i.zw)(e.bodegaSelect),1),(0,o.Wm)(h),(0,o.Wm)(S,{color:"danger",label:"Printer Software",onClick:e.download},null,8,["onClick"]),(0,o.Wm)(S,{color:"danger",label:"admin",onClick:e.goAdmin},null,8,["onClick"])])])),_:1})])),_:1}),(0,o.Wm)(W,{modelValue:e.empresaSelect,"onUpdate:modelValue":l[0]||(l[0]=l=>e.empresaSelect=l),"indicator-color":"yellow"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.empresas,(e=>((0,o.wg)(),(0,o.j4)(y,{key:e.Empresa,name:e.Empresa,label:e.Empresa},{default:(0,o.w5)((()=>[null!=e.Logo?((0,o.wg)(),(0,o.j4)(q,{key:0,src:a(76209)("./"+e.Logo),style:{height:"70px",width:"125px"},fit:"contain","spinner-color":"primary","spinner-size":"82px"},null,8,["src"])):(0,o.kq)("",!0)])),_:2},1032,["name","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o._)("pre",null,"          "+(0,i.zw)(e.errorInit)+"\r\n        ",1)]),(0,o._)("div",n,[(0,o._)("div",r,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.bodegas,(l=>((0,o.wg)(),(0,o.j4)(A,{bordered:"",key:l,class:(0,i.C_)(["cursor-pointer q-hoverable",e.bodegaSelect===l.Codigo?"shadow-24 bg-grey":""]),onClick:a=>e.bodegaClick(l.Codigo),onDblclick:a=>e.bodegaDblClick(l)},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{anchor:"top right",self:"top right",class:"text-body2"},{default:(0,o.w5)((()=>[s])),_:1}),(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{class:"bg-grey"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{name:"apartment"})])),_:1})])),_:1}),(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(l.Codigo),1)])),_:2},1024),(0,o.Wm)(L,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.empresaSelect),1)])),_:1})])),_:2},1024)])),_:2},1024),(0,o.Wm)(P),(0,o.Wm)(x,{ratio:1.4},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"border-radius-inherit flex flex-center bg-grey-1"},{default:(0,o.w5)((()=>[(0,o._)("div",u,(0,i.zw)(l.Nombre),1)])),_:2},1024)])),_:2},1032,["ratio"])])),_:2},1032,["class","onClick","onDblclick"])))),128))])])])),_:1}),(0,o.Wm)(z,{modelValue:e.setSerie,"onUpdate:modelValue":l[4]||(l[4]=l=>e.setSerie=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"row items-center"},{default:(0,o.w5)((()=>[d,c,(0,o._)("div",p,[(0,o._)("div",v,[(0,o.Wm)(D,{modelValue:e.serie,"onUpdate:modelValue":l[1]||(l[1]=l=>e.serie=l),options:e.series,label:"Serie Ticket",filled:"","option-value":"Serie","option-label":"Serie","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,o._)("div",m,[(0,o.Wm)(D,{modelValue:e.serieCre,"onUpdate:modelValue":l[2]||(l[2]=l=>e.serieCre=l),options:e.seriesCre,label:"Serie Credito",filled:"","option-value":"Serie","option-label":"Serie","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,o._)("div",g,[(0,o.Wm)(D,{modelValue:e.serieCon,"onUpdate:modelValue":l[3]||(l[3]=l=>e.serieCon=l),options:e.seriesCon,label:"Serie Contado",filled:"","option-value":"Serie","option-label":"Serie","emit-value":"","map-options":""},null,8,["modelValue","options"])])])])),_:1}),e.loadingSeries?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(j,{key:0,align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(S,{flat:"",label:"Cancelar",color:"primary"},null,512),[[R]]),(0,o.wy)((0,o.Wm)(S,{flat:"",label:"Ir al login",color:"primary",onClick:e.goLogin},null,8,["onClick"]),[[R]])])),_:1}))])),_:1})])),_:1},8,["modelValue"])])),_:1})}var b=a(34136),w=a(78618),C=a(67825),h=a(68651),S=a(37655),_=a(1810),k=a(60499),q=a(18910),y=function(e,l,a,o){function i(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,t){function n(e){try{s(o.next(e))}catch(l){t(l)}}function r(e){try{s(o["throw"](e))}catch(l){t(l)}}function s(e){e.done?a(e.value):i(e.value).then(n,r)}s((o=o.apply(e,l||[])).next())}))};const W=(0,o.aZ)({setup(){const e=(0,_.i)(),l=(0,k.iH)([]),a=(0,k.iH)(""),o=(0,k.iH)(""),i=(0,k.iH)([]),t=(0,k.iH)([]),n=(0,k.iH)([]),r=(0,k.iH)(!1),s=(0,k.iH)(null),u=(0,k.iH)(null),d=(0,k.iH)(null),c=(0,q.tv)(),p=(0,k.iH)(!1),v=(0,k.iH)(null),m=()=>y(this,void 0,void 0,(function*(){(0,S.Q)("Cargando empresas disponibles"),yield b.api.get(b.endPoints.EMPRESA).then((e=>{l.value=e.data.Empresas})).catch((e=>{(0,h.L1)(e)})).finally((()=>{(0,S.E)(),a.value=(0,C.oc)()}))})),g=e=>y(this,void 0,void 0,(function*(){e<=0||(o.value=e,p.value=!0,yield b.api.get(b.endPoints.SERIES,(0,b.configApi)({queryParams:{bodega:e}})).then((e=>{var l,a,o,r,c,p,v=(0,w.vM)(e.data.Series,"Tipo");i.value=null!==(a=null===(l=v.find((e=>"FACT"===e.key)))||void 0===l?void 0:l.values.map((e=>e["Serie"])))&&void 0!==a?a:[],t.value=null!==(r=null===(o=v.find((e=>"FCRE"===e.key)))||void 0===o?void 0:o.values.map((e=>e["Serie"])))&&void 0!==r?r:[],n.value=null!==(p=null===(c=v.find((e=>"FCON"===e.key)))||void 0===c?void 0:c.values.map((e=>e["Serie"])))&&void 0!==p?p:[],1===i.value.length&&(s.value=i.value[0]),1===t.value.length&&(u.value=t.value[0]),1===n.value.length&&(d.value=n.value[0])})).catch((e=>{(0,h.L1)(e)})),p.value=!1)})),f=e=>{s.value=null,u.value=null,d.value=null,r.value=!0,o.value=e.Codigo,(0,C.yn)(e.Nombre)},W=()=>{let e=(0,C.oc)();if(null!==e)if(null!==s.value){const e="/"+a.value+"/LOGIN/"+o.value+"/"+s.value;(0,C.uK)(u.value),(0,C.jq)(d.value),c.push(e)}else{const e="/"+a.value+"/LOGIN/"+o.value+"/"+d.value;(0,C.uK)(u.value),(0,C.jq)(d.value),c.push(e)}else(0,h.x2)("Sin empresa seleccionada")},Z=()=>{let e=(0,C.Zf)(),l=(0,C.dS)(),i=(0,C.oc)();if(null===e||(o.value=e,null===l||(s.value=l,null===i||""===i)))m();else{a.value=i;const e="/"+a.value+"/LOGIN/"+o.value+"/"+s.value;c.push(e)}},Q=()=>{Z();let l="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,\n                    width=0,height=0,left=-1000,top=-1000";b.api.get(b.endPoints.EMPRESA).then((l=>{e.setEvent(),Z()})).catch((a=>{alert("Acceda a continuar al sitio");const o=window.open(b.api.defaults.baseURL,"about:blank",l);if(o)var i=setInterval((function(){o.closed&&(clearInterval(i),e.setEvent(),Z())}),500)}))},E=()=>{c.push("/LOGIN")},H=()=>{var e=document.createElement("a");e.href=b.api.defaults.baseURL+"/Public/PrinterServer.exe",e.setAttribute("download","PrinterServer.exe"),e.click()};return{download:H,getEmpresas:m,bodegaClick:g,bodegaDblClick:f,goLogin:W,validarDatos:Z,aceptarCertificado:Q,goAdmin:E,getPreview:C.Qe,empresas:l,empresaSelect:a,bodegaSelect:o,series:i,seriesCre:t,seriesCon:n,setSerie:r,serie:s,serieCre:u,serieCon:d,installer:e,loadingSeries:p,errorInit:v}},created(){this.aceptarCertificado()},watch:{empresaSelect(e){(0,C._q)(null!==e&&void 0!==e?e:"")}},computed:{bodegas(){var e=this.empresas.find((e=>e.Empresa===this.empresaSelect));let l=[];return void 0!==e&&(l=e.Bodegas),l.sort(((e,l)=>e.Codigo-l.Codigo)),l}}});var Z=a(11639),Q=a(20249),E=a(16602),H=a(51663),I=a(81973),L=a(90136),V=a(68879),P=a(47817),T=a(70900),x=a(91487),A=a(12133),U=a(44458),D=a(46858),j=a(490),z=a(76749),N=a(61357),R=a(22857),O=a(33115),F=a(50926),G=a(30705),K=a(63190),M=a(32074),B=a(26384),Y=a(11821),J=a(62146),X=a(69984),$=a.n(X);const ee=(0,Z.Z)(W,[["render",f]]),le=ee;$()(W,"components",{QLayout:Q.Z,QHeader:E.Z,QToolbar:H.Z,QToolbarTitle:I.Z,QSpace:L.Z,QBtn:V.Z,QTabs:P.Z,QTab:T.Z,QImg:x.Z,QPageContainer:A.Z,QCard:U.Z,QTooltip:D.Z,QItem:j.Z,QItemSection:z.Z,QAvatar:N.Z,QIcon:R.Z,QItemLabel:O.Z,QSeparator:F.Z,QResponsive:G.Z,QCardSection:K.Z,QDialog:M.Z,QSelect:B.Z,QCardActions:Y.Z}),$()(W,"directives",{ClosePopup:J.Z})}}]);