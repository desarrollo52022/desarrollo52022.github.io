(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[3064],{75700:(e,o,t)=>{"use strict";t.d(o,{E:()=>n});var l=t(34136),a=t(78618),i=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const n=e=>i(void 0,void 0,void 0,(function*(){let o=[];const t=[];return yield l.api.get(l.endPoints.TEXTOS,(0,l.configApi)({queryParams:{tipo:e}})).then((e=>{(0,a.vM)(e.data.Textos,"Orden");o=e.data.Textos})).catch((e=>{})),o.sort(((e,o)=>e.Orden-o.Orden)).forEach((e=>{t.push(e.Texto)})),t}))},32222:(e,o,t)=>{"use strict";t.d(o,{Bx:()=>g,EW:()=>m,Gn:()=>h,PX:()=>w,UC:()=>d,Ue:()=>v,jL:()=>f});var l=t(4527),a=t(34136),i=t(78618),n=t(67825),r=t(68651),s=t(17779),c=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const d=(e,o,t=!0)=>c(void 0,void 0,void 0,(function*(){let a=new l.ZP({format:o});"letter"===o?a=new l.ZP({orientation:"p",unit:"pt",format:"letter"}):"ticket"===o&&(a=new l.ZP({orientation:"p",unit:"pt",format:[204,e.offsetHeight]}));const i=e.getElementsByTagName("div"),n=e.offsetHeight;let r=e.offsetHeight,c=1;if(s.log("tamaño",n),"letter"===o)for(let o=0;o<i.length;o++){const t=i[o],l=i[o].getBoundingClientRect();let a=!0;if(l.bottom>r||l.top<0){const d=t.firstElementChild;if(((null===d||void 0===d?void 0:d.className.includes("table"))||"Table"===(null===d||void 0===d?void 0:d.nodeName))&&(a=!1),a){const t=document.createElement("span"),a=document.createTextNode("---"+r.toString());t.appendChild(a),t.style.setProperty("width",e.offsetWidth.toString()+"px"),t.style.setProperty("height","1px"),t.style.setProperty("position","absolute"),t.style.setProperty("top",r.toString()+"px"),t.style.setProperty("left","0px"),t.style.setProperty("z-index","10"),t.style.setProperty("background-color","red"),t.classList.add("miClaseParaEliminar"),e.appendChild(t),s.log(i[o]);let n=50;if(l.bottom<0)n+=Math.abs(l.bottom);else{const e=r-l.top;n+=e}const c=n+"px";i[o].style.setProperty("margin-top",c)}c++,r=n*c}}e.style.setProperty("border","none");const d=e.getElementsByClassName("miClaseParaEliminar");for(let e=0;e<d.length;e++){const o=d[e];o.style.setProperty("visibility","hidden")}const u=a.html(e).outputPdf("dataurlstring");let p=null;yield u.then((e=>{let o="";o=e,t&&(o=o.replace("data:application/pdf;filename=generated.pdf;base64,","")),p=o})).catch((e=>{s.log(e)})),e.style.setProperty("border","dotted");for(let e=0;e<d.length;e++){const o=d[e];o.style.setProperty("visibility","visible")}return p})),u=(e,o)=>c(void 0,void 0,void 0,(function*(){let t=new l.ZP({format:o});"letter"===o?t=new l.ZP({orientation:"p",unit:"pt",format:"letter"}):"ticket"===o&&(t=new l.ZP({orientation:"p",unit:"pt",format:[204,e.offsetHeight]}));const a=e.getElementsByTagName("div"),i=e.offsetHeight;let n=e.offsetHeight,r=1;if("letter"===o)for(let o=0;o<a.length;o++){const t=a[o],l=a[o].getBoundingClientRect();let c=!0;if(l.bottom>n||l.top<0){const d=t.firstElementChild;if((null===d||void 0===d?void 0:d.className.includes("table"))||"Table"===(null===d||void 0===d?void 0:d.nodeName)){s.log("istable"),c=!1;const e=d.getElementsByTagName("table")[0];p(e,n)}if(c){const t=document.createElement("span"),i=document.createTextNode("---"+n.toString());t.appendChild(i),t.style.setProperty("width","100%"),t.style.setProperty("height","1px"),t.style.setProperty("position","absolute"),t.style.setProperty("top",n.toString()+"px"),t.style.setProperty("left","0px"),t.style.setProperty("z-index","10"),t.style.setProperty("background-color","red"),t.classList.add("miClaseParaEliminar"),e.appendChild(t),s.log(a[o]);let r=50;if(l.bottom<0)r+=Math.abs(l.bottom);else{const e=n-l.top;r+=e}const c=r+"px";a[o].style.setProperty("margin-top",c)}r++,n=i*r}}e.style.setProperty("border","none");const c=e.getElementsByClassName("miClaseParaEliminar");for(let e=0;e<c.length;e++){const o=c[e];o.style.setProperty("visibility","hidden")}const d=t.html(e).outputPdf("bloburl");let u=null;yield d.then((e=>{u=e.toString()})).catch((e=>{s.log(e)})),e.style.setProperty("border","dotted");for(let e=0;e<c.length;e++){const o=c[e];o.style.setProperty("visibility","visible")}return u})),p=(e,o)=>{const t=e.getElementsByTagName("tr"),l=e.getElementsByTagName("th");s.log(l.length);for(let a=0;a<t.length;a++){const i=t[a],n=i.getBoundingClientRect();if(n.bottom>o||n.top<0){s.log(i,i.cells.length);const o=e.insertRow(a),t=o.insertCell(0);t.colSpan=l.length;const n=e.insertRow(a),r=n.insertCell(0);r.colSpan=l.length,r.style.setProperty("border-bottom","white");break}}},m=(e,o,{docBase64:t,urlDownload:l})=>c(void 0,void 0,void 0,(function*(){if(null===e)return void(0,r.x2)("Debe enviar la impresora");let i={printer:e,documento:t,filename:o};return void 0===t&&(i={printer:e,url:l,filename:o}),a.api.post(n.Rz,i)})),v=(e,o,t,l)=>c(void 0,void 0,void 0,(function*(){s.log("creando b64");const a=document.getElementById(e);if(null===a)return void(0,r.x2)("No existe elemento con id"+e+". Contacte al administrador");if(null===o)return void(0,r.x2)("No se envio la impresora. Contacte al administrador");const i=yield d(a,l);return s.log(i),m(o,t,{docBase64:i})})),g=(e,o,t=!1,l=!1,a="Documento",i=!1)=>c(void 0,void 0,void 0,(function*(){const a=document.getElementById(e);if(null===a)return void(0,r.x2)("No existe el elemento para convertir, contacte al administrador");const n=yield u(a,o),c="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,\n  width=100,height=100,left=0,top=0";if(t){const e=window.open(n,"test",c);i&&(null===e||void 0===e||e.resizeTo(screen.availWidth,screen.availHeight)),l&&(null===e||void 0===e||e.print())}else window.location=n,s.log("wn loc"+window.location),window.moveTo(0,0),window.resizeTo(screen.availWidth,screen.availHeight),l&&(null===window||void 0===window||window.print())})),f=(e,o,t=!1,l=!1)=>c(void 0,void 0,void 0,(function*(){const t=document.getElementById(e);"letter"===o&&(null===t||void 0===t||t.classList.remove("report-letter-p"),null===t||void 0===t||t.classList.add("report-letter")),"ticket"===o&&(null===t||void 0===t||t.classList.remove("report-ticket-p"),null===t||void 0===t||t.classList.add("report-ticket")),yield(0,i._R)(500),window.moveTo(0,0),window.resizeTo(screen.availWidth,screen.availHeight),window.print()}));function w(e,o=""){const t="application/vnd.ms-excel",l=document.getElementById(e),a=null===l||void 0===l?void 0:l.outerHTML.replace(/ /g,"%20");o=o?o+".xls":"excel_data.xls";const i=document.createElement("a");document.body.appendChild(i),i.href="data:"+t+", "+a,i.download=o,i.click()}const h=function(){const e="data:application/vnd.ms-excel;base64,",o='\n    <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">\n      <meta charset="utf-8"/>\n      <head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e\n        <style>\n          {style}\n        </>\n      </head>\n      <body>\n        {table}\n      </body>\n    </html>',t=function(e){return window.btoa(unescape(encodeURIComponent(e)))},l=function(e,o){return e.replace(/{(\w+)}/g,(function(e,t){return o[t]}))};return function(a,i,n,r=""){a.nodeType||(a=document.getElementById(a));let s=null===a||void 0===a?void 0:a.outerHTML;const c=window.location.protocol+"//"+window.location.host+"/";s.includes("localhost")||(s=s.replace('src="','src="'+c));const d={worksheet:i||"Worksheet",table:s,style:r},u=document.createElement("a");u.href=e+t(l(o,d)),u.download=n,u.click()}}()},51745:(e,o,t)=>{"use strict";t.d(o,{Z:()=>n});var l=t(37674),a=t(67825);const i=(e=[],o,t)=>{var i,n;if((0,a.Gg)(o))return null;const r=new l.Z.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shadow-md bg-dark",arrow:!0,cancelIcon:{enabled:!0},when:{cancel:()=>{void 0!==t&&t()}}}});r.complete=()=>{void 0!==t&&(t(),r.hide())};let s=[];for(let l=0;l<e.length;l++){s=[],l>0&&s.push({text:"Anterior",classes:"shepherd-button-secondary",action:function(){return r.back()}}),l!=e.length-1?s.push({text:"Siguiente",classes:"shepherd-button-primary",action:function(){return r.next()}}):s.push({text:"Cerrar",classes:"shepherd-button-primary",action:function(){return void 0!==t&&t(),r.hide()}});const o=null!==(i=document.getElementById(e[l].id))&&void 0!==i?i:void 0;r.addStep({id:"step_"+l.toString(),title:e[l].titulo,text:e[l].texto,attachTo:{element:o,on:null!==(n=e[l].on)&&void 0!==n?n:"auto"},scrollTo:e[l].scroll,buttons:s})}return r},n=i},88656:(e,o,t)=>{"use strict";t.d(o,{x:()=>r});var l=t(34136),a=t(68651),i=t(72177),n=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const r=(e,o)=>n(void 0,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,1e3)));let t=[],r=!1,s="";if(yield l.api.get(l.endPoints.GYMCLIENTES+"datosCliente",{params:{codigoSpc:e,numContrato:null!==o&&void 0!==o?o:0}}).then((o=>n(void 0,void 0,void 0,(function*(){var i,n;const c=o.data.cliente;return null===c?((0,a.x2)("No Existen datos en sistema de Molinete para el cliente "+e.toString()),void(r=!1)):c.NUMERO_CONTRATO?(t=[{Numero_Contrato:c.NUMERO_CONTRATO?"No. "+c.NUMERO_CONTRATO.toString().padStart(5,"0"):"-",Fecha_Inicio:c.FECHA_INICIAL?new Date(c.FECHA_INICIAL).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"-",Codigo_SPC:c.CODIGO_SPC,Nit_Cliente:c.NIT,Numero_Factura:null!==(i=c.FACTURA_INICIAL)&&void 0!==i?i:"N/A",Nombre_Cliente:c.NOMBRE_SPC,Fecha_Nacimiento:"-",CUI_Cliente:c.DPI,Direccion_Cliente:c.DIRECCION_CLIENTE,Telefono_Cliente:c.TELEFONO_CLIENTE,Correo_Cliente:null!==(n=c.CORREO)&&void 0!==n?n:"-",Estado:"A"==c.ESTADO?"":"Anulado"}],yield new Promise((e=>setTimeout(e,500))),void(yield l.api.get(l.endPoints.GYMCLIENTES+"PdfContract",{}).then((e=>{s=e.data,r=!0})).catch((e=>{(0,a.L1)(e)})))):((0,a.x2)("No Existe ningun correlativo de Contrato para el cliente "+e.toString()),void(r=!1))})))).catch((e=>{(0,a.L1)(e)})),!r)return;const c={schemas:[{Numero_Contrato:{type:"text",position:{x:170.6,y:8.2},width:33.94,height:4.62,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Fecha_Inicio:{type:"text",position:{x:33.07,y:26.34},width:33.94,height:4.62,alignment:"left",fontSize:9,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Codigo_SPC:{type:"text",position:{x:106.25,y:26.02},width:31.03,height:4.62,alignment:"left",fontSize:10,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Numero_Factura:{type:"text",position:{x:166.99,y:25.97},width:38.7,height:4.62,alignment:"left",fontSize:9,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Nombre_Cliente:{type:"text",position:{x:37.94,y:41.47},width:164.38,height:4.62,alignment:"left",fontSize:9,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Fecha_Nacimiento:{type:"text",position:{x:39.57,y:48.62},width:27.05,height:4.62,alignment:"left",fontSize:9,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Nit_Cliente:{type:"text",position:{x:88.47,y:48.84},width:45.04,height:4.62,alignment:"left",fontSize:10,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Telefono_Cliente:{type:"text",position:{x:172.35,y:48.41},width:30.76,height:4.62,alignment:"left",fontSize:10,characterSpacing:0,lineHeight:1,fontName:"Roboto"},CUI_Cliente:{type:"text",position:{x:20.8,y:55.81},width:45.57,height:4.62,alignment:"left",fontSize:10,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Direccion_Cliente:{type:"text",position:{x:93.77,y:57.02},width:40.54,height:3.56,alignment:"left",fontSize:8,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Correo_Cliente:{type:"text",position:{x:173.09,y:55.97},width:33.13,height:4.62,alignment:"left",fontSize:8,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Estado:{type:"text",position:{x:80.44,y:114.03},width:59.24,height:12.61,fontSize:36,fontColor:"#fb0404",fontName:"Roboto"}},{Numero_Contrato:{type:"text",position:{x:170.6,y:8.2},width:33.94,height:4.62,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Estado:{type:"text",position:{x:80.44,y:114.03},width:59.24,height:12.61,fontSize:36,fontColor:"#fb0404",fontName:"Roboto"}},{Numero_Contrato:{type:"text",position:{x:170.6,y:8.2},width:33.94,height:4.62,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},Estado:{type:"text",position:{x:80.44,y:114.03},width:59.24,height:12.61,fontSize:36,fontColor:"#fb0404",fontName:"Roboto"}}],basePdf:`${s}`};let d=!0;try{const e=yield(0,i.Z)({template:c,inputs:t}),o=new Blob([e.buffer],{type:"application/pdf"});window.open(URL.createObjectURL(o)),d=!1}catch(u){u instanceof Error&&(0,a.x2)(u.message)}d||l.api.post(l.endPoints.GYMCLIENTES+"FechaUltimaImpresion",null,{params:{codigoSpc:e}}).catch((e=>{(0,a.x2)("Error al actualizar fecha de Ultima Impresion"),(0,a.L1)(e)}))}))},41355:(e,o,t)=>{"use strict";t.d(o,{Z:()=>u});var l,a=t(34136),i=t(67825),n=t(87127);const r=null===(l=a.api.defaults.baseURL)||void 0===l?void 0:l.replace("http://","").replace("https://","");let s="ws";try{"https:"===window.location.protocol&&(s="wss")}catch(p){}const c=s+"://"+r+"/Socket/ws.ashx",d=()=>{if(null!==(0,i.Xw)()){const e=new n.Z(c+"?empresa="+(0,i.oc)()+"&name=vendedor:"+(0,i.Xw)()+"&token="+(0,i.LP)(),[],{connectionTimeout:5e3,maxRetries:5,minReconnectionDelay:5e3});return e}return null},u={ws:d(),crear(){this.ws=d()}}},84619:(e,o,t)=>{"use strict";t.d(o,{z:()=>n});var l=t(81809),a=t(67825),i=t(60499);const n=(0,l.Q_)("Facturacion",(()=>{var e;const o=(0,i.iH)(""),t=(0,i.iH)(""),l=(0,i.iH)(""),n=(0,i.iH)(null!==(e=(0,a.Qe)())&&void 0!==e&&e),r=(0,a.dS)();return r&&(t.value=r),{nombreSucursal:o,serie:t,nombreVendedor:l,preview:n}}))},1810:(e,o,t)=>{"use strict";t.d(o,{i:()=>r});var l=t(81809),a=t(3833),i=t(60499),n=t(17779);const r=(0,l.Q_)("Installer",(()=>{const e=(0,i.iH)(null),o=(0,i.iH)(!1);null!==a.Z.getItem("Installer")?o.value=!1:o.value=!0;const t=()=>{},l=()=>{var t,l;n.log("instalar",e.value),null===(t=e.value)||void 0===t||t.prompt(),null===(l=e.value)||void 0===l||l.userChoice.then((e=>{"accepted"===e.outcome?(a.Z.set("Installer",!0),o.value=!1):n.log("User dismissed the install prompt")}))};return{setEvent:t,installApp:l,deferredPrompt:e,showInstaller:o}}))},7781:(e,o,t)=>{"use strict";t.d(o,{L:()=>r});var l=t(81809),a=t(78618),i=t(60499),n=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const r=(0,l.Q_)("menu",(()=>{const e=(0,i.iH)(!1),o=(0,i.iH)(!1);function t(){return n(this,void 0,void 0,(function*(){e.value=!0,yield(0,a._R)(50),e.value=!1}))}function l(){return n(this,void 0,void 0,(function*(){o.value=!0,yield(0,a._R)(50),o.value=!1}))}return{emitCargarUltimo:t,emitCargarNumero:l,cargarUltimo:e,cargarNumero:o}}))},66701:(e,o,t)=>{"use strict";t.d(o,{Z:()=>P});var l=t(59835),a=t(86970);function i(e,o,t,i,n,r){const s=(0,l.up)("q-spinner-gears"),c=(0,l.up)("q-input"),d=(0,l.up)("q-select"),u=(0,l.up)("q-form"),p=(0,l.up)("q-card-section"),m=(0,l.up)("q-btn"),v=(0,l.up)("q-card-actions"),g=(0,l.up)("q-card"),f=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(f,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,l.w5)((()=>[e.loading?((0,l.wg)(),(0,l.j4)(s,{key:0,color:"primary",size:"6em"})):((0,l.wg)(),(0,l.j4)(g,{key:1,class:"q-dialog-plugin"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{ref:"fCuponRef"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)(" Impresora para "+(0,a.zw)(null===(t=e.Tipo)||void 0===t?void 0:t.toString())+" ",1),e.manual?((0,l.wg)(),(0,l.j4)(c,{key:0,modelValue:e.printer,"onUpdate:modelValue":o[0]||(o[0]=o=>e.printer=o),type:"text",label:"Nombre de la impresora"},null,8,["modelValue"])):((0,l.wg)(),(0,l.j4)(d,{key:1,modelValue:e.printer,"onUpdate:modelValue":o[1]||(o[1]=o=>e.printer=o),options:e.printers,label:"Impresoras disponibles",filled:""},null,8,["modelValue","options"]))]})),_:1},512)])),_:1}),(0,l.Wm)(v,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"primary",label:"OK",onClick:e.onOKClick},null,8,["onClick"]),(0,l.Wm)(m,{color:"primary",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])])),_:1})])),_:1}))])),_:1},8,["onHide"])}var n=t(60499),r=t(50906),s=t(78618),c=t(67825),d=t(68651),u=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const p=(0,l.aZ)({name:"TarjetaDialog",props:{Tipo:(0,s.w3)(null)},emits:[...r.Z.emits],setup(e,{emit:o}){const{dialogRef:t,onDialogHide:l,onDialogOK:a,onDialogCancel:i}=(0,r.Z)(),s=(0,n.iH)(null),p=(0,n.iH)([]),m=(0,n.iH)(!1),v=(0,n.iH)(!1),g=()=>u(this,void 0,void 0,(function*(){var o,l;v.value=!0,null===(o=t.value)||void 0===o||o.show(),p.value=yield(0,c.VZ)(),0===(null===(l=s.value)||void 0===l?void 0:l.length)?m.value=!0:m.value=!1,"Ticket"===e.Tipo?s.value=(0,c.d4)():s.value=(0,c.LX)(),v.value=!1})),f=()=>{null!==s.value&&("Ticket"===e.Tipo?(0,c.Xf)(s.value):(0,c.cm)(s.value),(0,d.dF)("Impresora definida correctamente",{position:"top"})),a()};return{dialogRef:t,printer:s,printers:p,manual:m,loading:v,show:g,onDialogHide:l,onOKClick:f,onCancelClick:i}}});var m=t(11639),v=t(32074),g=t(9120),f=t(44458),w=t(63190),h=t(8326),b=t(13119),y=t(26384),C=t(11821),x=t(68879),_=t(69984),k=t.n(_);const q=(0,m.Z)(p,[["render",i]]),P=q;k()(p,"components",{QDialog:v.Z,QSpinnerGears:g.Z,QCard:f.Z,QCardSection:w.Z,QForm:h.Z,QInput:b.Z,QSelect:y.Z,QCardActions:C.Z,QBtn:x.Z})},97579:(e,o,t)=>{"use strict";t.d(o,{Z:()=>k});var l=t(59835),a=t(86970);function i(e,o,t,i,n,r){const s=(0,l.up)("q-input"),c=(0,l.up)("q-form"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-btn"),p=(0,l.up)("q-card-actions"),m=(0,l.up)("q-card"),v=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(v,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"q-dialog-plugin"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{ref:"fCuponRef"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cupon para "+(0,a.zw)(e.numeroPedido)+" ",1),(0,l.Wm)(s,{modelValue:e.cupon,"onUpdate:modelValue":o[0]||(o[0]=o=>e.cupon=o),type:"text",label:"Codigo de cupon",rules:[e=>!!e||"Debe ingresar el cupon"]},null,8,["modelValue","rules"]),(0,l.Wm)(s,{modelValue:e.pass,"onUpdate:modelValue":o[1]||(o[1]=o=>e.pass=o),type:"password",label:"Clave",rules:[e=>!!e||"Debe ingresar la clave"]},null,8,["modelValue","rules"])])),_:1},512)])),_:1}),(0,l.Wm)(p,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{color:"primary",label:"OK",onClick:e.onOKClick},null,8,["onClick"]),(0,l.Wm)(u,{color:"primary",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var n=t(60499),r=t(50906),s=t(19302),c=t(34136),d=t(68651),u=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const p=(0,l.aZ)({name:"CuponDialog",props:{numeroPedido:{type:Number,required:!0}},emits:[...r.Z.emits],setup(e,{emit:o}){(0,s.Z)(),(0,l.FN)();const{dialogRef:t,onDialogHide:a,onDialogOK:i,onDialogCancel:p}=(0,r.Z)(),m=(0,n.iH)(""),v=(0,n.iH)(""),g=()=>{var e;null===(e=t.value)||void 0===e||e.show()},f=(0,n.iH)(null),w=()=>u(this,void 0,void 0,(function*(){let o=!1,t={Cupon:m.value,Pedido:e.numeroPedido,Pass:v.value};return yield c.api.post(c.endPoints.CUPON,t).then((e=>{(0,d.dF)("Cupon de descuento aplicado correctamente"),o=!0})).catch((e=>{(0,d.L1)(e),o=!1})),o})),h=()=>u(this,void 0,void 0,(function*(){var e;if(yield null===(e=f.value)||void 0===e?void 0:e.validate()){if(!(yield w()))return;i()}}));return{dialogRef:t,cupon:m,pass:v,show:g,onDialogHide:a,onOKClick:h,onCancelClick:p,fCuponRef:f}}});var m=t(11639),v=t(32074),g=t(44458),f=t(63190),w=t(8326),h=t(13119),b=t(11821),y=t(68879),C=t(69984),x=t.n(C);const _=(0,m.Z)(p,[["render",i]]),k=_;x()(p,"components",{QDialog:v.Z,QCard:g.Z,QCardSection:f.Z,QForm:w.Z,QInput:h.Z,QCardActions:b.Z,QBtn:y.Z})},13695:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>pe});var l=t(59835),a=t(86970);const i={class:"row"},n={class:"col-12 q-mb-sm text-center notPrint"},r={class:"col-12 row justify-center"},s={key:0,class:"notPrint"},c={key:1,class:"report-ticket-p",id:"documentoCorte"},d={key:0,class:"text-subtitle1 text-center"},u={key:1,class:"text-subtitle1 text-center"},p={class:"row"},m={key:0},v=(0,l._)("th",{class:"break2Lines",style:{width:"4%"}},"Est",-1),g=(0,l._)("th",{class:"break2Lines",style:{width:"15%"}},"SERIE",-1),f=(0,l._)("th",{class:"break2Lines",style:{width:"18%","font-size":"7px!important"}},"NUMERO FACTURA",-1),w=(0,l._)("th",{class:"break2Lines",style:{width:"25%"}},"TOTAL",-1),h=(0,l._)("th",{class:"break2Lines",style:{width:"18%"}},"CUPÓN",-1),b=(0,l._)("th",{class:"break2Lines",style:{width:"16%"}},"DESCU- ENTO",-1),y={key:0,class:"break2Lines",style:{width:"16%"}},C={key:1},x=(0,l._)("th",{class:"break2Lines",style:{width:"4%"}},null,-1),_=(0,l._)("th",{class:"break2Lines",style:{width:"15%"}},null,-1),k=(0,l._)("th",{class:"break2Lines",style:{width:"18%","font-size":"7px!important"}},null,-1),q=(0,l._)("th",{class:"break2Lines",style:{width:"25%"}},null,-1),P=(0,l._)("th",{class:"break2Lines",style:{width:"18%"}},null,-1),T=(0,l._)("th",{class:"break2Lines",style:{width:"16%"}},null,-1),Z={key:0,class:"break2Lines",style:{width:"16%"}},D=["colspan"],W={class:"q-pl-sm text-subtitle2"},S={class:"break2Lines"},N={class:"break2Lines"},H={class:"break2Lines"},V={class:"break2Lines"},z={class:"break2Lines"},Q={class:"break2Lines"},E=["colspan"],U={class:"break2Lines"},L={key:0,class:"break2Lines"},R={class:"break2Lines"},F={class:"break2Lines"},A={class:"break2Lines"},O={key:1,class:"break2Lines"},I={class:"break2Lines"},j=["colspan"],M={class:"q-pl-sm text-subtitle2"},B={class:"row q-mt-sm"},K={class:"q-pl-sm col-12 text-subtitle1"},G=(0,l._)("br",null,null,-1),Y=(0,l._)("br",null,null,-1);function $(e,o,t,$,X,J){const ee=(0,l.up)("q-btn"),oe=(0,l.up)("q-spinner-ios"),te=(0,l.up)("q-markup-table");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",n,[(0,l.Wm)(ee,{color:"primary",icon:"check",label:"Imprimir",onClick:e.printCorte,disable:e.loading},null,8,["onClick","disable"])]),(0,l._)("div",r,[e.loading?((0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(oe,{color:"blue",size:"50%"})])):((0,l.wg)(),(0,l.iD)("div",c,[e.FechaInical!==e.FechaFinal?((0,l.wg)(),(0,l.iD)("div",d,(0,a.zw)(e.FechaInical)+" - "+(0,a.zw)(e.FechaFinal),1)):((0,l.wg)(),(0,l.iD)("div",u,(0,a.zw)(e.FechaInical),1)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.facturas,((o,t)=>((0,l.wg)(),(0,l.iD)("div",{key:o},[(0,l._)("div",p,[(0,l.Wm)(te,{class:"fill-black",flat:"",square:"",bordered:""},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[0===t?((0,l.wg)(),(0,l.iD)("tr",m,[v,g,f,w,h,b,e.Clientes?((0,l.wg)(),(0,l.iD)("th",y,"Cliente")):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("tr",C,[x,_,k,q,P,T,e.Clientes?((0,l.wg)(),(0,l.iD)("th",Z)):(0,l.kq)("",!0)]))]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",{colspan:e.Clientes?7:6},[(0,l._)("div",W,(0,a.zw)(o.key),1)],8,D)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.values,(o=>((0,l.wg)(),(0,l.iD)("tr",{key:o},[(0,l._)("td",S,[(0,l._)("div",N,(0,a.zw)(o.Estado),1)]),(0,l._)("td",H,[(0,l._)("div",V,(0,a.zw)(o.Serie),1)]),(0,l._)("td",z,[(0,l._)("div",Q,(0,a.zw)(o.Factura),1)]),(0,l._)("td",{class:"break2Lines",colspan:""!==o.Cupon?1:2},[(0,l._)("div",U,"Q."+(0,a.zw)(o.Total),1)],8,E),""!==o.Cupon?((0,l.wg)(),(0,l.iD)("td",L,[(0,l._)("div",R,(0,a.zw)(o.Cupon),1)])):(0,l.kq)("",!0),(0,l._)("td",F,[(0,l._)("div",A,(0,a.zw)(o.Descuento),1)]),e.Clientes?((0,l.wg)(),(0,l.iD)("td",O,[(0,l._)("div",I,(0,a.zw)(o.Cliente),1)])):(0,l.kq)("",!0)])))),128)),(0,l._)("tr",null,[(0,l._)("td",{colspan:e.Clientes?7:6},[(0,l._)("div",M,(0,a.zw)(o.key)+":     Q."+(0,a.zw)(o.Total.toFixed(2)),1)],8,j)])])])),_:2},1024)])])))),128)),(0,l._)("div",B,[(0,l._)("div",K," Total: Q."+(0,a.zw)(e.total.toFixed(2)),1)]),G,Y]))])])}var X=t(34136),J=t(78618),ee=t(32222),oe=(t(67825),t(68651)),te=t(60499),le=(t(17779),function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))});const ae=(0,l.aZ)({name:"Corte",props:{Series:{type:Array,required:!0},FechaInical:{type:String,required:!0},FechaFinal:{type:String},Clientes:{type:Boolean,default:!1,required:!1}},setup(e){const o=(0,te.iH)([]),t=(0,te.iH)(0),a=((0,te.iH)(null),(0,te.iH)(!1));(0,l.YP)(e,(()=>{i()}));const i=()=>le(this,void 0,void 0,(function*(){0===e.Series.length&&(0,oe.dF)("Debe seleccionar una serie",{tipo:"warning"});let l={Series:e.Series,FechaInicial:e.FechaInical,FechaFinal:e.FechaFinal};a.value=!0,o.value=[],yield X.api.post(X.endPoints.CORTE+"CorteSeries",l).then((e=>{let l=(0,J.vM)(e.data.Facturas,"Estado");o.value=l,t.value=0,l.forEach((e=>{let o=0;e.values.forEach((e=>{o+=e.Total})),e["Total"]=o,"I"===e.key&&(t.value=t.value+o)}))})).catch((e=>{(0,oe.L1)(e)})).finally((()=>{a.value=!1})),o.value.length})),n=()=>{o.value.length<=0?(0,oe.x2)("No hay facturas"):(0,ee.jL)("documentoCorte","ticket",!0,!0)};return{getData:i,printCorte:n,facturas:o,total:t,loading:a}},created(){this.getData()}});var ie=t(11639),ne=t(68879),re=t(38359),se=t(66933),ce=t(69984),de=t.n(ce);const ue=(0,ie.Z)(ae,[["render",$]]),pe=ue;de()(ae,"components",{QBtn:ne.Z,QSpinnerIos:re.Z,QMarkupTable:se.Z})},28886:(e,o,t)=>{"use strict";t.d(o,{Z:()=>X});var l=t(59835),a=t(86970);const i={class:""},n=(0,l.Uk)(" Minimizar "),r=(0,l.Uk)(" Maximizar "),s=(0,l.Uk)("Cerrar"),c={class:"q-pa-md"},d={class:"text-h6 q-ma-sm"};function u(e,o,t,u,p,m){const v=(0,l.up)("AClientesUpdateDialog"),g=(0,l.up)("q-btn"),f=(0,l.up)("q-space"),w=(0,l.up)("q-tooltip"),h=(0,l.up)("q-bar"),b=(0,l.up)("q-inner-loading"),y=(0,l.up)("q-icon"),C=(0,l.up)("q-input"),x=(0,l.up)("q-table"),_=(0,l.up)("q-card-section"),k=(0,l.up)("q-card"),q=(0,l.up)("q-dialog"),P=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(v,{ref:"clientesUpdateRef",Nit:e.nit},null,8,["Nit"]),(0,l.Wm)(g,{label:"",color:"primary",onClick:o[0]||(o[0]=o=>e.dialog=!0),flat:"",icon:"person_search",class:"q-pa-sm",outline:e.$q.platform.is.mobile},null,8,["outline"]),(0,l.Wm)(q,{modelValue:e.dialog,"onUpdate:modelValue":o[7]||(o[7]=o=>e.dialog=o),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f),(0,l.Wm)(g,{dense:"",flat:"",icon:"minimize",onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?((0,l.wg)(),(0,l.j4)(w,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[n])),_:1})):(0,l.kq)("",!0)])),_:1},8,["disable"]),(0,l.Wm)(g,{dense:"",flat:"",icon:"crop_square",onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(w,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[r])),_:1}))])),_:1},8,["disable"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[s])),_:1})])),_:1})),[[P]])])),_:1}),(0,l._)("div",c,[(0,l.Wm)(x,{id:"tabla",title:"Buscador de Clientes",ref:"bcRef",dense:"",rows:e.rows,columns:e.columns,"row-key":"Cliente",loading:e.loading,"virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0],pagination:{rowsPerPage:0},onVirtualScroll:e.onScroll,style:{height:"85vh"},onRowDblclick:e.selectCliente,onRowClick:e.rowClick},{"top-left":(0,l.w5)((()=>[(0,l._)("div",d,"Buscador de Clientes: "+(0,a.zw)(e.nit),1),(0,l.Wm)(g,{color:"primary",icon:"check",label:"Actualizar a "+e.nombreCliente,onClick:e.actualizarCliente},null,8,["label","onClick"])])),loading:(0,l.w5)((()=>[(0,l.Wm)(b,{showing:"",color:"primary"})])),"top-right":(0,l.w5)((()=>[(0,l.Wm)(C,{borderless:"",dense:"",debounce:"500",clearable:"",modelValue:e.filter,"onUpdate:modelValue":o[3]||(o[3]=o=>e.filter=o),placeholder:"Buscar por nombre",onKeydownCapture:o[4]||(o[4]=o=>e.searchKeyDown(o))},{append:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(C,{autofocus:"",ref:"buscarNitRef",borderless:"",dense:"",debounce:"500",clearable:"",modelValue:e.filterNit,"onUpdate:modelValue":o[5]||(o[5]=o=>e.filterNit=o),placeholder:"Buscar por nit",onKeydownCapture:o[6]||(o[6]=o=>e.searchKeyDown(o))},{append:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","loading","onVirtualScroll","onRowDblclick","onRowClick"])]),(0,l.Wm)(_,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue","maximized"])])}var p=t(34136),m=t(68651),v=t(60499);const g={class:"text-h5 q-mb-sm"},f=(0,l._)("div",{class:"text-h6 text-red text-datos"},"Datos de facturación",-1),w={class:"row"},h={class:"col col-xs-12 col-sm-7 col-md-7"},b={class:"border-datos"},y={class:"row justify-center q-mt-sm"},C=(0,l._)("br",null,null,-1);function x(e,o,t,i,n,r){const s=(0,l.up)("q-input"),c=(0,l.up)("q-select"),d=(0,l.up)("q-btn"),u=(0,l.up)("q-form"),p=(0,l.up)("q-card-section"),m=(0,l.up)("q-spinner-gears"),v=(0,l.up)("q-inner-loading"),x=(0,l.up)("q-card"),_=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(_,{modelValue:e.dialog,"onUpdate:modelValue":o[7]||(o[7]=o=>e.dialog=o),persistent:"",maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"q-ma-lg fit"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{onSubmit:e.onSubmit,class:"fit"},{default:(0,l.w5)((()=>[(0,l._)("div",g,"Código de cliente: "+(0,a.zw)(e.Nit),1),f,(0,l._)("div",w,[(0,l._)("div",h,[(0,l._)("div",b,[(0,l.Wm)(s,{modelValue:e.nombre,"onUpdate:modelValue":o[0]||(o[0]=o=>e.nombre=o),type:"text",label:"Nombres"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.nit,"onUpdate:modelValue":o[1]||(o[1]=o=>e.nit=o),type:"text",label:"Nit",readonly:""},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.direccion,"onUpdate:modelValue":o[2]||(o[2]=o=>e.direccion=o),type:"text",label:"Dirección"},null,8,["modelValue"])])])]),(0,l.Wm)(s,{modelValue:e.correo,"onUpdate:modelValue":o[3]||(o[3]=o=>e.correo=o),type:"text",label:"Correo electrónico"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.telefono,"onUpdate:modelValue":o[4]||(o[4]=o=>e.telefono=o),type:"text",label:"Teléfono 1 "},null,8,["modelValue"]),(0,l.Wm)(c,{class:"q-mt-sm",modelValue:e.departamento,"onUpdate:modelValue":o[5]||(o[5]=o=>e.departamento=o),options:e.departamentos,"option-value":"Codigo","option-label":"Nombre","emit-value":"","map-options":"",label:"Departamento",filled:""},null,8,["modelValue","options"]),(0,l.Wm)(c,{class:"q-mt-sm",modelValue:e.municipio,"onUpdate:modelValue":o[6]||(o[6]=o=>e.municipio=o),options:e.municipios,"option-value":"Codigo","option-label":"Nombre","emit-value":"","map-options":"",label:"Municipio",filled:""},null,8,["modelValue","options"]),(0,l._)("div",y,[(0,l.Wm)(d,{class:"q-ma-sm col col-xs-5 col-sm-3",label:"Actualizar",type:"submit",color:"primary"}),(0,l.wy)((0,l.Wm)(d,{class:"q-ma-sm col col-xs-5 col-sm-3",label:"Cancelar",type:"reset",color:"secondary",onClick:e.limpiar},null,8,["onClick"]),[[k]])]),C])),_:1},8,["onSubmit"])])),_:1}),(0,l.Wm)(v,{showing:e.loading},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1})])),_:1},8,["modelValue"])}var _=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const k=(0,l.aZ)({name:"AClientesUpdateDialog",props:{Nit:{type:String}},setup(e){const o=(0,v.iH)(!1),t=(0,v.iH)(""),a=(0,v.iH)(e.Nit),i=(0,v.iH)(""),n=(0,v.iH)(""),r=(0,v.iH)(""),s=(0,v.iH)(""),c=(0,v.iH)(0),d=(0,v.iH)([]),u=(0,v.iH)(0),g=(0,v.iH)([]),f=(0,v.iH)(!1);(0,l.YP)(e,(()=>{a.value=e.Nit}));const w=()=>{o.value=!0,h()},h=()=>_(this,void 0,void 0,(function*(){yield x(),yield C()})),b=()=>{let l={Codigo:e.Nit,Nombre:t.value,Nit:a.value,Telefono:r.value,Direccion:i.value,Departamento:c.value,Municipio:u.value,Correo_electronico:n.value,Zona:s.value};p.api.post(p.endPoints.ACLIENTES,l).then((e=>{(0,m.dF)("Datos guardados correctamente"),o.value=!1})).catch((e=>{(0,m.L1)(e)}))},y=()=>{t.value="",i.value="",n.value="",r.value="",s.value="",c.value=0,u.value=0},C=()=>_(this,void 0,void 0,(function*(){f.value=!0,yield p.api.get(p.endPoints.ACLIENTES+"Nit",(0,p.configApi)({queryParams:{nit:e.Nit}})).then((e=>{e.data=e.data[0],t.value=e.data.Nombre,i.value=e.data.Direccion,n.value=e.data.Correo,r.value=e.data.Telefono,s.value=e.data.Zona,null!==e.data.CodigoDepartamento&&(c.value=parseInt(e.data.CodigoDepartamento),u.value=parseInt(e.data.CodigoMunicipio))})).catch((e=>{(0,m.L1)(e)})).finally((()=>{f.value=!1}))})),x=()=>_(this,void 0,void 0,(function*(){f.value=!0,yield p.api.get(p.endPoints.DEPARTAMANETOS).then((e=>{d.value=e.data})).catch((e=>{(0,m.L1)(e)})).finally((()=>{f.value=!1}))})),k=()=>_(this,void 0,void 0,(function*(){f.value=!0,yield p.api.get(p.endPoints.MUNICIPIOS+c.value).then((e=>{g.value=e.data})).catch((e=>{(0,m.L1)(e)})).finally((()=>{f.value=!1}))}));return{show:w,onSubmit:b,limpiar:y,loadCliente:C,loadDepartamentos:x,loadMunicipios:k,nombre:t,nit:a,direccion:i,correo:n,telefono:r,zona:s,departamento:c,municipio:u,dialog:o,departamentos:d,municipios:g,loading:f}},watch:{departamento(e){return _(this,void 0,void 0,(function*(){yield this.loadMunicipios()}))}}});var q=t(11639),P=t(32074),T=t(44458),Z=t(63190),D=t(8326),W=t(13119),S=t(26384),N=t(68879),H=t(60854),V=t(9120),z=t(11821),Q=t(62146),E=t(69984),U=t.n(E);const L=(0,q.Z)(k,[["render",x]]),R=L;U()(k,"components",{QDialog:P.Z,QCard:T.Z,QCardSection:Z.Z,QForm:D.Z,QInput:W.Z,QSelect:S.Z,QBtn:N.Z,QInnerLoading:H.Z,QSpinnerGears:V.Z,QCardActions:z.Z}),U()(k,"directives",{ClosePopup:Q.Z});var F=t(17779),A=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const O=[{required:!0,name:"Id",label:"Id",field:"Id",align:"center",sortable:!0},{name:"Nombre",label:"Nombre",field:"Nombre",align:"center"},{name:"Nit",label:"Nit",field:"Nit",align:"center",sortable:!0},{name:"Direccion",label:"Dirección",field:"Direccion",align:"center",sortable:!0},{name:"Correo",label:"Correo",field:"Correo",align:"center",sortable:!0},{name:"Telefono",label:"Teléfono",field:"Telefono",align:"center",sortable:!0}],I=(0,l.aZ)({name:"AClientesDialog",components:{AClientesUpdateDialog:R},props:{clienteTicket:{type:Number,required:!0}},setup(e){const o=(0,v.iH)([]),t=(0,v.iH)(null),a=(0,v.iH)(null),i=(0,v.iH)(1),n=(0,v.iH)(!1),r=(0,v.iH)(""),s=(0,v.iH)(!1),c=(0,v.iH)(""),d=(0,v.iH)(null),u=(0,v.iH)(null),g=(0,v.iH)(null),f=e=>A(this,void 0,void 0,(function*(){var l,i;let n={},r="";"nombre"===e?(r="Nombre",n={nombre:null===(l=t.value)||void 0===l?void 0:l.trim()}):"nit"===e&&(r="Nit",n={nit:null===(i=a.value)||void 0===i?void 0:i.trim()}),yield p.api.get(p.endPoints.ACLIENTES+r,(0,p.configApi)({queryParams:n})).then((e=>{let t=[]=e.data;o.value=t})).catch((e=>{(0,m.L1)(e)}))})),w=({to:e})=>A(this,void 0,void 0,(function*(){})),h=()=>A(this,void 0,void 0,(function*(){n.value=!0,yield f("nombre"),n.value=!1})),b=()=>A(this,void 0,void 0,(function*(){n.value=!0,yield f("nit"),n.value=!1})),y=e=>{"Escape"===e.key?(s.value=!0,F.log("cancelar")):s.value=!1};(0,l.bv)((()=>{f("nombre")}));const C=(o,t,l)=>{if(t.Cliente===e.clienteTicket)return c.value="",void(0,m.x2)("No puede seleccionar al nit ticket",{timeout:2500});c.value=t.Nit,r.value=t.Nombre},x=()=>{var e;""!==c.value?null===(e=u.value)||void 0===e||e.show():(0,m.x2)("Debe seleccionar un nit")};return{buscarCliente:f,onScroll:w,aplicarFiltro:h,aplicarFiltroNit:b,searchKeyDown:y,rowClick:C,actualizarCliente:x,dialog:(0,v.iH)(!1),maximizedToggle:(0,v.iH)(!0),filter:t,filterNit:a,loading:n,columns:O,rows:o,nombreCliente:r,nextPage:i,nit:c,bcRef:d,clientesUpdateRef:u,buscarNitRef:g}},watch:{filter(e){this.aplicarFiltro()},filterNit(e){this.aplicarFiltroNit()},dialog(e){e&&(this.filter="",this.filterNit="")}},methods:{selectCliente(e,o,t){if(o.Cliente===this.clienteTicket)return this.nit="",void(0,m.x2)("No puede seleccionar al nit ticket",{timeout:2500});this.$emit("selectCliente",o),this.dialog=!1},openDialog(){this.dialog=!0}}});var j=t(64526),M=t(90136),B=t(46858),K=t(84277),G=t(22857),Y=t(31233);const $=(0,q.Z)(I,[["render",u]]),X=$;U()(I,"components",{QBtn:N.Z,QDialog:P.Z,QCard:T.Z,QBar:j.Z,QSpace:M.Z,QTooltip:B.Z,QTable:K.Z,QInnerLoading:H.Z,QInput:W.Z,QIcon:G.Z,QTr:Y.Z,QCardSection:Z.Z}),U()(I,"directives",{ClosePopup:Q.Z})},4608:(e,o,t)=>{"use strict";t.d(o,{Z:()=>we});var l=t(59835),a=t(86970);const i={class:""},n=(0,l.Uk)(" Minimizar "),r=(0,l.Uk)(" Maximizar "),s=(0,l.Uk)("Cerrar"),c={class:"q-pa-md"},d=(0,l.Uk)("Historial de Ventas"),u={class:"text-h6 q-ma-sm"},p={class:"row"},m={class:"ellipsis"},v=(0,l.Uk)(" Cerrar ");function g(e,o,t,g,f,w){const h=(0,l.up)("ClientesUpdateDialog"),b=(0,l.up)("q-btn"),y=(0,l.up)("q-space"),C=(0,l.up)("q-tooltip"),x=(0,l.up)("q-bar"),_=(0,l.up)("q-td"),k=(0,l.up)("q-item-section"),q=(0,l.up)("q-item"),P=(0,l.up)("q-list"),T=(0,l.up)("q-menu"),Z=(0,l.up)("q-icon"),D=(0,l.up)("q-input"),W=(0,l.up)("q-inner-loading"),S=(0,l.up)("q-table"),N=(0,l.up)("q-card-section"),H=(0,l.up)("q-card"),V=(0,l.up)("q-dialog"),z=(0,l.up)("Pivot"),Q=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",i,[(0,l.Wm)(h,{ref:"clientesUpdateRef",Codigo:e.cliente},null,8,["Codigo"]),(0,l.Wm)(b,{label:"",color:"primary",onClick:o[0]||(o[0]=o=>e.dialog=!0),flat:"",icon:"person_search",class:"q-pa-sm q-ml-sm"}),(0,l.Wm)(V,{modelValue:e.dialog,"onUpdate:modelValue":o[9]||(o[9]=o=>e.dialog=o),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y),(0,l.Wm)(b,{dense:"",flat:"",icon:"minimize",onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?((0,l.wg)(),(0,l.j4)(C,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[n])),_:1})):(0,l.kq)("",!0)])),_:1},8,["disable"]),(0,l.Wm)(b,{dense:"",flat:"",icon:"crop_square",onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(C,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[r])),_:1}))])),_:1},8,["disable"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(b,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[s])),_:1})])),_:1})),[[Q]])])),_:1}),(0,l._)("div",c,[(0,l.Wm)(S,{title:"Buscador de Clientes",ref:"bcRef",dense:"",rows:e.rows,columns:e.columns,"row-key":"Cliente",loading:e.loading,"virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0],pagination:{rowsPerPage:0},style:{height:"90vh"},onRowDblclick:e.selectCliente,onRowClick:e.rowClick},{"body-cell":(0,l.w5)((o=>[(0,l.Wm)(_,{props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(o.value),1)])),_:2},1032,["props"]),(0,l.Wm)(T,{"touch-position":"","context-menu":""},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{clickable:"",onClick:t=>e.cargarHistorial(o.row.Cliente)},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[d])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),"top-left":(0,l.w5)((()=>[(0,l._)("div",u,"Buscador de Clientes: "+(0,a.zw)(e.cliente),1),(0,l.Wm)(D,{autofocus:"",borderless:"",dense:"",debounce:"500",clearable:"",modelValue:e.filter,"onUpdate:modelValue":o[3]||(o[3]=o=>e.filter=o),placeholder:"Buscar Cliente",onKeydownCapture:o[4]||(o[4]=o=>e.searchKeyDown(o)),class:"fit q-ml-sm"},{append:(0,l.w5)((()=>[(0,l.Wm)(Z,{name:"search"})])),_:1},8,["modelValue"]),(0,l._)("div",p,[(0,l.Wm)(D,{autofocus:"",borderless:"",dense:"",debounce:"500",clearable:"",modelValue:e.filterNit,"onUpdate:modelValue":o[5]||(o[5]=o=>e.filterNit=o),placeholder:"Buscar Nit",onKeydownCapture:o[6]||(o[6]=o=>e.searchKeyDown(o)),class:"col col-xs-12 col-sm-6"},{append:(0,l.w5)((()=>[(0,l.Wm)(Z,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(D,{autofocus:"",borderless:"",dense:"",debounce:"500",clearable:"",modelValue:e.filterDpi,"onUpdate:modelValue":o[7]||(o[7]=o=>e.filterDpi=o),placeholder:"Buscar DPI",onKeydownCapture:o[8]||(o[8]=o=>e.searchKeyDown(o)),class:"col col-xs-12 col-sm-6"},{append:(0,l.w5)((()=>[(0,l.Wm)(Z,{name:"search"})])),_:1},8,["modelValue"])])])),loading:(0,l.w5)((()=>[(0,l.Wm)(W,{showing:"",color:"primary"})])),"top-right":(0,l.w5)((()=>[(0,l.Wm)(b,{color:"primary",onClick:e.actualizarCliente},{default:(0,l.w5)((()=>[(0,l._)("div",m," Actualizar a "+(0,a.zw)(e.nombreCliente),1)])),_:1},8,["onClick"])])),_:1},8,["rows","columns","loading","onRowDblclick","onRowClick"])]),(0,l.Wm)(N,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue","maximized"])]),(0,l._)("template",null,[(0,l.Wm)(V,{modelValue:e.showModal,"onUpdate:modelValue":o[11]||(o[11]=o=>e.showModal=o),persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{class:"bg-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y),(0,l.Wm)(b,{dense:"",flat:"",icon:"close",onClick:o[10]||(o[10]=o=>e.showModal=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[v])),_:1})])),_:1})])),_:1}),e.showModal?((0,l.wg)(),(0,l.j4)(z,{key:0,width:"max",toolbar:"",report:{dataSource:{dataSourceType:"json",data:e.dataHistorial},slice:{reportFilters:[{uniqueName:"FECHA_DE_FACTURA"}],rows:[{uniqueName:"PRODUCTO"}],columns:[{uniqueName:"FECHA_DE_FACTURA"},{uniqueName:"NO_FACTURA"},{uniqueName:"Measures"}],measures:[{uniqueName:"CANTIDAD_VENDIDA",aggregation:"sum"}]},options:{grid:{showTotals:"off"}},localization:"https://cdn.webdatarocks.com/loc/es.json"}},null,8,["report"])):(0,l.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])],64)}var f=t(34136),w=t(68651),h=t(60499);const b={class:"text-h5 q-mb-sm"},y=(0,l._)("div",{class:"text-h6 text-red text-datos"},"Datos de facturación",-1),C={class:"row"},x={class:"col col-xs-12 col-sm-7 col-md-7"},_={class:"border-datos"},k={class:"col col-xs-12 col-sm-5 col-md-5"},q={class:"row"},P={class:"col"},T={class:"col"},Z={class:"row justify-center q-mt-sm"},D=(0,l._)("br",null,null,-1);function W(e,o,t,i,n,r){const s=(0,l.up)("q-input"),c=(0,l.up)("q-select"),d=(0,l.up)("q-spinner-gears"),u=(0,l.up)("q-inner-loading"),p=(0,l.up)("q-btn"),m=(0,l.up)("q-form"),v=(0,l.up)("q-card-section"),g=(0,l.up)("q-card"),f=(0,l.up)("q-dialog"),w=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(f,{modelValue:e.dialog,"onUpdate:modelValue":o[13]||(o[13]=o=>e.dialog=o),persistent:"",maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"fit q-ma-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{onSubmit:e.onSubmit,class:"fit"},{default:(0,l.w5)((()=>[(0,l._)("div",b,"Código de cliente: "+(0,a.zw)(e.Codigo),1),y,(0,l._)("div",C,[(0,l._)("div",x,[(0,l._)("div",_,[(0,l.Wm)(s,{modelValue:e.nombre,"onUpdate:modelValue":o[0]||(o[0]=o=>e.nombre=o),type:"text",label:"Nombres"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.complementoNombre,"onUpdate:modelValue":o[1]||(o[1]=o=>e.complementoNombre=o),type:"text",label:"Complemento del nombre"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.nit,"onUpdate:modelValue":o[2]||(o[2]=o=>e.nit=o),type:"text",label:"Nit"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.direccion,"onUpdate:modelValue":o[3]||(o[3]=o=>e.direccion=o),type:"text",label:"Dirección"},null,8,["modelValue"])])]),(0,l._)("div",k,[(0,l.Uk)((0,a.zw)(e.ruta)+" ",1),(0,l.Wm)(c,{class:"q-pa-md",modelValue:e.ruta,"onUpdate:modelValue":o[4]||(o[4]=o=>e.ruta=o),options:e.rutas,"option-value":"Codigo","option-label":"Nombre","emit-value":"","map-options":"",label:"Ruta",filled:""},null,8,["modelValue","options"]),(0,l.Wm)(s,{class:"q-pa-md",modelValue:e.zona,"onUpdate:modelValue":o[5]||(o[5]=o=>e.zona=o),type:"number",label:"Zona"},null,8,["modelValue"])])]),(0,l.Wm)(s,{modelValue:e.direccionEnvio,"onUpdate:modelValue":o[6]||(o[6]=o=>e.direccionEnvio=o),type:"text",label:"Dirección de envio/referencia"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:e.correo,"onUpdate:modelValue":o[7]||(o[7]=o=>e.correo=o),type:"text",label:"Correo electrónico"},null,8,["modelValue"]),(0,l._)("div",q,[(0,l._)("div",P,[(0,l.Wm)(s,{modelValue:e.telefono,"onUpdate:modelValue":o[8]||(o[8]=o=>e.telefono=o),type:"text",label:"Teléfono 1 "},null,8,["modelValue"])]),(0,l._)("div",T,[(0,l.Wm)(s,{modelValue:e.telefono2,"onUpdate:modelValue":o[9]||(o[9]=o=>e.telefono2=o),type:"text",label:"Teléfono 2"},null,8,["modelValue"])])]),(0,l.Wm)(c,{class:"q-mt-sm",modelValue:e.departamento,"onUpdate:modelValue":o[10]||(o[10]=o=>e.departamento=o),options:e.departamentos,"option-value":"Codigo","option-label":"Nombre","emit-value":"","map-options":"",label:"Departamento",filled:""},null,8,["modelValue","options"]),(0,l.Wm)(c,{class:"q-mt-sm",modelValue:e.municipio,"onUpdate:modelValue":o[11]||(o[11]=o=>e.municipio=o),options:e.municipios,"option-value":"Codigo","option-label":"Nombre","emit-value":"","map-options":"",label:"Municipio",filled:""},null,8,["modelValue","options"]),(0,l.Wm)(c,{class:"q-mt-sm",modelValue:e.categoria,"onUpdate:modelValue":o[12]||(o[12]=o=>e.categoria=o),options:e.categorias,"option-value":"Codigo","option-label":"Nombre","emit-value":"","map-options":"",label:"Categoria",filled:""},null,8,["modelValue","options"]),(0,l.Wm)(u,{showing:e.loading},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{size:"50px",color:"primary"})])),_:1},8,["showing"]),(0,l._)("div",Z,[(0,l.Wm)(p,{class:"col-3",label:"Actualizar",type:"submit",color:"primary"}),(0,l.wy)((0,l.Wm)(p,{class:"q-ml-sm col-3",label:"Cancelar",type:"reset",color:"primary",flat:"",onClick:e.limpiar},null,8,["onClick"]),[[w]])]),D])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var S=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const N=(0,l.aZ)({name:"ClientesUpdateDialog",props:{Codigo:{type:Number}},setup(e){const o=(0,h.iH)(!1),t=(0,h.iH)(""),l=(0,h.iH)(""),a=(0,h.iH)(""),i=(0,h.iH)(""),n=(0,h.iH)(""),r=(0,h.iH)(""),s=(0,h.iH)(""),c=(0,h.iH)(""),d=(0,h.iH)(null),u=(0,h.iH)([]),p=(0,h.iH)(""),m=(0,h.iH)(0),v=(0,h.iH)([]),g=(0,h.iH)(0),b=(0,h.iH)([]),y=(0,h.iH)(0),C=(0,h.iH)([]),x=(0,h.iH)(!1),_=()=>{o.value=!0,k()},k=()=>S(this,void 0,void 0,(function*(){yield Z(),yield D(),yield W(),yield T()})),q=()=>{let u={Codigo:e.Codigo,Nombre:t.value,Nombre2:l.value,Nit:a.value,Telefono1:s.value,Telefono2:c.value,Direccion:i.value,Departamento:m.value,Municipio:g.value,Correo_electronico:r.value,Direccion_envio:n.value,Codigo_categoria:y.value,Codigo_ruta:d.value,Zona:p.value};f.api.post(f.endPoints.CLIENTE,u).then((e=>{(0,w.dF)("Datos guardados correctamente"),P(),o.value=!1})).catch((e=>{(0,w.L1)(e)}))},P=()=>{t.value="",l.value="",a.value="",i.value="",n.value="",r.value="",s.value="",c.value="",p.value="",d.value=null,m.value=0,g.value=0,y.value=0},T=()=>S(this,void 0,void 0,(function*(){x.value=!0,yield f.api.get(f.endPoints.CLIENTE+"DATOS",(0,f.configApi)({queryParams:{codigoCliente:e.Codigo}})).then((e=>{t.value=e.data.Nombre,l.value=e.data.NombreComercial,a.value=e.data.Nit,i.value=e.data.Direccion,n.value=e.data.DireccionEnvio,r.value=e.data.Correo,s.value=e.data.Telefono,c.value=e.data.Telefono2,p.value=e.data.Zona,d.value=e.data.CodigoRuta,m.value=e.data.CodigoDepartamento,g.value=e.data.CodigoMunicipio,y.value=e.data.Categoria})).catch((e=>{(0,w.L1)(e)})).finally((()=>{x.value=!1}))})),Z=()=>S(this,void 0,void 0,(function*(){x.value=!0,yield f.api.get(f.endPoints.CLIENTESRUTAS).then((e=>{u.value=e.data})).catch((e=>{(0,w.L1)(e)})).finally((()=>{x.value=!1}))})),D=()=>S(this,void 0,void 0,(function*(){x.value=!0,yield f.api.get(f.endPoints.CLIENTESCATEGORIAS).then((e=>{C.value=e.data})).catch((e=>{(0,w.L1)(e)})).finally((()=>{x.value=!1}))})),W=()=>S(this,void 0,void 0,(function*(){x.value=!0,yield f.api.get(f.endPoints.DEPARTAMANETOS).then((e=>{v.value=e.data})).catch((e=>{(0,w.L1)(e)})).finally((()=>{x.value=!1}))})),N=()=>S(this,void 0,void 0,(function*(){x.value=!0,yield f.api.get(f.endPoints.MUNICIPIOS+m.value).then((e=>{b.value=e.data})).catch((e=>{(0,w.L1)(e)})).finally((()=>{x.value=!1}))}));return{show:_,onSubmit:q,limpiar:P,loadCliente:T,loadRutas:Z,loadCategorias:D,loadDepartamentos:W,loadMunicipios:N,nombre:t,complementoNombre:l,nit:a,direccion:i,direccionEnvio:n,correo:r,telefono:s,telefono2:c,ruta:d,rutas:u,zona:p,departamento:m,municipio:g,categoria:y,dialog:o,departamentos:v,municipios:b,categorias:C,loading:x}},watch:{departamento(e){return S(this,void 0,void 0,(function*(){yield this.loadMunicipios()}))}}});var H=t(11639),V=t(32074),z=t(44458),Q=t(63190),E=t(8326),U=t(13119),L=t(26384),R=t(60854),F=t(9120),A=t(68879),O=t(11821),I=t(62146),j=t(69984),M=t.n(j);const B=(0,H.Z)(N,[["render",W]]),K=B;function G(e,o,t,a,i,n){return(0,l.wg)(),(0,l.iD)("div",null,"Pivot")}M()(N,"components",{QDialog:V.Z,QCard:z.Z,QCardSection:Q.Z,QForm:E.Z,QInput:U.Z,QSelect:L.Z,QInnerLoading:R.Z,QSpinnerGears:F.Z,QBtn:A.Z,QCardActions:O.Z}),M()(N,"directives",{ClosePopup:I.Z});var Y=t(91896),$=t.n(Y);const X={name:"Pivot",props:{afterchartdraw:Function,aftergriddraw:Function,beforegriddraw:Function,beforetoolbarcreated:Function,cellclick:Function,celldoubleclick:Function,componentFolder:String,customizeCell:Function,customizeContextMenu:Function,datachanged:Function,dataerror:Function,datafilecancelled:Function,dataloaded:Function,fieldslistclose:Function,fieldslistopen:Function,filterclose:Function,filteropen:Function,fullscreen:Function,global:Object,height:[String,Number],loadingdata:Function,loadinglocalization:Function,loadingolapstructure:Function,loadingreportfile:Function,localizationerror:Function,localizationloaded:Function,olapstructureerror:Function,olapstructureloaded:Function,openingreportfile:Function,querycomplete:Function,queryerror:Function,ready:Function,report:[String,Object],reportchange:Function,reportcomplete:Function,reportfilecancelled:Function,reportfileerror:Function,reportfileloaded:Function,runningquery:Function,toolbar:Boolean,update:Function,width:[Number,String]},mounted:function(){this.webdatarocks=new($())({...this.$props,container:this.$el})},beforeUpdate(){return!1}},J=(0,H.Z)(X,[["render",G],["__scopeId","data-v-4f3abc74"]]),ee=J;var oe=t(17779),te=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const le=[{required:!0,name:"Cliente",label:"Cliente",field:"Cliente",align:"center",sortable:!0},{name:"Nombre",label:"Nombre",field:"Nombre",align:"center",sortable:!0,format:e=>`${e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}`},{name:"Nit",label:"Nit",field:"Nit",align:"center",sortable:!0},{name:"Direccion",label:"Dirección",field:"Direccion",align:"center",sortable:!0},{name:"Dpi",label:"Dpi",field:"Dpi",align:"center",sortable:!0}],ae=200,ie=(0,l.aZ)({name:"ClientesDialog",components:{ClientesUpdateDialog:K,Pivot:ee},props:{clienteTicket:{type:Number,required:!0}},setup(e){let o=(0,h.iH)(!1);const t=(0,h.iH)([]),a=(0,h.iH)({}),i=(0,h.iH)(""),n=(0,h.iH)(""),r=(0,h.iH)(""),s=(0,h.iH)(1),c=(0,h.iH)(!1),d=(0,h.iH)(!1),u=(0,h.iH)(""),p=(0,h.iH)(0),m=(0,h.iH)(!1),v=(0,h.iH)(0),g=(0,h.iH)(null),b=(0,h.iH)(null),y=t=>te(this,void 0,void 0,(function*(){t!==e.clienteTicket?(d.value=!0,c.value=!0,yield f.api.get(f.endPoints.CLIENTE+"HistorialClientes",{params:{idCliente:t}}).then((e=>{let t=e.data.historial,l=[{NO_FACTURA:{type:"string"},FECHA_DE_FACTURA:{type:"date string"},PRODUCTO:{type:"string"},CANTIDAD_VENDIDA:{type:"number"}},...t];a.value=l,d.value=!1,c.value=!1,o.value=!0})).catch((e=>{(0,w.L1)(e),d.value=!1,c.value=!1}))):(0,w.x2)("No puede seleccionar al cliente ticket",{timeout:2500})})),C=(e="Nombre")=>te(this,void 0,void 0,(function*(){c.value=!0;let o={rowsPerPage:ae,nombre:i.value,nit:n.value,dpi:r.value};yield f.api.get(f.endPoints.CLIENTE+e,(0,f.configApi)({queryParams:o})).then((e=>{let o=[]=e.data.Clientes;t.value=o,p.value=e.data.Total})).catch((e=>{(0,w.L1)(e)})),c.value=!1})),x=({to:e})=>{var o,t;let l=null===(t=null===(o=g.value)||void 0===o?void 0:o.rows)||void 0===t?void 0:t.length;void 0!==l?l-=1:l=0;var a=l;const i=Math.ceil(p.value/ae);!0!==c.value&&s.value<i&&e===a&&!0!==m.value&&(c.value=!0)},_=()=>te(this,void 0,void 0,(function*(){""!==i.value?yield C():m.value=!1})),k=e=>{"Escape"===e.key?(m.value=!0,oe.log("cancelar")):m.value=!1};(0,l.bv)((()=>{C()}));const q=(o,t,l)=>{if(t.Cliente===e.clienteTicket)return v.value=0,void(0,w.x2)("No puede seleccionar al cliente ticket",{timeout:2500});v.value=t.Cliente,u.value=t.Nombre},P=()=>{var e;0!==v.value?null===(e=b.value)||void 0===e||e.show():(0,w.x2)("Debe seleccionar un cliente")};return{buscarCliente:C,onScroll:x,aplicarFiltro:_,searchKeyDown:k,rowClick:q,actualizarCliente:P,dialog:(0,h.iH)(!1),maximizedToggle:(0,h.iH)(!0),filter:i,filterNit:n,filterDpi:r,loading:c,columns:le,rows:t,nombreCliente:u,nextPage:s,cliente:v,bcRef:g,clientesUpdateRef:b,showModal:o,loadingHistorial:d,cargarHistorial:y,dataHistorial:a}},watch:{filter(e){this.aplicarFiltro()},filterNit(e){this.buscarCliente("Nit")},filterDpi(e){this.buscarCliente("Dpi")},dialog(e){e&&(this.filter="")}},methods:{selectCliente(e,o,t){if(o.Cliente===this.clienteTicket)return this.cliente=0,void(0,w.x2)("No puede seleccionar al cliente ticket",{timeout:2500});this.$emit("selectCliente",o),this.dialog=!1},openDialog(){this.dialog=!0}}});var ne=t(64526),re=t(90136),se=t(46858),ce=t(84277),de=t(67220),ue=t(56362),pe=t(13246),me=t(490),ve=t(76749),ge=t(22857);const fe=(0,H.Z)(ie,[["render",g]]),we=fe;M()(ie,"components",{QBtn:A.Z,QDialog:V.Z,QCard:z.Z,QBar:ne.Z,QSpace:re.Z,QTooltip:se.Z,QTable:ce.Z,QTd:de.Z,QMenu:ue.Z,QList:pe.Z,QItem:me.Z,QItemSection:ve.Z,QInput:U.Z,QIcon:ge.Z,QInnerLoading:R.Z,QCardSection:Q.Z}),M()(ie,"directives",{ClosePopup:I.Z})},75256:(e,o,t)=>{"use strict";t.d(o,{Z:()=>re});var l=t(59835),a=t(86970),i=t(61957);const n=(0,l.Uk)(" Minimize "),r=(0,l.Uk)(" Maximize "),s=(0,l.Uk)("Cerrar"),c={class:"text-h6 text-center"},d={class:"text-h6 text-center"},u={class:"text-h4 bg-green-5 text-center"},p={class:"row justify-center"},m={class:"col-xs-10 col-sm-6"},v={class:"col-xs-12 col-sm-3"},g={class:"row"},f={class:"col col-12"},w={class:"text-h5 q-pl-md"},h={class:"col col-12"},b={class:"col col-4"},y={class:"col col-4"},C=(0,l.Uk)(" Facturando... ");function x(e,o,t,x,_,k){const q=(0,l.up)("KeyPageDetect"),P=(0,l.up)("q-btn"),T=(0,l.up)("q-space"),Z=(0,l.up)("q-tooltip"),D=(0,l.up)("q-bar"),W=(0,l.up)("q-icon"),S=(0,l.up)("q-input"),N=(0,l.up)("q-checkbox"),H=(0,l.up)("q-spinner-hourglass"),V=(0,l.up)("q-form"),z=(0,l.up)("q-card-section"),Q=(0,l.up)("q-card"),E=(0,l.up)("q-dialog"),U=(0,l.up)("cupon-dialog"),L=(0,l.up)("TarjetaDialog"),R=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(q,{keys:["F4"],onMyKeyDown:e.pageKey},null,8,["onMyKeyDown"]),e.generaFactura?((0,l.wg)(),(0,l.j4)(P,{key:0,disable:e.disable,class:"q-ma-sm",color:"green",label:"Facturar "+(e.Credito?"Credito":"Contado")+"(F4)",onClick:o[0]||(o[0]=o=>e.dialog=!0)},null,8,["disable","label"])):(0,l.kq)("",!0),e.usaCaja?((0,l.wg)(),(0,l.j4)(P,{key:1,disable:e.disable,class:"q-ma-sm",color:"green",label:"Pasar a caja (F4)",onClick:e.pasarCaja},null,8,["disable","onClick"])):(0,l.kq)("",!0),(0,l.Wm)(P,{disable:e.disable,class:"q-ma-sm",color:"primary",label:"Imprimir Pedido",onClick:e.imprimirPedido},null,8,["disable","onClick"]),(0,l.Wm)(E,{modelValue:e.dialog,"onUpdate:modelValue":o[7]||(o[7]=o=>e.dialog=o),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{class:"bg-white text-black",style:{width:"650px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.Credito)+" - "+(0,a.zw)(e.tipoPedido)+" ",1),(0,l.Wm)(T),(0,l.Wm)(P,{dense:"",flat:"",icon:"minimize",onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?((0,l.wg)(),(0,l.j4)(Z,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[n])),_:1})):(0,l.kq)("",!0)])),_:1},8,["disable"]),(0,l.Wm)(P,{dense:"",flat:"",icon:"crop_square",onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(Z,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[r])),_:1}))])),_:1},8,["disable"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(P,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[s])),_:1})])),_:1})),[[R]])])),_:1}),(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[(0,l._)("div",c,"Pedido "+(0,a.zw)(e.numeroPedido),1),(0,l._)("div",d,"Serie "+(0,a.zw)(e.serie),1),(0,l._)("div",u,"Total Q."+(0,a.zw)(e.subtotal.toFixed(2)),1),(0,l.Wm)(V,{onSubmit:e.onSubmit},{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l._)("div",m,[(0,l.Wm)(S,{ref:"efectivoRef",filled:"",modelValue:e.efectivo,"onUpdate:modelValue":o[3]||(o[3]=o=>e.efectivo=o),autofocus:"",type:"text",label:"Efectivo",class:"q-ma-sm",prefix:"Q.",onKeydown:(0,i.D2)(e.onSubmit,["enter"]),disable:e.conTarjeta},{before:(0,l.w5)((()=>[(0,l.Wm)(W,{name:"account_balance_wallet",color:"brown"})])),_:1},8,["modelValue","onKeydown","disable"]),(0,l.Wm)(S,{filled:"",modelValue:e.tarjetaCredito,"onUpdate:modelValue":o[4]||(o[4]=o=>e.tarjetaCredito=o),type:"text",label:"Tarjeta de Credito",class:"q-ma-sm",prefix:"Q.",onKeydown:(0,i.D2)(e.onSubmit,["enter"]),disable:!e.conTarjeta},{before:(0,l.w5)((()=>[(0,l.Wm)(W,{name:"credit_card",color:"blue"})])),_:1},8,["modelValue","onKeydown","disable"])]),(0,l._)("div",v,[(0,l.Wm)(N,{modelValue:e.conTarjeta,"onUpdate:modelValue":o[5]||(o[5]=o=>e.conTarjeta=o),label:"COBRO CON TARJETA"},null,8,["modelValue"])])]),(0,l._)("div",g,[(0,l._)("div",f,[(0,l._)("div",w," Cambio Q."+(0,a.zw)(((e.efectivo?e.efectivo:e.tarjetaCredito)-e.subtotal).toFixed(2)),1)]),(0,l._)("div",h,[e.habilitaCupones?((0,l.wg)(),(0,l.j4)(P,{key:0,label:"Cupon",color:"primary",class:"q-ma-sm",icon:"local_activity",onClick:e.usarCupon},null,8,["onClick"])):(0,l.kq)("",!0)]),(0,l._)("div",b,[e.habilitaTarjetas?((0,l.wg)(),(0,l.j4)(P,{key:0,label:"Tarjeta",color:"primary",class:"q-ma-sm",icon:"card_giftcard",onClick:e.usarTarjeta},null,8,["onClick"])):(0,l.kq)("",!0)]),(0,l._)("div",y,[(0,l.Wm)(P,{label:"Cobrar",color:"blue",class:"full-width",icon:"point_of_sale",onClick:o[6]||(o[6]=o=>e.onSubmit()),disable:e.loadFacturando,loading:e.loadFacturando},{loading:(0,l.w5)((()=>[(0,l.Wm)(H,{class:"on-left"}),C])),_:1},8,["disable","loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"]),(0,l.Wm)(U,{ref:"cuponRef",numeroPedido:e.numeroPedido,onOk:e.onOkCupon},null,8,["numeroPedido","onOk"]),(0,l.Wm)(L,{ref:"tarjetaRef",numeroPedido:e.numeroPedido,onOk:e.onOkCupon},null,8,["numeroPedido","onOk"])])}var _=t(67825),k=t(60499),q=t(34136),P=t(68651),T=t(97579);function Z(e,o,t,i,n,r){const s=(0,l.up)("q-input"),c=(0,l.up)("q-form"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-btn"),p=(0,l.up)("q-card-actions"),m=(0,l.up)("q-card"),v=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(v,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"q-dialog-plugin"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{ref:"fCuponRef"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Tarjeta para "+(0,a.zw)(e.numeroPedido)+" ",1),(0,l.Wm)(s,{modelValue:e.tarjeta,"onUpdate:modelValue":o[0]||(o[0]=o=>e.tarjeta=o),type:"text",label:"Código de tarjeta",rules:[e=>!!e||"Debe ingresar el código de tarjeta"]},null,8,["modelValue","rules"]),(0,l.Wm)(s,{modelValue:e.pass,"onUpdate:modelValue":o[1]||(o[1]=o=>e.pass=o),type:"password",label:"Clave",rules:[e=>!!e||"Debe ingresar la clave"]},null,8,["modelValue","rules"])])),_:1},512)])),_:1}),(0,l.Wm)(p,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{color:"primary",label:"OK",onClick:e.onOKClick},null,8,["onClick"]),(0,l.Wm)(u,{color:"primary",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var D=t(50906),W=t(19302),S=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const N=(0,l.aZ)({name:"TarjetaDialog",props:{numeroPedido:{type:Number,required:!0}},emits:[...D.Z.emits],setup(e,{emit:o}){(0,W.Z)(),(0,l.FN)();const{dialogRef:t,onDialogHide:a,onDialogOK:i,onDialogCancel:n}=(0,D.Z)(),r=(0,k.iH)(""),s=(0,k.iH)(""),c=()=>{var e;null===(e=t.value)||void 0===e||e.show()},d=(0,k.iH)(null),u=()=>S(this,void 0,void 0,(function*(){let o=!1,t={Tarjeta:r.value,Pedido:e.numeroPedido,Pass:s.value};return yield q.api.post(q.endPoints.TARJETA,t).then((e=>{(0,P.dF)("Tarjeta de descuento aplicada correctamente"),o=!0})).catch((e=>{(0,P.L1)(e),o=!1})),o})),p=()=>S(this,void 0,void 0,(function*(){var e;if(yield null===(e=d.value)||void 0===e?void 0:e.validate()){if(!(yield u()))return;i()}}));return{dialogRef:t,tarjeta:r,pass:s,show:c,onDialogHide:a,onOKClick:p,onCancelClick:n,fCuponRef:d}}});var H=t(11639),V=t(32074),z=t(44458),Q=t(63190),E=t(8326),U=t(13119),L=t(11821),R=t(68879),F=t(69984),A=t.n(F);const O=(0,H.Z)(N,[["render",Z]]),I=O;A()(N,"components",{QDialog:V.Z,QCard:z.Z,QCardSection:Q.Z,QForm:E.Z,QInput:U.Z,QCardActions:L.Z,QBtn:R.Z});var j=t(30336),M=t(78618),B=t(37655),K=t(4250),G=t(41355),Y=t(17779),$=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const X=(0,l.aZ)({name:"FacturacionDialog",components:{CuponDialog:T.Z,TarjetaDialog:I,KeyPageDetect:j.Z},emits:["facturado","cuponAplicado"],props:{numeroPedido:{type:Number,required:!0},serie:{type:String,required:!0},contingencia:{type:Boolean,default:!1},Total:{type:Number,required:!0,default:0},disable:{type:Boolean,default:!1},Credito:(0,M.w3)(null),tipoPedido:{type:Number,required:!0},habilitaCupones:{type:Boolean,default:!0},habilitaTarjetas:{type:Boolean,default:!0},ecommerce:{type:Boolean,default:!1}},setup(e,{emit:o}){const t=(0,k.iH)(!1),a=(0,k.iH)(!1),i=(0,k.iH)(e.serie),n=(0,k.iH)(),r=(0,k.iH)(),s=(0,k.iH)(0),c=(0,k.iH)(!1),d=(0,k.iH)(!1),u=(0,k.iH)(""),p=(0,k.iH)(!1),m=(0,k.iH)(""),v=(0,k.iH)(null),g=(0,k.iH)(null),f=(0,k.iH)(null),w=(0,k.iH)(!1),h=(0,k.iH)(e.Total),b=(0,k.iH)(!1);(0,l.YP)(e,(()=>{i.value=e.serie}));const y=()=>$(this,void 0,void 0,(function*(){let e=yield(0,K.Md)("POS"),o=!1;yield q.api.get(q.endPoints.DATOSVEND+(0,_.Xw)()).then((e=>{o=e.data.UsaCaja})).catch((e=>{(0,P.L1)(e)})),void 0!==e.find((e=>"PASAR A CAJA"==e.Opcion))&&o&&(c.value=!0),void 0!==e.find((e=>"FACTURAR"==e.Opcion))&&(d.value=!0)})),C=()=>$(this,void 0,void 0,(function*(){let o="FACT";2===e.tipoPedido&&(e.Credito?o="FCRE":e.Credito||(o="FCON")),yield q.api.get(q.endPoints.DATOSVEND+"DATAIMP",(0,q.configApi)({serie:i.value,queryParams:{tipo:o}})).then((e=>{m.value=e.data.Impresion})).catch((e=>{throw(0,P.L1)(e),e}))})),x=()=>$(this,void 0,void 0,(function*(){let l=!1;p.value=!0,yield C(),yield q.api.post(q.endPoints.FACTURAR,e.numeroPedido,(0,q.configApi)({serie:i.value,queryParams:{contingencia:e.contingencia,recargo:b.value,ecommerce:e.ecommerce}})).then((e=>{s.value=e.data.Factura,u.value=e.data.Uuid,(0,P.dF)("Factura "+s.value.toString()+" generada correctamente con UUID "+u.value,{position:"top"}),l=!0})).catch((e=>{(0,P.L1)(e,{timeout:0}),o("facturado",!0),t.value=!1})).finally((()=>{p.value=!1})),l&&q.api.get(q.endPoints.PERMISOS+"Paginas").then((o=>{var t=o.data.Paginas;let l=t.find((e=>{}));l&&(Y.log("actualizar ecommerce"),q.api.post(q.endPoints.PEDIDOECOMMERCE,null,(0,q.configApi)({queryParams:{numPedido:e.numeroPedido}})).then((e=>{Y.log(e.data),(0,_.Qe)()&&(0,P.dF)(e.data)})).catch((e=>{Y.log(e)})))})).catch((e=>{Y.log(e)})),l&&"TKT"===m.value?Z():l&&"DOC"===m.value&&T()})),T=()=>{if((0,_.Qe)()||(0,_.tq)()){window.open(_.qC+u.value);return o("facturado",!0),void(t.value=!1)}let e={printer:(0,_.LX)(),url:_.qC+u.value,filename:"factura.pdf"};(0,B.Q)("Imprimiendo...",void 0,void 0,"QSpinnerGears"),q.api.post(_.Rz,e).then((e=>{Y.log(e.data),(0,P.dF)(e.data),o("facturado",!0),t.value=!1,(0,B.E)()})).catch((e=>{(0,P.L1)(e),o("facturado",!0),t.value=!1,(0,B.E)()}))},Z=()=>$(this,void 0,void 0,(function*(){if(Y.log("Imprimir tiket"),(0,_.tq)()){var e=yield(0,P.UA)("Número de teléfono","Número del cliente, únicamente los 8 digitos","number");if(e){let o=_.qC+u.value,t="Puede ver tú factura en el siguiente enlace "+o,a="https://wa.me/502"+e.toString()+"?text="+t;var l=window.open(a,"Facturawt");yield(0,M._R)(2e3)}return o("facturado",!0),void(t.value=!1)}let a=1,n=1;screen.width,screen.height;let r="#/Reportes/FACTURA/"+i.value+"/"+s.value.toString();Y.log(r),(0,B.Q)("Imprimiendo...",void 0,void 0,"QSpinnerRadio");try{l=window.open(r,"Factura","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width="+a+", height="+n+", top=0, left=0");self.focus();const e=setInterval((()=>{(null===l||void 0===l?void 0:l.closed)&&(clearInterval(e),o("facturado",!0),t.value=!1,(0,B.E)())}),500)}catch(c){Y.log(c),o("facturado",!0),t.value=!1,(0,B.E)()}})),D=()=>{var e;null===(e=g.value)||void 0===e||e.show()},W=()=>{var e;null===(e=v.value)||void 0===e||e.show()},S=()=>{o("cuponAplicado",!0)},N=()=>{q.api.post(q.endPoints.PEDIDOENC+"pasarCaja",e.numeroPedido).then((e=>$(this,void 0,void 0,(function*(){var e;(0,P.dF)("Pedido pasado a caja"),yield(0,M._R)(500),z(),Y.log("enviar socket"),null===(e=G.Z.ws)||void 0===e||e.send("nuevo-pedido-fact"),Y.log("socket enviado"),o("facturado",!0)})))).catch((e=>{(0,P.L1)(e),o("facturado",!0)}))},H=()=>{b.value=!1,w.value?q.api.get(q.endPoints.RECARGO+1).then((e=>{let o=e.data.Recargo;"I"!==o.Estado?(b.value=!0,h.value=h.value+h.value*(o.Porcentaje/100)):(0,P.dF)("Ahora no se está cobrando recargo",{tipo:"warning"})})).catch((e=>{(0,P.L1)(e)})):h.value=e.Total},V=e=>{switch(e){case"F4":c.value?N():t.value=!0;break;default:break}},z=()=>{let o="#/Reportes/PEDIDOS/"+e.numeroPedido.toString();var t=window.open(o,"Pedido","addressbar=no,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,width=0, height=0, top=0, left=0");null===t||void 0===t||t.moveTo(0,0),null===t||void 0===t||t.resizeTo(screen.availWidth,screen.availHeight)};return{onSubmit:x,obtenerDatos:y,usarCupon:D,usarTarjeta:W,onOkCupon:S,pasarCaja:N,aplicarRecargo:H,pageKey:V,imprimirPedido:z,dialog:t,maximizedToggle:a,efectivo:n,tarjetaCredito:r,numeroFactura:s,usaCaja:c,generaFactura:d,loadFacturando:p,conTarjeta:w,subtotal:h,conRecargo:b,cuponRef:g,tarjetaRef:v,efectivoRef:f}},created(){this.obtenerDatos()},mounted(){},watch:{conTarjeta(){this.efectivo=null,this.tarjetaCredito=null,this.aplicarRecargo()},Total(){this.subtotal=this.$props.Total},dialog(){var e;this.dialog&&(null===(e=this.efectivoRef)||void 0===e||e.focus())}}});var J=t(64526),ee=t(90136),oe=t(46858),te=t(22857),le=t(11221),ae=t(96335),ie=t(62146);const ne=(0,H.Z)(X,[["render",x]]),re=ne;A()(X,"components",{QBtn:R.Z,QDialog:V.Z,QCard:z.Z,QBar:J.Z,QSpace:ee.Z,QTooltip:oe.Z,QCardSection:Q.Z,QForm:E.Z,QInput:U.Z,QIcon:te.Z,QCheckbox:le.Z,QSpinnerHourglass:ae.Z}),A()(X,"directives",{ClosePopup:ie.Z})},61563:(e,o,t)=>{"use strict";t.d(o,{Z:()=>h});var l=t(59835);const a={key:0,class:"banner-container bg-primary"},i={class:"constrain"},n=(0,l._)("strong",null,"Instalar POS WEB?",-1);function r(e,o,t,r,s,c){const d=(0,l.up)("q-avatar"),u=(0,l.up)("q-btn"),p=(0,l.up)("q-banner");return!e.getShowBanner()&&!e.$q.platform.is.mobile||e.$q.platform.is.nativeMobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("div",i,[(0,l.Wm)(p,{"inline-actions":"",dense:"",class:"bg-primary text-white"},{avatar:(0,l.w5)((()=>[(0,l.Wm)(d,{color:"white","text-color":"grey-10","font-size":"22px",icon:"eva-camera-outline"})])),action:(0,l.w5)((()=>[e.$q.platform.is.mobile&&!e.$q.platform.is.nativeMobile?((0,l.wg)(),(0,l.j4)(u,{key:0,flat:"",onClick:e.downloadApp,label:"Si",class:"q-px-sm",dense:""},null,8,["onClick"])):(0,l.kq)("",!0),!e.getShowBanner()||e.$q.platform.is.mobile||e.$q.platform.is.nativeMobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u,{key:1,flat:"",onClick:e.installer.installApp,label:"Si",class:"q-px-sm",dense:""},null,8,["onClick"]))])),default:(0,l.w5)((()=>[n])),_:1})])]))}var s=t(34136),c=t(1810);const d=(0,l.aZ)({setup(){const e=(0,c.i)(),o=()=>"https:"===window.location.protocol,t=()=>{var e=document.createElement("a");e.href=s.api.defaults.baseURL+"/Public/posweb.apk",e.setAttribute("download","PrinterServer.exe"),e.click()};return{showAppInstallBanner:!0,installer:e,getShowBanner:o,downloadApp:t}},created(){this.installer.setEvent()},mounted(){},methods:{}});var u=t(11639),p=t(47128),m=t(61357),v=t(68879),g=t(69984),f=t.n(g);const w=(0,u.Z)(d,[["render",r]]),h=w;f()(d,"components",{QBanner:p.Z,QAvatar:m.Z,QBtn:v.Z})},30336:(e,o,t)=>{"use strict";t.d(o,{Z:()=>d});var l=t(59835);function a(e,o,t,a,i,n){return(0,l.wg)(),(0,l.iD)("div")}var i=t(68651),n=t(60499);const r=(0,l.aZ)({name:"KeyPage",emits:["myKeyDown"],props:{keys:{type:Array,default:null}},setup(e,{emit:o}){(0,l.FN)();const t=(0,n.iH)(e.keys);(0,l.YP)(e,(()=>{t.value=e.keys}));const a=e=>{r(e.key,e.ctrlKey)&&(e.preventDefault(),e.ctrlKey?o("myKeyDown","C+"+e.key.toUpperCase()):o("myKeyDown",e.key))},r=(e,o)=>{switch(e){case"F5":return(0,i.wp)("Confirmación","¿Está seguro de recargar la página?",{onPressOk:()=>{location.reload()},onPressCancel:()=>{}}),!0;default:break}let l=!1;return null!==t.value&&void 0!==t.value&&t.value.map((t=>{if(t!==e){if(t.includes("+")){const a=t.split("+");if(o&&"C"===a[0]&&a[1].toUpperCase()===e.toUpperCase())return void(l=!0)}}else l=!0})),l};return{handler:a}},created(){window.addEventListener("keydown",this.handler)},beforeUnmount(){window.removeEventListener("keydown",this.handler)}});var s=t(11639);const c=(0,s.Z)(r,[["render",a],["__scopeId","data-v-67b60396"]]),d=c},51392:(e,o,t)=>{"use strict";t.d(o,{Z:()=>C});var l=t(59835);const a={class:"row"};function i(e,o,t,i,n,r){const s=(0,l.up)("q-btn"),c=(0,l.up)("q-input"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-card-actions"),p=(0,l.up)("q-card"),m=(0,l.up)("q-dialog"),v=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",null,[(0,l.Wm)(s,{color:"blue-grey",icon:"travel_explore",label:"",onClick:o[0]||(o[0]=o=>e.show=!0)})]),(0,l.Wm)(m,{modelValue:e.show,"onUpdate:modelValue":o[4]||(o[4]=o=>e.show=o),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l.Wm)(c,{class:"col-12",modelValue:e.producto,"onUpdate:modelValue":o[1]||(o[1]=o=>e.producto=o),type:"text",label:"Producto"},null,8,["modelValue"]),(0,l.Wm)(c,{class:"col-12",modelValue:e.presentacion,"onUpdate:modelValue":o[2]||(o[2]=o=>e.presentacion=o),type:"text",label:"Presentación"},null,8,["modelValue"]),(0,l.Wm)(c,{class:"col-12",modelValue:e.extras,"onUpdate:modelValue":o[3]||(o[3]=o=>e.extras=o),type:"text",label:"Extras"},null,8,["modelValue"])])])),_:1}),(0,l.Wm)(u,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(s,{flat:"",label:"Cancel",color:"primary"},null,512),[[v]]),(0,l.wy)((0,l.Wm)(s,{label:"Guardar",color:"primary",onClick:e.guardar},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var n=t(34136),r=t(68651),s=t(60499);const c=(0,l.aZ)({name:"ProductosBuscados",setup(){const e=(0,s.iH)(!1),o=(0,s.iH)(""),t=(0,s.iH)(""),l=(0,s.iH)(""),a=()=>{let e={Producto:o.value,Presentacion:t.value,Laboratorio:l.value};n.api.post(n.endPoints.PRODUCTOSBUSCADOS,e).then((e=>{(0,r.dF)("Datos enviados correctamente")})).catch((e=>{(0,r.L1)(e)}))};return{guardar:a,show:e,producto:o,presentacion:t,extras:l}}});var d=t(11639),u=t(68879),p=t(32074),m=t(44458),v=t(63190),g=t(13119),f=t(11821),w=t(62146),h=t(69984),b=t.n(h);const y=(0,d.Z)(c,[["render",i]]),C=y;b()(c,"components",{QBtn:u.Z,QDialog:p.Z,QCard:m.Z,QCardSection:v.Z,QInput:g.Z,QCardActions:f.Z}),b()(c,"directives",{ClosePopup:w.Z})},8118:(e,o,t)=>{"use strict";t.d(o,{Z:()=>L});var l=t(59835),a=t(61957),i=t(86970);const n=(0,l.Uk)(" Productos ofertados "),r=(0,l.Uk)("Cerrar"),s={class:"q-pa-md"},c=(0,l._)("div",{class:"text-h4"},"Productos ofertados",-1);function d(e,o,t,d,u,p){const m=(0,l.up)("q-badge"),v=(0,l.up)("q-tooltip"),g=(0,l.up)("q-btn"),f=(0,l.up)("q-page-sticky"),w=(0,l.up)("q-space"),h=(0,l.up)("q-bar"),b=(0,l.up)("q-inner-loading"),y=(0,l.up)("q-td"),C=(0,l.up)("q-tr"),x=(0,l.up)("q-grid"),_=(0,l.up)("q-card-section"),k=(0,l.up)("q-card"),q=(0,l.up)("q-dialog"),P=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(f,{position:"top-right",offset:e.$q.screen.lt.md?[20,-45]:[20,-12],style:{"z-index":"10000"}},{default:(0,l.w5)((()=>[(0,l.Wm)(a.uT,{"enter-active-class":e.classAnimate},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(g,{id:"ofertados-btn",push:"",round:"",color:"white","text-color":"grey-9",icon:"add_alert",onClick:o[0]||(o[0]=o=>e.dialog=!0),disable:null===e.NivelPrecio},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:e.wsStatus?"green":"red",floating:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.nuevasPromos),1)])),_:1},8,["color"]),(0,l.Wm)(v,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,l.w5)((()=>[n])),_:1})])),_:1},8,["disable"]),[[a.F8,!e.dialog]])])),_:1},8,["enter-active-class"])])),_:1},8,["offset"]),(0,l.Wm)(q,{modelValue:e.dialog,"onUpdate:modelValue":o[1]||(o[1]=o=>e.dialog=o),maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w),(0,l.wy)(((0,l.wg)(),(0,l.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[r])),_:1})])),_:1})),[[P]])])),_:1}),(0,l._)("div",s,[c,(0,l.Wm)(x,{class:"ofertados",title:"Buscador de Productos",data:e.rows,columns:e.columns,columns_filter:!0,pagination:{rowsPerPage:0}},{loading:(0,l.w5)((()=>[(0,l.Wm)(b,{showing:"",color:"primary"})])),body:(0,l.w5)((o=>[(0,l.Wm)(C,{props:o,onDblclick:t=>e.selectProd(t,o.row)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columns,(e=>((0,l.wg)(),(0,l.j4)(y,{key:e.name,class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(o.row[e.field]),1)])),_:2},1024)))),128))])),_:2},1032,["props","onDblclick"])])),_:1},8,["data","columns"])]),(0,l.Wm)(_,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue"])],64)}var u=t(60499),p=t(34136),m=t(78618),v=t(68651),g=t(41355),f=t(17779),w=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const h=[{name:"Producto",label:"Producto",field:"Producto",align:"center",sortable:!0},{name:"Descripcion",label:"Descripcion",field:"Descripcion",align:"center",sortable:!0},{name:"Secuencia",label:"Secuencia",field:"Secuencia",align:"center",sortable:!0},{name:"Inicia",label:"Inicia",field:"Inicia",align:"center",sortable:!0,format:"DD/MM/YYYY"},{name:"Finaliza",label:"Finaliza",field:"Finaliza",align:"center",sortable:!0,format:"DD/MM/YYYY"},{name:"Sugerido",label:"Sugerido",field:"Sugerido",align:"center",sortable:!0},{name:"Promocion",label:"Promocion",field:"Promocion",align:"center",sortable:!0},{name:"Inicial",label:"Inicial",field:"Inicial",align:"center",sortable:!0},{name:"Final",label:"Final",field:"Final",align:"center",sortable:!0}],b=(0,l.aZ)({name:"ProductosOfertadosDialog",props:{NivelPrecio:(0,m.w3)(null)},emits:["selectProd"],setup(e){var o,t,l,a,i;const n=(0,u.iH)(!1),r=(0,u.iH)(0),s=(0,u.iH)([]),c=(0,u.iH)(!1),d=(0,u.iH)(!1);1===(null===(o=g.Z.ws)||void 0===o?void 0:o.OPEN)&&(c.value=!0),null===(t=g.Z.ws)||void 0===t||t.addEventListener("open",(()=>{c.value=!0})),null===(l=g.Z.ws)||void 0===l||l.addEventListener("message",(e=>{"nuevas-promos"===e.data&&(f.log("msg promos"),b(),y())}));const b=()=>w(this,void 0,void 0,(function*(){d.value=!0,yield(0,m._R)(2e3),d.value=!1}));null===(a=g.Z.ws)||void 0===a||a.addEventListener("error",(()=>{c.value=!1})),null===(i=g.Z.ws)||void 0===i||i.addEventListener("close",(()=>{c.value=!1}));const y=()=>{s.value=[],r.value=0,null!==e.NivelPrecio&&void 0!==e.NivelPrecio&&p.api.get(p.endPoints.PRODUCTOSOFERTADOS,(0,p.configApi)({queryParams:{nivel:e.NivelPrecio}})).then((o=>{var t;s.value=o.data,r.value=s.value.length,r.value>0&&(0,v.dF)("Nuevas ofertas disponibles para nivel "+(null===(t=e.NivelPrecio)||void 0===t?void 0:t.toString()),{timeout:1e3,position:"top-right",tipo:"info",color:"black"})})).catch((e=>{(0,v.L1)(e),s.value=[]}))};return{getProductos:y,columns:h,rows:s,nuevasPromos:r,dialog:n,wsStatus:c,appearAnimate:d,classAnimate:(0,u.iH)("animated heartBeat slower"),show:(0,u.iH)(!0)}},watch:{NivelPrecio(e){this.getProductos()}},created(){this.getProductos()},methods:{selectProd(e,o){this.$emit("selectProd",o),this.dialog=!1}}});var y=t(11639),C=t(30627),x=t(68879),_=t(20990),k=t(46858),q=t(32074),P=t(44458),T=t(64526),Z=t(90136),D=t(60854),W=t(31233),S=t(67220),N=t(84277),H=t(63190),V=t(21682),z=t(62146),Q=t(69984),E=t.n(Q);const U=(0,y.Z)(b,[["render",d]]),L=U;E()(b,"components",{QPageSticky:C.Z,QBtn:x.Z,QBadge:_.Z,QTooltip:k.Z,QDialog:q.Z,QCard:P.Z,QBar:T.Z,QSpace:Z.Z,QInnerLoading:D.Z,QTr:W.Z,QTd:S.Z,QTable:N.Z,QCardSection:H.Z,QTh:V.Z}),E()(b,"directives",{ClosePopup:z.Z})},61549:(e,o,t)=>{"use strict";t.d(o,{Z:()=>ie});var l=t(59835),a=t(86970),i=t(61957);const n={class:""},r=(0,l.Uk)(" Minimizar "),s=(0,l.Uk)(" Maximizar "),c=(0,l.Uk)("Cerrar"),d={class:"q-pa-none"},u={class:"row q-ma-md"},p={class:"col col-xs-12 col-sm-4"},m={class:"col col-xs-12 col-sm-4"},v={class:"col col-xs-12 col-sm-4"},g={class:"text-bold",style:{display:"inline"}},f=(0,l._)("div",{class:"text-h4 q-ma-none"},"Productos sustitutos",-1);function w(e,o,t,w,h,b){const y=(0,l.up)("q-btn"),C=(0,l.up)("q-space"),x=(0,l.up)("q-tooltip"),_=(0,l.up)("q-bar"),k=(0,l.up)("q-icon"),q=(0,l.up)("q-input"),P=(0,l.up)("q-inner-loading"),T=(0,l.up)("q-checkbox"),Z=(0,l.up)("ExistenciasToolTip"),D=(0,l.up)("q-td"),W=(0,l.up)("q-popup-edit"),S=(0,l.up)("q-table"),N=(0,l.up)("q-tr"),H=(0,l.up)("q-grid"),V=(0,l.up)("q-card-section"),z=(0,l.up)("q-card"),Q=(0,l.up)("q-dialog"),E=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(y,{label:"",color:"primary",onClick:o[0]||(o[0]=o=>e.dialog=!0),flat:"",icon:"search",class:"q-pa-none"}),(0,l.Wm)(Q,{modelValue:e.dialog,"onUpdate:modelValue":o[9]||(o[9]=o=>e.dialog=o),maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C),(0,l.Wm)(y,{dense:"",flat:"",icon:"minimize",onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?((0,l.wg)(),(0,l.j4)(x,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[r])),_:1})):(0,l.kq)("",!0)])),_:1},8,["disable"]),(0,l.Wm)(y,{dense:"",flat:"",icon:"crop_square",onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(x,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[s])),_:1}))])),_:1},8,["disable"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(y,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[c])),_:1})])),_:1})),[[E]])])),_:1}),(0,l._)("div",d,[(0,l._)("div",u,[(0,l._)("div",p,[(0,l.Wm)(q,{filled:"",dense:"",debounce:"500",clearable:"",modelValue:e.prod,"onUpdate:modelValue":o[3]||(o[3]=o=>e.prod=o),label:"Buscar código de producto"},{append:(0,l.w5)((()=>[(0,l.Wm)(k,{name:"search"})])),_:1},8,["modelValue"])]),(0,l._)("div",m,[(0,l.Wm)(q,{ref:"buscarDescRef",dense:"",debounce:"500",clearable:"",modelValue:e.descripcion,"onUpdate:modelValue":o[4]||(o[4]=o=>e.descripcion=o),label:"Buscar descripción del producto",autofocus:""},{append:(0,l.w5)((()=>[(0,l.Wm)(k,{name:"search"})])),_:1},8,["modelValue"])]),(0,l._)("div",v,[(0,l.Wm)(q,{ref:"buscarTipoRef",dense:"",debounce:"500",clearable:"",modelValue:e.tipo,"onUpdate:modelValue":o[5]||(o[5]=o=>e.tipo=o),label:"Buscar por tipo de producto"},{append:(0,l.w5)((()=>[(0,l.Wm)(k,{name:"search"})])),_:1},8,["modelValue"])])]),(0,l.Wm)(S,{ref:"bcRef",rows:e.rows,columns:e.columns,loading:e.loading,filter:e.filter,pagination:{rowsPerPage:0},style:{height:"400px"},onRowDblclick:e.selectProd,onRowClick:e.prodClick},{loading:(0,l.w5)((()=>[(0,l.Wm)(P,{showing:e.loading,color:"primary"},null,8,["showing"])])),top:(0,l.w5)((()=>[(0,l.Wm)(q,{borderless:"",debounce:"500",clearable:"",modelValue:e.filter,"onUpdate:modelValue":o[6]||(o[6]=o=>e.filter=o),placeholder:"Buscar"},{append:(0,l.w5)((()=>[(0,l.Wm)(k,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(T,{label:"Mostrar todos los lotes",modelValue:e.mostrarTodo,"onUpdate:modelValue":o[7]||(o[7]=o=>e.mostrarTodo=o)},null,8,["modelValue"]),(0,l.Wm)(T,{label:"Agregar lotes",modelValue:e.porLote,"onUpdate:modelValue":o[8]||(o[8]=o=>e.porLote=o),class:"q-ml-md"},null,8,["modelValue"])])),"body-cell-Disponible":(0,l.w5)((o=>[(0,l.Wm)(D,{props:o,onMouseover:t=>e.getHoverRow(o.row),onMouseleave:t=>e.getLeaveRow(o.row),class:(0,a.C_)(0===o.row.Disponible?"bg-red":"bg-white q-ma-none")},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{producto:o.row.Producto,descripcion:o.row.Descripcion,lote:o.row.Lote,showToolTip:o.row.Ver,ref:o.row.Producto+o.row.Lote,onCloseTool:t=>e.onLeaveToolTip(o.row)},null,8,["producto","descripcion","lote","showToolTip","onCloseTool"]),(0,l._)("div",g,(0,a.zw)(o.value),1),o.row.DisponibleOtras>0?((0,l.wg)(),(0,l.j4)(k,{key:0,class:"q-ml-sm",size:"xs",name:"chat_bubble",color:"green"})):(0,l.kq)("",!0)])),_:2},1032,["props","onMouseover","onMouseleave","class"])])),"body-cell-Agregar":(0,l.w5)((o=>[(0,l.Wm)(D,{props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(o.value)+" ",1),(0,l.Wm)(W,{modelValue:o.value,"onUpdate:modelValue":e=>o.value=e},{default:(0,l.w5)((t=>[(0,l.Wm)(q,{type:"number",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,dense:"",autofocus:"",onKeydown:[(0,i.D2)((0,i.iM)(t.cancel,["prevent"]),["enter"]),(0,i.D2)((l=>e.agregarCantidad(o.row.Producto,o.row.Lote,o.row.Precio,t.value,o.rowIndex)),["enter"])]},{after:(0,l.w5)((()=>[(0,l.Wm)(y,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:[(0,i.iM)(t.cancel,["stop"]),l=>e.agregarCantidad(o.row.Producto,o.row.Lote,o.row.Precio,t.value,o.rowIndex)],disable:!1===t.validate(t.value)||t.initialValue===t.value},null,8,["onClick","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","onKeydown"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","filter","onRowDblclick","onRowClick"]),f,(0,l.Wm)(H,{class:"sustitutos",data:e.rowsSustitutos,columns:e.columns,columns_filter:!0,pagination:{rowsPerPage:0},dense:"",loading:e.loadingSustitutos},{body:(0,l.w5)((o=>[(0,l.Wm)(N,{props:o,onDblclick:t=>e.selectProd(t,o.row,o.index)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columns,(t=>((0,l.wg)(),(0,l.j4)(D,{key:t.name,class:"text-center",onMouseover:l=>"Disponible"===t.name?e.getHoverRow(o.row):null,onMouseleave:l=>"Disponible"===t.name?e.getLeaveRow(o.row):null},{default:(0,l.w5)((()=>["Disponible"===t.name?((0,l.wg)(),(0,l.j4)(Z,{key:0,producto:o.row.Producto,descripcion:o.row.Descripcion,lote:o.row.Lote,showToolTip:o.row.Ver,ref_for:!0,ref:o.row.Producto+o.row.Lote,onCloseTool:t=>e.onLeaveToolTip(o.row)},null,8,["producto","descripcion","lote","showToolTip","onCloseTool"])):(0,l.kq)("",!0),(0,l._)("div",{class:(0,a.C_)("Disponible"===t.name?"text-bold":""),style:{display:"inline"}},(0,a.zw)(o.row[t.field.toString()]),3),o.row.DisponibleOtras>0&&"Disponible"===t.name?((0,l.wg)(),(0,l.j4)(k,{key:1,class:"q-ml-sm",size:"xs",name:"chat_bubble",color:"green"})):(0,l.kq)("",!0)])),_:2},1032,["onMouseover","onMouseleave"])))),128))])),_:2},1032,["props","onDblclick"])])),_:1},8,["data","columns","loading"])]),(0,l.Wm)(V,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue","maximized"])])}var h=t(34136),b=t(68651),y=t(60499);function C(e,o,t,i,n,r){const s=(0,l.up)("q-spinner"),c=(0,l.up)("q-item"),d=(0,l.up)("q-avatar"),u=(0,l.up)("q-item-section"),p=(0,l.up)("q-item-label"),m=(0,l.up)("q-menu"),v=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(m,{ref:"menuTool",class:"q-ma-none",cover:"",anchor:"top left",onMouseover:e.mantenerMenu,onMouseleave:e.quitarMenu,style:{"min-height":"50px"}},{default:(0,l.w5)((()=>[e.loading?((0,l.wg)(),(0,l.j4)(s,{key:0,color:"primary",size:"3em"})):(0,l.kq)("",!0),(0,l.Wm)(c,{class:"bg-black text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.producto)+"-"+(0,a.zw)(e.descripcion)+" / "+(0,a.zw)(e.lote),1)])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.existencias,(o=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{key:o,class:"q-my-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{color:o.Disponible>0?"green":"primary","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(o.Disponible),1)])),_:2},1032,["color"])])),_:2},1024),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.descripcion),1)])),_:1}),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" En la bodega: "+(0,a.zw)(o.Bodega)+"-"+(0,a.zw)(o.Nombre),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[v]]))),128))])),_:1},8,["onMouseover","onMouseleave"])}var x=t(17779);const _=(0,l.aZ)({name:"ExistenciasToolTip",props:{producto:{type:String,required:!0},descripcion:{type:String,required:!0},lote:{type:String,required:!0},showToolTip:{type:Boolean,default:!1}},setup(){const e=(0,l.FN)(),o=(0,y.iH)([]),t=(0,y.iH)(!1),a=(0,y.iH)(!1),i=(0,y.iH)(null),n=(e,l)=>{if(t.value)return;if(o.value.length>0)return;if(!e&&""===e)return;if(!l&&""===l)return;let a={producto:e,lote:l};t.value=!0,h.api.get(h.endPoints.PRODUCTO+"/EXISTENCIA/",(0,h.configApi)({queryParams:a})).then((e=>{o.value=e.data.Existencias,t.value=!1})).catch((e=>{(0,b.L1)(e),x.log(e),t.value=!1}))},r=()=>{a.value=!0},s=()=>{var o;a.value=!1,null===(o=i.value)||void 0===o||o.hide(),null===e||void 0===e||e.emit("closeTool",!1)};return{consultarExistencias:n,existencias:o,loading:t,menuShow:a,mantenerMenu:r,quitarMenu:s,menuTool:i}},created(){},watch:{showToolTip(e){var o,t;if(e)this.consultarExistencias(this.producto,this.lote),this.menuShow=!0,null===(o=this.menuTool)||void 0===o||o.show();else{if(this.menuShow)return;null===(t=this.menuTool)||void 0===t||t.hide()}}},methods:{getShowMenu(){return this.menuShow}}});var k=t(11639),q=t(56362),P=t(13902),T=t(490),Z=t(76749),D=t(61357),W=t(33115),S=t(22857),N=t(51136),H=t(69984),V=t.n(H);const z=(0,k.Z)(_,[["render",C]]),Q=z;V()(_,"components",{QMenu:q.Z,QSpinner:P.Z,QItem:T.Z,QItemSection:Z.Z,QAvatar:D.Z,QItemLabel:W.Z,QIcon:S.Z}),V()(_,"directives",{Ripple:N.Z});var E=t(17779),U=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const L=[{required:!0,name:"Producto",label:"Producto",field:"Producto",align:"center",sortable:!0},{name:"Descripcion",label:"Descripción",field:"Descripcion",align:"center",sortable:!0,format:e=>`${e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}`},{name:"Tipo",label:"Tipo",field:"Tipo",align:"center",sortable:!0,format:e=>`${e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}`},{name:"Lote",label:"Lote",field:"Lote",align:"center",sortable:!0},{name:"DescripcionLote",label:"Descripcion Lote",field:"DescripcionLote",align:"center",sortable:!0},{name:"Agregar",label:"Agregar",field:"Agregar",align:"center",sortable:!0},{name:"Precio",label:"Precio",field:"Precio",align:"center",sortable:!0,format:e=>`Q.${e}`},{name:"Disponible",label:"Disponible",field:"Disponible",align:"center",sortable:!0}],R=100,F=(0,l.aZ)({components:{ExistenciasToolTip:Q},name:"ProductsDialog",emits:["selectProd","agregarLote"],props:{producto:{type:String,default:""},nivel:{type:Number,required:!0}},setup(e,{emit:o}){const t=(0,l.FN)(),a=(0,y.iH)(!1),i=(0,y.iH)([]),n=(0,y.iH)([]),r=(0,y.iH)(""),s=(0,y.iH)(!1),c=(0,y.iH)(!1),d=(0,y.iH)(e.producto),u=(0,y.iH)(""),p=(0,y.iH)(!1),m=(0,y.iH)(!1),v=(0,y.iH)(!1),g=(0,y.iH)(""),f=(0,y.iH)(!1),w=(0,y.iH)([]),C=(0,y.iH)(null),x=(o=!1)=>U(this,void 0,void 0,(function*(){var t;if(!a.value)return;s.value=!0;let l=u.value,n=R;v.value?u.value&&""!==u.value&&(l="*"+u.value,n*=2.5):m.value&&(n*=2.5);let r={producto:d.value,descripcion:l,tipo:g.value,rowsPerPage:n,nivel:e.nivel,conExistencia:!m.value};w.value=[],yield h.api.get(h.endPoints.PRODUCTO,(0,h.configApi)({queryParams:r})).then((e=>{let o=[]=e.data.Productos;i.value=o})).catch((e=>{E.log(e)})),s.value=!1,o&&(null===(t=C.value)||void 0===t||t.focus())})),_=e=>{},k=e=>{e.Ver=!0},q=e=>{e.Ver=!1;let o=e.Producto+e.Lote,l=null===t||void 0===t?void 0:t.refs[o],a=(l.getShowMenu(),l.getShowMenu());a||(e.Ver=!1)},P=e=>{e.Ver=!1},T=e=>U(this,void 0,void 0,(function*(){const t=yield(0,b.UA)("Cantidad","Ingrese la cantidad a pedir del lote: "+e.DescripcionLote,"number",null,!1);null!==t&&o("agregarLote",e.Producto,e.Lote,e.Precio,t)})),Z=(e,t,l,a,n)=>{null!==a&&(i.value[n].Agregar=a,o("agregarLote",e,t,l,a))},D=(o,t,l)=>U(this,void 0,void 0,(function*(){let o={producto:t.Producto.trim(),lote:t.Lote.trim(),nivel:e.nivel,conExistencia:!0};c.value=!0,yield h.api.get(h.endPoints.PRODUCTO+"Sustitutos",(0,h.configApi)({queryParams:o})).then((e=>{let o=[]=e.data.Productos;w.value=o})).catch((e=>{E.log(e)})),c.value=!1}));return{buscarProducto:x,onLeaveToolTip:P,selectRow:_,getHoverRow:k,getLeaveRow:q,agregarLotePed:T,prodClick:D,agregarCantidad:Z,showTool:p,dialog:a,maximizedToggle:(0,y.iH)(!0),filter:r,prod:d,descripcion:u,loading:s,loadingSustitutos:c,columns:L,rows:i,allRows:n,mostrarTodo:m,advancedFilter:v,tipo:g,buscarDescRef:C,porLote:f,rowsSustitutos:w}},created(){},methods:{selectProd(e,o,t){this.porLote?this.agregarLotePed(o):(this.$emit("selectProd",o),this.dialog=!1)},openDialog(){this.dialog=!0}},watch:{prod(e){this.buscarProducto()},descripcion(e){this.buscarProducto(!0)},tipo(e){this.buscarProducto()},dialog(e){e||(this.filter=""),this.prod=this.producto,this.buscarProducto(!0)},mostrarTodo(e){this.buscarProducto()},advancedFilter(e){this.buscarProducto()}}});var A=t(68879),O=t(32074),I=t(44458),j=t(64526),M=t(90136),B=t(46858),K=t(13119),G=t(11221),Y=t(60854),$=t(84277),X=t(67220),J=t(85863),ee=t(31233),oe=t(63190),te=t(21682),le=t(62146);const ae=(0,k.Z)(F,[["render",w]]),ie=ae;V()(F,"components",{QBtn:A.Z,QDialog:O.Z,QCard:I.Z,QBar:j.Z,QSpace:M.Z,QTooltip:B.Z,QInput:K.Z,QIcon:S.Z,QCheckbox:G.Z,QInnerLoading:Y.Z,QTable:$.Z,QTd:X.Z,QPopupEdit:J.Z,QTr:ee.Z,QCardSection:oe.Z,QTh:te.Z}),V()(F,"directives",{ClosePopup:le.Z})},86248:(e,o,t)=>{"use strict";t.d(o,{Z:()=>H});var l=t(59835),a=t(86970);const i={class:"row bordered",style:{"margin-left":"5px"}},n={class:"col-7 text-center text-subtitle2",id:"puntos-estado"},r={class:"text-center"},s={class:"col-5 self-center"},c=(0,l.Uk)("Cerrar"),d={style:{width:"100vw",height:"80vh"},class:""},u={class:"text-h6"};function p(e,o,t,p,m,v){const g=(0,l.up)("q-badge"),f=(0,l.up)("q-btn"),w=(0,l.up)("q-space"),h=(0,l.up)("q-tooltip"),b=(0,l.up)("q-bar"),y=(0,l.up)("q-grid"),C=(0,l.up)("q-card-section"),x=(0,l.up)("q-card"),_=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",i,[(0,l._)("div",n,[(0,l.Uk)(" Puntos "+(0,a.zw)(null!==e.estadoPuntos?"Activos":"Inactivos")+" ",1),(0,l._)("div",r,[(0,l.Wm)(g,{rounded:"",color:null!==e.estadoPuntos?"green":"red"},null,8,["color"]),(0,l.Uk)(" "+(0,a.zw)(e.totalPuntos),1)])]),(0,l._)("div",s,[(0,l.Wm)(f,{id:"puntos-btn",size:"sm",label:"Historial",dense:"",outline:"",color:"primary",icon:"restore",onClick:o[0]||(o[0]=o=>e.modal=!0)})])]),(0,l.Wm)(_,{modelValue:e.modal,"onUpdate:modelValue":o[1]||(o[1]=o=>e.modal=o)},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w),(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[c])),_:1})])),_:1})),[[k]])])),_:1}),(0,l.Wm)(C,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l._)("div",u,(0,a.zw)(e.$props.Cliente)+"-"+(0,a.zw)(e.nombre),1),(0,l.Wm)(y,{class:"puntosDialog",data:e.rows,columns:e.columns,columns_filter:!0,pagination:{rowsPerPage:0}},null,8,["data","columns"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var m=t(34136),v=t(78618),g=t(68651),f=t(60499);const w=[{name:"Fecha",label:"Fecha",field:"Fecha",align:"center",sortable:!0},{name:"Observacion",label:"Observacion",field:"Observacion",align:"center",sortable:!0},{name:"Puntos",label:"Puntos",field:"Puntos",align:"center",sortable:!0}],h=(0,l.aZ)({name:"PuntosCliente",props:{Cliente:(0,v.w3)(null)},setup(e){const o=(0,f.iH)(!1),t=(0,f.iH)(""),a=(0,f.iH)(0),i=(0,f.iH)(null),n=(0,f.iH)([]);(0,l.YP)(e,(()=>{e.Cliente?r():(n.value=[],a.value=0,i.value=null,t.value="")}));const r=()=>{n.value=[],m.api.get(m.endPoints.PUNTOS,(0,m.configApi)({queryParams:{cliente:e.Cliente}})).then((e=>{null!==e.data.Cliente&&(n.value=e.data.Historial,a.value=e.data.Cliente.Puntos,i.value=e.data.Cliente.Estado,t.value=e.data.Cliente.NombreCliente)})).catch((e=>{(0,g.L1)(e)}))};return{modal:o,columns:w,rows:n,nombre:t,totalPuntos:a,estadoPuntos:i}}});var b=t(11639),y=t(20990),C=t(68879),x=t(32074),_=t(44458),k=t(64526),q=t(90136),P=t(46858),T=t(63190),Z=t(84277),D=t(62146),W=t(69984),S=t.n(W);const N=(0,b.Z)(h,[["render",p]]),H=N;S()(h,"components",{QBadge:y.Z,QBtn:C.Z,QDialog:x.Z,QCard:_.Z,QBar:k.Z,QSpace:q.Z,QTooltip:P.Z,QCardSection:T.Z,QTable:Z.Z}),S()(h,"directives",{ClosePopup:D.Z})},35084:(e,o,t)=>{"use strict";t.d(o,{Z:()=>S});var l=t(59835);const a=(0,l.Uk)(" Minimizar "),i=(0,l.Uk)(" Maximizar "),n=(0,l.Uk)("Cerrar"),r={class:"q-pa-md"},s={class:"row q-mr-xl"},c={class:"col-xs-12 col-sm-6"},d={class:"col-xs-12 col-sm-6"};function u(e,o,t,u,p,m){const v=(0,l.up)("q-btn"),g=(0,l.up)("q-space"),f=(0,l.up)("q-tooltip"),w=(0,l.up)("q-bar"),h=(0,l.up)("q-input"),b=(0,l.up)("q-table"),y=(0,l.up)("q-card-section"),C=(0,l.up)("q-card"),x=(0,l.up)("q-dialog"),_=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(v,{color:"secondary",label:"Reservas",onClick:o[0]||(o[0]=o=>e.dialog=!0),dense:""}),(0,l.Wm)(x,{modelValue:e.dialog,"onUpdate:modelValue":o[5]||(o[5]=o=>e.dialog=o),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g),(0,l.Wm)(v,{dense:"",flat:"",icon:"minimize",onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?((0,l.wg)(),(0,l.j4)(f,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[a])),_:1})):(0,l.kq)("",!0)])),_:1},8,["disable"]),(0,l.Wm)(v,{dense:"",flat:"",icon:"crop_square",onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,l.w5)((()=>[e.maximizedToggle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(f,{key:0,class:"bg-white text-primary"},{default:(0,l.w5)((()=>[i])),_:1}))])),_:1},8,["disable"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(v,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[n])),_:1})])),_:1})),[[_]])])),_:1}),(0,l._)("div",r,[(0,l._)("div",s,[(0,l._)("div",c,[(0,l.Wm)(h,{modelValue:e.producto,"onUpdate:modelValue":o[3]||(o[3]=o=>e.producto=o),type:"text",label:"Producto",debounce:"500",clearable:""},null,8,["modelValue"])]),(0,l._)("div",d,[(0,l.Wm)(h,{modelValue:e.lote,"onUpdate:modelValue":o[4]||(o[4]=o=>e.lote=o),type:"text",label:"Lote",debounce:"500",clearable:""},null,8,["modelValue"])])]),(0,l.Wm)(b,{id:"tabla",title:"Buscador de Reservas",ref:"bcRef",rows:e.rows,loading:e.loading,"rows-per-page-options":[0],style:{height:"600px"}},null,8,["rows","loading"])]),(0,l.Wm)(y,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue","maximized"])],64)}var p=t(34136),m=t(68651),v=t(60499),g=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const f=(0,l.aZ)({name:"ReservasDialog",props:{initProducto:{type:String,default:""},initLote:{type:String,default:null}},setup(e){const o=(0,v.iH)(!1),t=(0,v.iH)(!1),a=(0,v.iH)(e.initProducto),i=(0,v.iH)(e.initLote),n=(0,v.iH)([]);(0,l.YP)(e,(()=>{a.value=e.initProducto,i.value=e.initLote}));const r=()=>g(this,void 0,void 0,(function*(){n.value=[],o.value&&(t.value=!0,yield p.api.get(p.endPoints.RESERVAS,(0,p.configApi)({queryParams:{producto:a.value,lote:i.value}})).then((e=>{n.value=e.data})).catch((e=>{(0,m.L1)(e)})),t.value=!1)}));return{loadProducto:r,dialog:o,maximizedToggle:(0,v.iH)(!0),loading:t,producto:a,lote:i,rows:n}},watch:{producto(e){this.loadProducto()},lote(e){this.loadProducto()},dialog(e){e?this.loadProducto():(this.producto="",this.lote="")}}});var w=t(11639),h=t(68879),b=t(32074),y=t(44458),C=t(64526),x=t(90136),_=t(46858),k=t(13119),q=t(84277),P=t(63190),T=t(62146),Z=t(69984),D=t.n(Z);const W=(0,w.Z)(f,[["render",u]]),S=W;D()(f,"components",{QBtn:h.Z,QDialog:b.Z,QCard:y.Z,QBar:C.Z,QSpace:x.Z,QTooltip:_.Z,QInput:k.Z,QTable:q.Z,QCardSection:P.Z}),D()(f,"directives",{ClosePopup:T.Z})},87913:(e,o,t)=>{"use strict";t.d(o,{Z:()=>q});var l=t(59835),a=t(86970);const i=(0,l.Uk)("Cerrar"),n=(0,l._)("div",{id:"qr-code-full-region"},null,-1);function r(e,o,t,r,s,c){const d=(0,l.up)("q-btn"),u=(0,l.up)("q-space"),p=(0,l.up)("q-tooltip"),m=(0,l.up)("q-bar"),v=(0,l.up)("q-card-section"),g=(0,l.up)("q-card"),f=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d,{color:"primary",icon:0===e.cameraStatus?"qr_code_scanner":"cancel",label:0===e.cameraStatus?"Código de Barras":"Cancelar",class:(0,a.C_)(e.classButton),size:e.sizeButton,onClick:o[0]||(o[0]=o=>e.leerCodigo())},null,8,["icon","label","class","size"]),(0,l.Wm)(f,{modelValue:e.dialog,"onUpdate:modelValue":o[2]||(o[2]=o=>e.dialog=o),persistent:"",maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u),(0,l.Wm)(d,{dense:"",flat:"",icon:"close",onClick:o[1]||(o[1]=o=>e.leerCodigo())},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[i])),_:1})])),_:1})])),_:1}),(0,l.Wm)(v,{class:"row items-center"},{default:(0,l.w5)((()=>[n])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var s=t(68651),c=t(60499),d=t(42831),u=t(78618),p=function(e,o,t,l){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{s(l.next(e))}catch(o){i(o)}}function r(e){try{s(l["throw"](e))}catch(o){i(o)}}function s(e){e.done?t(e.value):a(e.value).then(n,r)}s((l=l.apply(e,o||[])).next())}))};const m=(0,l.aZ)({name:"qrscanner",props:{fps:{type:Number,default:2},classButton:{type:String,default:""},sizeButton:{type:String,default:"sm"}},emits:["barra"],setup(e,{emit:o}){const t=(0,c.iH)(0),l=(0,c.iH)(null),a=(0,c.iH)(!1),i={fps:e.fps,qrbox:{width:350,height:250},supportedScanTypes:[d.h7.SCAN_TYPE_CAMERA]},n=()=>p(this,void 0,void 0,(function*(){var e;if(1===t.value)return null===(e=l.value)||void 0===e||e.clear(),l.value=null,t.value=0,void(a.value=!1);null===l.value&&(a.value=!0,yield(0,u._R)(500),l.value=new d.wF("qr-code-full-region",i,!1),l.value.render(r,m),t.value=1)}));function r(e,i){var n;t.value=0,null===(n=l.value)||void 0===n||n.clear(),l.value=null,a.value=!1,o("barra",e)}function m(e,o){e.includes("NotFoundException")||((0,s.x2)(e),t.value=0,a.value=!1)}return{leerCodigo:n,Html5QrcodeScannerState:d.lz,html5Scan:l,cameraStatus:t,dialog:a}},watch:{dialog(e){var o;e||(null===(o=this.html5Scan)||void 0===o||o.clear(),this.html5Scan=null)}}});var v=t(11639),g=t(68879),f=t(32074),w=t(44458),h=t(64526),b=t(90136),y=t(46858),C=t(63190),x=t(69984),_=t.n(x);const k=(0,v.Z)(m,[["render",r]]),q=k;_()(m,"components",{QBtn:g.Z,QDialog:f.Z,QCard:w.Z,QBar:h.Z,QSpace:b.Z,QTooltip:y.Z,QCardSection:C.Z})},95110:(e,o,t)=>{e.exports=t.p+"img/AMORE_LOGO.3e1232b1.png"},60886:(e,o,t)=>{e.exports=t.p+"img/CANTERA_LOGO.7f596648.png"},92746:(e,o,t)=>{e.exports=t.p+"img/GLOBALP_LOGO.396bf44b.png"},50364:(e,o,t)=>{e.exports=t.p+"img/GOCISA_LOGO.b8286635.png"},54240:(e,o,t)=>{e.exports=t.p+"img/GS_LOGO.568aef97.png"},49937:(e,o,t)=>{e.exports=t.p+"img/KING_LOGO.fa9f9212.png"},52206:(e,o,t)=>{e.exports=t.p+"img/no-image-available.d09e5038.png"},76209:(e,o,t)=>{var l={"./AMORE_LOGO.png":95110,"./CANTERA_LOGO.png":60886,"./GLOBALP_LOGO.png":92746,"./GOCISA_LOGO.png":50364,"./GS_LOGO.png":54240,"./KING_LOGO.png":49937,"./no-image-available.png":52206};function a(e){var o=i(e);return t(o)}function i(e){if(!t.o(l,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return l[e]}a.keys=function(){return Object.keys(l)},a.resolve=i,e.exports=a,a.id=76209},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"posweb","version":"0.0.07","description":"POS WEB Sistemas Phara","productName":"POS WEB","author":"desarrollop <desarrollo.phara@outlook.es>","private":true,"scripts":{"dev":"quasar dev","build":"quasar build","android":"quasar build -m android -- -- --packageType=apk","lint":"eslint --ext .js,.ts,.vue ./","format":"prettier --write \\"**/*.{js,ts,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"No test specified\\" && exit 0"},"dependencies":{"@capacitor-community/barcode-scanner":"^3.0.0","@pdfme/generator":"^1.2.3","@quasar/extras":"^1.15.5","@vertx/core":"^4.3.8","animate.css":"^4.1.1","axios":"^0.21.1","cordova-plugin-android-permissions":"^1.1.5","cordova-plugin-apkupdater":"^4.0.0","cordova-plugin-barcodescanner":"^0.7.4","core-js":"^3.6.5","crypto-js":"^4.1.1","downloadjs":"^1.4.7","html5-qrcode":"^2.2.1","https":"^1.0.0","jsbarcode":"^3.11.5","jspdf":"^2.5.1","mitt":"^3.0.0","pdfjs":"^2.5.0","pinia":"^2.0.23","qrcode":"^1.5.1","quagga":"^0.12.1","quasar":"^2.10.0","reconnecting-websocket":"^4.4.0","shepherd.js":"^10.0.0","socket.io-client":"^4.5.1","thermal-printer-cordova-plugin":"^1.0.6","vue":"^3.0.0","vue-barcode-scanner":"^0.8.1","vue-pwa-install":"^1.1.0","vue-router":"^4.0.0","webdatarocks":"^1.4.7","websocket":"^1.0.34"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.6.2","@types/node":"^12.20.21","@typescript-eslint/eslint-plugin":"^5.10.0","@typescript-eslint/parser":"^5.10.0","@vue/devtools":"^6.2.1","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-vue":"^7.0.0","node-polyfill-webpack-plugin":"^2.0.1","prettier":"^2.5.1","quasar-app-extension-qgrid":"^1.0.5","workbox-webpack-plugin":"^6.0.0"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}')}}]);