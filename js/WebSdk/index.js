/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var t,e={};function n(){}function r(t){return t}function i(t){return!!t}function o(t){return!t}var s="object"===typeof self&&self.self===self&&self||"object"===typeof global&&global.global===global&&global||this;function u(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function a(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=s&&(t=s.async),e.noConflict=function(){return s.async=t,e};var c=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===c.call(t)},f=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t};function l(t){return h(t)||"number"===typeof t.length&&t.length>=0&&t.length%1===0}function p(t,e){var n=-1,r=t.length;while(++n<r)e(t[n],n,t)}function d(t,e){var n=-1,r=t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function m(t){return d(Array(t),(function(t,e){return e}))}function E(t,e,n){return p(t,(function(t,r,i){n=e(n,t,r,i)})),n}function y(t,e){p(B(t),(function(n){e(t[n],n)}))}function C(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var B=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function A(t){var e,n,r=-1;return l(t)?(e=t.length,function(){return r++,r<e?r:null}):(n=B(t),e=n.length,function(){return r++,r<e?n[r]:null})}function v(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function D(t){return function(e,n,r){return t(e,r)}}var F="function"===typeof setImmediate&&setImmediate,g=F?function(t){F(t)}:function(t){setTimeout((function(){t()}),0)};function w(t){return function(e,r,i){i=a(i||n),e=e||[];var o=A(e);if(t<=0)return i(null);var s=!1,c=0,h=!1;(function n(){if(s&&c<=0)return i(null);while(c<t&&!h){var a=o();if(null===a)return s=!0,void(c<=0&&i(null));c+=1,r(e[a],a,u((function(t){c-=1,t?(i(t),h=!0):n()})))}})()}}function b(t){return function(n,r,i){return t(e.eachOf,n,r,i)}}function S(t){return function(e,n,r,i){return t(w(n),e,r,i)}}function _(t){return function(n,r,i){return t(e.eachOfSeries,n,r,i)}}function T(t,e,r,i){i=a(i||n),e=e||[];var o=l(e)?[]:{};t(e,(function(t,e,n){r(t,(function(t,r){o[e]=r,n(t)}))}),(function(t){i(t,o)}))}function k(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(n){n&&i.push({index:e,value:t}),r()}))}),(function(){r(d(i.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))}function x(t,e,n,r){k(t,e,(function(t,e){n(t,(function(t){e(!t)}))}),r)}function R(t,e,n){return function(r,i,o,s){function u(){s&&s(n(!1,void 0))}function a(t,r,i){if(!s)return i();o(t,(function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()}))}arguments.length>3?t(r,i,a,u):(s=o,o=i,t(r,a,u))}}function I(t,e){return e}function O(t,e,r){r=r||n;var i=l(e)?[]:{};t(e,(function(t,e,n){t(v((function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)})))}),(function(t){r(t,i)}))}function W(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(t,e){i=i.concat(e||[]),r(t)}))}),(function(t){r(t,i)}))}function M(t,r,i){if(null==r)r=1;else if(0===r)throw new Error("Concurrency must not be zero");function o(t,r,i,o){if(null!=o&&"function"!==typeof o)throw new Error("task callback must be a function");if(t.started=!0,h(r)||(r=[r]),0===r.length&&t.idle())return e.setImmediate((function(){t.drain()}));p(r,(function(e){var r={data:e,callback:o||n};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()})),e.setImmediate(t.process)}function s(t,e){return function(){a-=1;var n=!1,r=arguments;p(e,(function(t){p(c,(function(e,r){e!==t||n||(c.splice(r,1),n=!0)})),t.callback.apply(t,r)})),t.tasks.length+a===0&&t.drain(),t.process()}}var a=0,c=[],f={tasks:[],concurrency:r,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(t,e){o(f,t,!1,e)},kill:function(){f.drain=n,f.tasks=[]},unshift:function(t,e){o(f,t,!0,e)},process:function(){if(!f.paused&&a<f.concurrency&&f.tasks.length)while(a<f.concurrency&&f.tasks.length){var e=f.payload?f.tasks.splice(0,f.payload):f.tasks.splice(0,f.tasks.length),n=d(e,(function(t){return t.data}));0===f.tasks.length&&f.empty(),a+=1,c.push(e[0]);var r=u(s(f,e));t(n,r)}},length:function(){return f.tasks.length},running:function(){return a},workersList:function(){return c},idle:function(){return f.tasks.length+a===0},pause:function(){f.paused=!0},resume:function(){if(!1!==f.paused){f.paused=!1;for(var t=Math.min(f.concurrency,f.tasks.length),n=1;n<=t;n++)e.setImmediate(f.process)}}};return f}function P(t){return v((function(e,n){e.apply(null,n.concat([v((function(e,n){"object"===typeof console&&(e?console.error&&console.error(e):console[t]&&p(n,(function(e){console[t](e)})))}))]))}))}function L(t){return function(e,n,r){t(m(e),n,r)}}function N(t){return v((function(e,n){var r=v((function(n){var r=this,i=n.pop();return t(e,(function(t,e,i){t.apply(r,n.concat([i]))}),i)}));return n.length?r.apply(this,n):r}))}function j(t){return v((function(n){var r=n.pop();n.push((function(){var t=arguments;i?e.setImmediate((function(){r.apply(null,t)})):r.apply(null,t)}));var i=!0;t.apply(this,n),i=!1}))}"object"===typeof process&&"function"===typeof process.nextTick?e.nextTick=process.nextTick:e.nextTick=g,e.setImmediate=F?g:e.nextTick,e.forEach=e.each=function(t,n,r){return e.eachOf(t,D(n),r)},e.forEachSeries=e.eachSeries=function(t,n,r){return e.eachOfSeries(t,D(n),r)},e.forEachLimit=e.eachLimit=function(t,e,n,r){return w(e)(t,D(n),r)},e.forEachOf=e.eachOf=function(t,e,r){r=a(r||n),t=t||[];var i,o=A(t),s=0;while(null!=(i=o()))s+=1,e(t[i],i,u(c));function c(t){s--,t?r(t):null===i&&s<=0&&r(null)}0===s&&r(null)},e.forEachOfSeries=e.eachOfSeries=function(t,r,i){i=a(i||n),t=t||[];var o=A(t),s=o();function c(){var n=!0;if(null===s)return i(null);r(t[s],s,u((function(t){if(t)i(t);else{if(s=o(),null===s)return i(null);n?e.setImmediate(c):c()}}))),n=!1}c()},e.forEachOfLimit=e.eachOfLimit=function(t,e,n,r){w(e)(t,n,r)},e.map=b(T),e.mapSeries=_(T),e.mapLimit=S(T),e.inject=e.foldl=e.reduce=function(t,n,r,i){e.eachOfSeries(t,(function(t,e,i){r(n,t,(function(t,e){n=e,i(t)}))}),(function(t){i(t,n)}))},e.foldr=e.reduceRight=function(t,n,i,o){var s=d(t,r).reverse();e.reduce(s,n,i,o)},e.transform=function(t,n,r,i){3===arguments.length&&(i=r,r=n,n=h(t)?[]:{}),e.eachOf(t,(function(t,e,i){r(n,t,e,i)}),(function(t){i(t,n)}))},e.select=e.filter=b(k),e.selectLimit=e.filterLimit=S(k),e.selectSeries=e.filterSeries=_(k),e.reject=b(x),e.rejectLimit=S(x),e.rejectSeries=_(x),e.any=e.some=R(e.eachOf,i,r),e.someLimit=R(e.eachOfLimit,i,r),e.all=e.every=R(e.eachOf,o,o),e.everyLimit=R(e.eachOfLimit,o,o),e.detect=R(e.eachOf,r,I),e.detectSeries=R(e.eachOfSeries,r,I),e.detectLimit=R(e.eachOfLimit,r,I),e.sortBy=function(t,n,r){function i(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}e.map(t,(function(t,e){n(t,(function(n,r){n?e(n):e(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return r(t);r(null,d(e.sort(i),(function(t){return t.value})))}))},e.auto=function(t,r,i){i||(i=r,r=null),i=a(i||n);var o=B(t),s=o.length;if(!s)return i(null);r||(r=s);var u={},c=0,f=[];function l(t){f.unshift(t)}function d(t){var e=C(f,t);e>=0&&f.splice(e,1)}function m(){s--,p(f.slice(0),(function(t){t()}))}l((function(){s||i(null,u)})),p(o,(function(n){var o,s=h(t[n])?t[n]:[t[n]],a=v((function(t,r){if(c--,r.length<=1&&(r=r[0]),t){var o={};y(u,(function(t,e){o[e]=t})),o[n]=r,i(t,o)}else u[n]=r,e.setImmediate(m)})),f=s.slice(0,s.length-1),p=f.length;while(p--){if(!(o=t[f[p]]))throw new Error("Has inexistant dependency");if(h(o)&&C(o,n)>=0)throw new Error("Has cyclic dependencies")}function B(){return c<r&&E(f,(function(t,e){return t&&u.hasOwnProperty(e)}),!0)&&!u.hasOwnProperty(n)}function A(){B()&&(c++,d(A),s[s.length-1](a,u))}B()?(c++,s[s.length-1](a,u)):l(A)}))},e.retry=function(t,n,r){var i=5,o=0,s=[],u={times:i,interval:o};function a(t,e){if("number"===typeof e)t.times=parseInt(e,10)||i;else{if("object"!==typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}var c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function h(t,n){function r(t,e){return function(r){t((function(t,n){r(!t||e,{err:t,result:n})}),n)}}function i(t){return function(e){setTimeout((function(){e(null)}),t)}}while(u.times){var o=!(u.times-=1);s.push(r(u.task,o)),!o&&u.interval>0&&s.push(i(u.interval))}e.series(s,(function(e,n){n=n[n.length-1],(t||u.callback)(n.err,n.result)}))}return c<=2&&"function"===typeof t&&(r=n,n=t),"function"!==typeof t&&a(u,t),u.callback=r,u.task=n,u.callback?h():h},e.waterfall=function(t,r){if(r=a(r||n),!h(t)){var i=new Error("First argument to waterfall must be an array of functions");return r(i)}if(!t.length)return r();function o(t){return v((function(e,n){if(e)r.apply(null,[e].concat(n));else{var i=t.next();i?n.push(o(i)):n.push(r),j(t).apply(null,n)}}))}o(e.iterator(t))()},e.parallel=function(t,n){O(e.eachOf,t,n)},e.parallelLimit=function(t,e,n){O(w(e),t,n)},e.series=function(t,n){O(e.eachOfSeries,t,n)},e.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},e.apply=v((function(t,e){return v((function(n){return t.apply(null,e.concat(n))}))})),e.concat=b(W),e.concatSeries=_(W),e.whilst=function(t,e,r){if(r=r||n,t()){var i=v((function(n,o){n?r(n):t.apply(this,o)?e(i):r(null)}));e(i)}else r(null)},e.doWhilst=function(t,n,r){var i=0;return e.whilst((function(){return++i<=1||n.apply(this,arguments)}),t,r)},e.until=function(t,n,r){return e.whilst((function(){return!t.apply(this,arguments)}),n,r)},e.doUntil=function(t,n,r){return e.doWhilst(t,(function(){return!n.apply(this,arguments)}),r)},e.during=function(t,e,r){r=r||n;var i=v((function(e,n){e?r(e):(n.push(o),t.apply(this,n))})),o=function(t,n){t?r(t):n?e(i):r(null)};t(o)},e.doDuring=function(t,n,r){var i=0;e.during((function(t){i++<1?t(null,!0):n.apply(this,arguments)}),t,r)},e.queue=function(t,e){var n=M((function(e,n){t(e[0],n)}),e,1);return n},e.priorityQueue=function(t,r){function i(t,e){return t.priority-e.priority}function o(t,e,n){var r=-1,i=t.length-1;while(r<i){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function s(t,r,s,u){if(null!=u&&"function"!==typeof u)throw new Error("task callback must be a function");if(t.started=!0,h(r)||(r=[r]),0===r.length)return e.setImmediate((function(){t.drain()}));p(r,(function(r){var a={data:r,priority:s,callback:"function"===typeof u?u:n};t.tasks.splice(o(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)}))}var u=e.queue(t,r);return u.push=function(t,e,n){s(u,t,e,n)},delete u.unshift,u},e.cargo=function(t,e){return M(t,1,e)},e.log=P("log"),e.dir=P("dir"),e.memoize=function(t,n){var i={},o={};n=n||r;var s=v((function(r){var s=r.pop(),u=n.apply(null,r);u in i?e.setImmediate((function(){s.apply(null,i[u])})):u in o?o[u].push(s):(o[u]=[s],t.apply(null,r.concat([v((function(t){i[u]=t;var e=o[u];delete o[u];for(var n=0,r=e.length;n<r;n++)e[n].apply(null,t)}))])))}));return s.memo=i,s.unmemoized=t,s},e.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},e.times=L(e.map),e.timesSeries=L(e.mapSeries),e.timesLimit=function(t,n,r,i){return e.mapLimit(m(t),n,r,i)},e.seq=function(){var t=arguments;return v((function(r){var i=this,o=r[r.length-1];"function"==typeof o?r.pop():o=n,e.reduce(t,r,(function(t,e,n){e.apply(i,t.concat([v((function(t,e){n(t,e)}))]))}),(function(t,e){o.apply(i,[t].concat(e))}))}))},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))},e.applyEach=N(e.eachOf),e.applyEachSeries=N(e.eachOfSeries),e.forever=function(t,e){var r=u(e||n),i=j(t);function o(t){if(t)return r(t);i(o)}o()},e.ensureAsync=j,e.constant=v((function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}})),e.wrapSync=e.asyncify=function(t){return v((function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(i){return r(i)}f(n)&&"function"===typeof n.then?n.then((function(t){r(null,t)}))["catch"]((function(t){r(t.message?t:new Error(t))})):r(null,n)}))},"object"===typeof module&&module.exports?module.exports=e:"function"===typeof define&&define.amd?define("async",(function(){return e})):s.async=e})(),function(t){"use strict";"function"===typeof define&&define.amd?define("sha1",[],t):window.sha1=t()}((function(){var t=function(){var t="0123456789abcdef";function e(e){for(var n="",r=7;r>=0;r--)n+=t.charAt(e>>4*r&15);return n}function n(t){for(var e=1+(t.length+8>>6),n=new Array(16*e),r=0;r<16*e;r++)n[r]=0;for(r=0;r<t.length;r++)n[r>>2]|=t.charCodeAt(r)<<24-r%4*8;return n[r>>2]|=128<<24-r%4*8,n[16*e-1]=8*t.length,n}function r(t){for(var e=t.length+1>>1,n=1+(e+8>>6),r=new Array(16*n),i=0;i<16*n;i++)r[i]=0;for(i=0;i<e;i++)r[i>>2]|=parseInt(t.substr(2*i,2),16)<<24-i%4*8;return r[i>>2]|=128<<24-i%4*8,r[16*n-1]=8*e,r}function i(t,e,n){for(var r=1+(n+8>>6),i=new Array(16*r),o=0;o<16*r;o++)i[o]=0;for(o=0;o<n;o++)i[o>>2]|=(255&t[e+o])<<24-o%4*8;return i[o>>2]|=128<<24-o%4*8,i[16*r-1]=8*n,i}function o(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function s(t,e){return t<<e|t>>>32-e}function u(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function a(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function c(t){return p(n(t))}function h(t){return p(r(t))}function f(t){return p(i(t,0,t.length))}function l(t,e,n){return p(i(t,e,n))}function p(t){var n=d(t);return e(n[0])+e(n[1])+e(n[2])+e(n[3])+e(n[4])}function d(t){for(var e=new Array(80),n=1732584193,r=-271733879,i=-1732584194,c=271733878,h=-1009589776,f=0;f<t.length;f+=16){for(var l=n,p=r,d=i,m=c,E=h,y=0;y<80;y++){var C;e[y]=y<16?t[f+y]:s(e[y-3]^e[y-8]^e[y-14]^e[y-16],1),C=o(o(s(n,5),u(y,r,i,c)),o(o(h,e[y]),a(y))),h=c,c=i,i=s(r,30),r=n,n=C}n=o(n,l),r=o(r,p),i=o(i,d),c=o(c,m),h=o(h,E)}return new Array(n,r,i,c,h)}return{calcSHA1:c,calcSHA1Hex:h,calcSHA1BA:f,calcSHA1BAEx:l}};return t()})),function(t){"use strict";"function"===typeof define&&define.amd?define("sjcl",[],t):window.sjcl=t()}((function(){"use strict";var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};return t.bitArray={bitSlice:function(e,n,r){return e=t.bitArray._shiftRight(e.slice(n/32),32-(31&n)).slice(1),void 0===r?e:t.bitArray.clamp(e,r-n)},extract:function(t,e,n){var r,i=Math.floor(-e-n&31);return r=-32&(e+n-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i,r&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n);var r=e[e.length-1],i=t.bitArray.getPartial(r);return 32===i?e.concat(n):t.bitArray._shiftRight(n,i,0|r,e.slice(0,e.length-1))},bitLength:function(e){var n,r=e.length;return 0===r?0:(n=e[r-1],32*(r-1)+t.bitArray.getPartial(n))},clamp:function(e,n){if(32*e.length<n)return e;e=e.slice(0,Math.ceil(n/32));var r=e.length;return n&=31,r>0&&n&&(e[r-1]=t.bitArray.partial(n,e[r-1]&2147483648>>n-1,1)),e},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1;var r,i=0;for(r=0;r<e.length;r++)i|=e[r]^n[r];return 0===i},_shiftRight:function(e,n,r,i){var o,s,u=0;for(void 0===i&&(i=[]);n>=32;n-=32)i.push(r),r=0;if(0===n)return i.concat(e);for(o=0;o<e.length;o++)i.push(r|e[o]>>>n),r=e[o]<<32-n;return u=e.length?e[e.length-1]:0,s=t.bitArray.getPartial(u),i.push(t.bitArray.partial(n+s&31,n+s>32?r:i.pop(),1)),i},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,n,r=65280;for(e=0;e<t.length;++e)n=t[e],t[e]=n>>>24|n>>>8&r|(n&r)<<8|n<<24;return t}},t.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"===typeof e&&(e=t.codec.utf8String.toBits(e));var n,r=this._buffer=t.bitArray.concat(this._buffer,e),i=this._length,o=this._length=i+t.bitArray.bitLength(e);for(n=512+i&-512;n<=o;n+=512)this._block(r.splice(0,16));return this},finalize:function(){var e,n=this._buffer,r=this._h;for(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)]),e=n.length+2;15&e;e++)n.push(0);n.push(Math.floor(this._length/4294967296)),n.push(0|this._length);while(n.length)this._block(n.splice(0,16));return this.reset(),r},_init:[],_key:[],_precompute:function(){var t,e=0,n=2;function r(t){return 4294967296*(t-Math.floor(t))|0}t:for(;e<64;n++){for(t=2;t*t<=n;t++)if(n%t===0)continue t;e<8&&(this._init[e]=r(Math.pow(n,.5))),this._key[e]=r(Math.pow(n,1/3)),e++}},_block:function(t){var e,n,r,i,o=t.slice(0),s=this._h,u=this._key,a=s[0],c=s[1],h=s[2],f=s[3],l=s[4],p=s[5],d=s[6],m=s[7];for(e=0;e<64;e++)e<16?n=o[e]:(r=o[e+1&15],i=o[e+14&15],n=o[15&e]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+o[15&e]+o[e+9&15]|0),n=n+m+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(d^l&(p^d))+u[e],m=d,d=p,p=l,l=f+n|0,f=h,h=c,c=a,a=n+(c&h^f&(c^h))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;s[0]=s[0]+a|0,s[1]=s[1]+c|0,s[2]=s[2]+h|0,s[3]=s[3]+f|0,s[4]=s[4]+l|0,s[5]=s[5]+p|0,s[6]=s[6]+d|0,s[7]=s[7]+m|0}},t.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var n,r,i,o,s,u=this._tables[0][4],a=this._tables[1],c=e.length,h=1;if(4!==c&&6!==c&&8!==c)throw new t.exception.invalid("invalid aes key size");for(this._key=[o=e.slice(0),s=[]],n=c;n<4*c+28;n++)i=o[n-1],(n%c===0||8===c&&n%c===4)&&(i=u[i>>>24]<<24^u[i>>16&255]<<16^u[i>>8&255]<<8^u[255&i],n%c===0&&(i=i<<8^i>>>24^h<<24,h=h<<1^283*(h>>7))),o[n]=o[n-c]^i;for(r=0;n;r++,n--)i=o[3&r?n:n-4],s[r]=n<=4||r<4?i:a[0][u[i>>>24]]^a[1][u[i>>16&255]]^a[2][u[i>>8&255]]^a[3][u[255&i]]},t.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,n,r,i,o,s,u,a,c=this._tables[0],h=this._tables[1],f=c[4],l=h[4],p=[],d=[];for(t=0;t<256;t++)d[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!f[e];e^=r||1,n=d[n]||1)for(s=n^n<<1^n<<2^n<<3^n<<4,s=s>>8^255&s^99,f[e]=s,l[s]=e,o=p[i=p[r=p[e]]],a=16843009*o^65537*i^257*r^16843008*e,u=257*p[s]^16843008*s,t=0;t<4;t++)c[t][e]=u=u<<24^u>>>8,h[t][s]=a=a<<24^a>>>8;for(t=0;t<5;t++)c[t]=c[t].slice(0),h[t]=h[t].slice(0)},_crypt:function(e,n){if(4!==e.length)throw new t.exception.invalid("invalid aes block size");var r,i,o,s,u=this._key[n],a=e[0]^u[0],c=e[n?3:1]^u[1],h=e[2]^u[2],f=e[n?1:3]^u[3],l=u.length/4-2,p=4,d=[0,0,0,0],m=this._tables[n],E=m[0],y=m[1],C=m[2],B=m[3],A=m[4];for(s=0;s<l;s++)r=E[a>>>24]^y[c>>16&255]^C[h>>8&255]^B[255&f]^u[p],i=E[c>>>24]^y[h>>16&255]^C[f>>8&255]^B[255&a]^u[p+1],o=E[h>>>24]^y[f>>16&255]^C[a>>8&255]^B[255&c]^u[p+2],f=E[f>>>24]^y[a>>16&255]^C[c>>8&255]^B[255&h]^u[p+3],p+=4,a=r,c=i,h=o;for(s=0;s<4;s++)d[n?3&-s:s]=A[a>>>24]<<24^A[c>>16&255]<<16^A[h>>8&255]<<8^A[255&f]^u[p++],r=a,a=c,c=h,h=f,f=r;return d}},t.prng=function(e){this._pools=[new t.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=e,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},t.prng.prototype={randomWords:function(e,n){var r,i,o=[],s=this.isReady(n);if(s===this._NOT_READY)throw new t.exception.notReady("generator isn't seeded");for(s&this._REQUIRES_RESEED&&this._reseedFromPools(!(s&this._READY)),r=0;r<e;r+=4)(r+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),i=this._gen4words(),o.push(i[0],i[1],i[2],i[3]);return this._gate(),o.slice(0,e)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=t},addEntropy:function(e,n,r){r=r||"user";var i,o,s,u,a=(new Date).valueOf(),c=this._robins[r],h=this.isReady(),f=0;switch(i=this._collectorIds[r],void 0===i&&(i=this._collectorIds[r]=this._collectorIdNext++),void 0===c&&(c=this._robins[r]=0),this._robins[r]=(this._robins[r]+1)%this._pools.length,typeof e){case"number":void 0===n&&(n=1),this._pools[c].update([i,this._eventId++,1,n,a,1,0|e]);break;case"object":if(u=Object.prototype.toString.call(e),"[object Uint32Array]"===u){for(s=[],o=0;o<e.length;o++)s.push(e[o]);e=s}else for("[object Array]"!==u&&(f=1),o=0;o<e.length&&!f;o++)"number"!==typeof e[o]&&(f=1);if(!f){if(void 0===n)for(n=0,o=0;o<e.length;o++){s=e[o];while(s>0)n++,s>>>=1}this._pools[c].update([i,this._eventId++,2,n,a,e.length].concat(e))}break;case"string":void 0===n&&(n=e.length),this._pools[c].update([i,this._eventId++,3,n,a,e.length]),this._pools[c].update(e);break;default:f=1}if(f)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[c]+=n,this._poolStrength+=n,h===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t||this._defaultParanoia];return this._strength>=e||this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1);else{if(!document.attachEvent)throw new t.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var n,r,i=this._callbacks[t],o=[];for(r in i)i.hasOwnProperty(r)&&i[r]===e&&o.push(r);for(n=0;n<o.length;n++)r=o[n],delete i[r]},_bind:function(t){var e=this;return function(){t.apply(e,arguments)}},_gen4words:function(){for(var t=0;t<4;t++)if(this._counter[t]=this._counter[t]+1|0,this._counter[t])break;return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new t.cipher.aes(this._key)},_reseed:function(e){this._key=t.hash.sha256.hash(this._key.concat(e)),this._cipher=new t.cipher.aes(this._key);for(var n=0;n<4;n++)if(this._counter[n]=this._counter[n]+1|0,this._counter[n])break},_reseedFromPools:function(e){var n,r=[],i=0;for(this._nextReseed=r[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,n=0;n<16;n++)r.push(4294967296*Math.random()|0);for(n=0;n<this._pools.length;n++)if(r=r.concat(this._pools[n].finalize()),i+=this._poolEntropy[n],this._poolEntropy[n]=0,!e&&this._reseedCount&1<<n)break;this._reseedCount>=1<<this._pools.length&&(this._pools.push(new t.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=i,i>this._strength&&(this._strength=i),this._reseedCount++,this._reseed(r)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(e){var n,r;try{n=e.x||e.clientX||e.offsetX||0,r=e.y||e.clientY||e.offsetY||0}catch(i){n=0,r=0}0!=n&&0!=r&&t.random.addEntropy([n,r],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(e){var n=e.touches[0]||e.changedTouches[0],r=n.pageX||n.clientX,i=n.pageY||n.clientY;t.random.addEntropy([r,i],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(e){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?t.random.addEntropy(window.performance.now(),e,"loadtime"):t.random.addEntropy((new Date).valueOf(),e,"loadtime")},_accelerometerCollector:function(e){var n=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z;if(window.orientation){var r=window.orientation;"number"===typeof r&&t.random.addEntropy(r,1,"accelerometer")}n&&t.random.addEntropy(n,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(e,n){var r,i=t.random._callbacks[e],o=[];for(r in i)i.hasOwnProperty(r)&&o.push(i[r]);for(r=0;r<o.length;r++)o[r](n)}},t.random=new t.prng(6),function(){function e(){try{return require("crypto")}catch(t){return null}}try{var n,r,i;if("undefined"!==typeof module&&module.exports&&(r=e())&&r.randomBytes)n=r.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),t.random.addEntropy(n,1024,"crypto.randomBytes");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){if(i=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(i);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(i)}t.random.addEntropy(i,1024,"crypto.getRandomValues")}}catch(o){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(o))}}(),t.codec.hex={fromBits:function(e){var n,r="";for(n=0;n<e.length;n++)r+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return r.substr(0,t.bitArray.bitLength(e)/4)},toBits:function(e){var n,r,i=[];for(e=e.replace(/\s|0x/g,""),r=e.length,e+="00000000",n=0;n<e.length;n+=8)i.push(0^parseInt(e.substr(n,8),16));return t.bitArray.clamp(i,4*r)}},t.codec.utf8String={fromBits:function(e){var n,r,i="",o=t.bitArray.bitLength(e);for(n=0;n<o/8;n++)0===(3&n)&&(r=e[n/4]),i+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(i))},toBits:function(e){e=unescape(encodeURIComponent(e));var n,r=[],i=0;for(n=0;n<e.length;n++)i=i<<8|e.charCodeAt(n),3===(3&n)&&(r.push(i),i=0);return 3&n&&r.push(t.bitArray.partial(8*(3&n),i)),r}},t.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,r){var i,o="",s=0,u=t.codec.base64._chars,a=0,c=t.bitArray.bitLength(e);for(r&&(u=u.substr(0,62)+"-_"),i=0;6*o.length<c;)o+=u.charAt((a^e[i]>>>s)>>>26),s<6?(a=e[i]<<6-s,s+=26,i++):(a<<=6,s-=6);while(3&o.length&&!n)o+="=";return o},toBits:function(e,n){e=e.replace(/\s|=/g,"");var r,i,o=[],s=0,u=t.codec.base64._chars,a=0;for(n&&(u=u.substr(0,62)+"-_"),r=0;r<e.length;r++){if(i=u.indexOf(e.charAt(r)),i<0)throw new t.exception.invalid("this isn't base64!");s>26?(s-=26,o.push(a^i>>>s),a=i<<32-s):(s+=6,a^=i<<32-s)}return 56&s&&o.push(t.bitArray.partial(56&s,a,1)),o}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t})),function(t){"use strict";"function"===typeof define&&define.amd?define("BigInteger",[],t):window.BigInteger=t()}((function(){var t,e=0xdeadbeefcafe,n=15715070==(16777215&e);function r(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new r(null)}function o(t,e,n,r,i,o){while(--o>=0){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i}function s(t,e,n,r,i,o){var s=32767&e,u=e>>15;while(--o>=0){var a=32767&this[t],c=this[t++]>>15,h=u*a+c*s;a=s*a+((32767&h)<<15)+n[r]+(1073741823&i),i=(a>>>30)+(h>>>15)+u*c+(i>>>30),n[r++]=1073741823&a}return i}function u(t,e,n,r,i,o){var s=16383&e,u=e>>14;while(--o>=0){var a=16383&this[t],c=this[t++]>>14,h=u*a+c*s;a=s*a+((16383&h)<<14)+n[r]+i,i=(a>>28)+(h>>14)+u*c,n[r++]=268435455&a}return i}n&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=s,t=30):n&&"Netscape"!=navigator.appName?(r.prototype.am=o,t=26):(r.prototype.am=u,t=28),r.prototype.DB=t,r.prototype.DM=(1<<t)-1,r.prototype.DV=1<<t;var a=52;r.prototype.FV=Math.pow(2,a),r.prototype.F1=a-t,r.prototype.F2=2*t-a;var c,h,f="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array;for(c="0".charCodeAt(0),h=0;h<=9;++h)l[c++]=h;for(c="a".charCodeAt(0),h=10;h<36;++h)l[c++]=h;for(c="A".charCodeAt(0),h=10;h<36;++h)l[c++]=h;function p(t){return f.charAt(t)}function d(t,e){var n=l[t.charCodeAt(e)];return null==n?-1:n}function m(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function E(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function y(t){var e=i();return e.fromInt(t),e}function C(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;var i=t.length,o=!1,s=0;while(--i>=0){var u=8==n?255&t[i]:d(t,i);u<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=u:s+n>this.DB?(this[this.t-1]|=(u&(1<<this.DB-s)-1)<<s,this[this.t++]=u>>this.DB-s):this[this.t-1]|=u<<s,s+=n,s>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)}function B(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t}function A(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0){u<this.DB&&(n=this[s]>>u)>0&&(i=!0,o=p(n));while(s>=0)u<e?(n=(this[s]&(1<<u)-1)<<e-u,n|=this[--s]>>(u+=this.DB-e)):(n=this[s]>>(u-=e)&r,u<=0&&(u+=this.DB,--s)),n>0&&(i=!0),i&&(o+=p(n))}return i?o:"0"}function v(){var t=i();return r.ZERO.subTo(this,t),t}function D(){return this.s<0?this.negate():this}function F(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;while(--n>=0)if(0!=(e=this[n]-t[n]))return e;return 0}function g(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function w(){return this.t<=0?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)}function b(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function S(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function _(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(t/this.DB),u=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|u,u=(this[n]&o)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=u,e.t=this.t+s+1,e.s=this.s,e.clamp()}function T(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}}function k(t,e){var n=0,r=0,i=Math.min(t.t,this.t);while(n<i)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){r-=t.s;while(n<this.t)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<t.t)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function x(t,e){var n=this.abs(),i=t.abs(),o=n.t;e.t=o+i.t;while(--o>=0)e[o]=0;for(o=0;o<i.t;++o)e[o+n.t]=n.am(0,i[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)}function R(t){var e=this.abs(),n=t.t=2*e.t;while(--n>=0)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function I(t,e,n){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=i());var u=i(),a=this.s,c=t.s,h=this.DB-g(o[o.t-1]);h>0?(o.lShiftTo(h,u),s.lShiftTo(h,n)):(o.copyTo(u),s.copyTo(n));var f=u.t,l=u[f-1];if(0!=l){var p=l*(1<<this.F1)+(f>1?u[f-2]>>this.F2:0),d=this.FV/p,m=(1<<this.F1)/p,E=1<<this.F2,y=n.t,C=y-f,B=null==e?i():e;u.dlShiftTo(C,B),n.compareTo(B)>=0&&(n[n.t++]=1,n.subTo(B,n)),r.ONE.dlShiftTo(f,B),B.subTo(u,u);while(u.t<f)u[u.t++]=0;while(--C>=0){var A=n[--y]==l?this.DM:Math.floor(n[y]*d+(n[y-1]+E)*m);if((n[y]+=u.am(0,A,n,C,0,f))<A){u.dlShiftTo(C,B),n.subTo(B,n);while(n[y]<--A)n.subTo(B,n)}}null!=e&&(n.drShiftTo(f,e),a!=c&&r.ZERO.subTo(e,e)),n.t=f,n.clamp(),h>0&&n.rShiftTo(h,n),a<0&&r.ZERO.subTo(n,n)}}}function O(t){var e=i();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e}function W(t){this.m=t}function M(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function P(t){return t}function L(t){t.divRemTo(this.m,null,t)}function N(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function j(t,e){t.squareTo(e),this.reduce(e)}function H(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function U(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function q(t){var e=i();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e}function V(t){var e=i();return t.copyTo(e),this.reduce(e),e}function z(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);while(t[n]>=t.DV)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Q(t,e){t.squareTo(e),this.reduce(e)}function Y(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Z(){return 0==(this.t>0?1&this[0]:this.s)}function K(t,e){if(t>4294967295||t<1)return r.ONE;var n=i(),o=i(),s=e.convert(this),u=g(t)-1;s.copyTo(n);while(--u>=0)if(e.sqrTo(n,o),(t&1<<u)>0)e.mulTo(o,s,n);else{var a=n;n=o,o=a}return e.revert(n)}function X(t,e){var n;return n=t<256||e.isEven()?new W(e):new U(e),this.exp(t,n)}function J(){var t=i();return this.copyTo(t),t}function G(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function $(){return 0==this.t?this.s:this[0]<<24>>24}function tt(){return 0==this.t?this.s:this[0]<<16>>16}function et(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function nt(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function rt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=y(n),o=i(),s=i(),u="";this.divRemTo(r,o,s);while(o.signum()>0)u=(n+s.intValue()).toString(t).substr(1)+u,o.divRemTo(r,o,s);return s.intValue().toString(t)+u}function it(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),o=!1,s=0,u=0,a=0;a<t.length;++a){var c=d(t,a);c<0?"-"==t.charAt(a)&&0==this.signum()&&(o=!0):(u=e*u+c,++s>=n&&(this.dMultiply(i),this.dAddOffset(u,0),s=0,u=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(u,0)),o&&r.ZERO.subTo(this,this)}function ot(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),pt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(e))this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this)}else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function st(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0){r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);while(t>=0)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n)}return e}function ut(t){return 0==this.compareTo(t)}function at(t){return this.compareTo(t)<0?this:t}function ct(t){return this.compareTo(t)>0?this:t}function ht(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function ft(t,e){return t&e}function lt(t){var e=i();return this.bitwiseTo(t,ft,e),e}function pt(t,e){return t|e}function dt(t){var e=i();return this.bitwiseTo(t,pt,e),e}function mt(t,e){return t^e}function Et(t){var e=i();return this.bitwiseTo(t,mt,e),e}function yt(t,e){return t&~e}function Ct(t){var e=i();return this.bitwiseTo(t,yt,e),e}function Bt(){for(var t=i(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function At(t){var e=i();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function vt(t){var e=i();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Dt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function Ft(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+Dt(this[t]);return this.s<0?this.t*this.DB:-1}function gt(t){var e=0;while(0!=t)t&=t-1,++e;return e}function wt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=gt(this[n]^e);return t}function bt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function St(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function _t(t){return this.changeBit(t,pt)}function Tt(t){return this.changeBit(t,yt)}function kt(t){return this.changeBit(t,mt)}function xt(t,e){var n=0,r=0,i=Math.min(t.t,this.t);while(n<i)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){r+=t.s;while(n<this.t)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<t.t)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Rt(t){var e=i();return this.addTo(t,e),e}function It(t){var e=i();return this.subTo(t,e),e}function Ot(t){var e=i();return this.multiplyTo(t,e),e}function Wt(){var t=i();return this.squareTo(t),t}function Mt(t){var e=i();return this.divRemTo(t,e,null),e}function Pt(t){var e=i();return this.divRemTo(t,null,e),e}function Lt(t){var e=i(),n=i();return this.divRemTo(t,e,n),new Array(e,n)}function Nt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function jt(t,e){if(0!=t){while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Ht(){}function Ut(t){return t}function qt(t,e,n){t.multiplyTo(e,n)}function Vt(t,e){t.squareTo(e)}function zt(t){return this.exp(t,new Ht)}function Qt(t,e,n){var r,i=Math.min(this.t+t.t,e);n.s=0,n.t=i;while(i>0)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()}function Yt(t,e,n){--e;var r=n.t=this.t+t.t-e;n.s=0;while(--r>=0)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Zt(t){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Kt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function Xt(t){return t}function Jt(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function Gt(t,e){t.squareTo(e),this.reduce(e)}function $t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function te(t,e){var n,r,o=t.bitLength(),s=y(1);if(o<=0)return s;n=o<18?1:o<48?3:o<144?4:o<768?5:6,r=o<8?new W(e):e.isEven()?new Zt(e):new U(e);var u=new Array,a=3,c=n-1,h=(1<<n)-1;if(u[1]=r.convert(this),n>1){var f=i();r.sqrTo(u[1],f);while(a<=h)u[a]=i(),r.mulTo(f,u[a-2],u[a]),a+=2}var l,p,d=t.t-1,m=!0,E=i();o=g(t[d])-1;while(d>=0){o>=c?l=t[d]>>o-c&h:(l=(t[d]&(1<<o+1)-1)<<c-o,d>0&&(l|=t[d-1]>>this.DB+o-c)),a=n;while(0==(1&l))l>>=1,--a;if((o-=a)<0&&(o+=this.DB,--d),m)u[l].copyTo(s),m=!1;else{while(a>1)r.sqrTo(s,E),r.sqrTo(E,s),a-=2;a>0?r.sqrTo(s,E):(p=s,s=E,E=p),r.mulTo(E,u[l],s)}while(d>=0&&0==(t[d]&1<<o))r.sqrTo(s,E),p=s,s=E,E=p,--o<0&&(o=this.DB-1,--d)}return r.revert(s)}function ee(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));while(e.signum()>0)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function ne(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function re(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;var n=t.clone(),i=this.clone(),o=y(1),s=y(0),u=y(0),a=y(1);while(0!=n.signum()){while(n.isEven())n.rShiftTo(1,n),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);while(i.isEven())i.rShiftTo(1,i),e?(u.isEven()&&a.isEven()||(u.addTo(this,u),a.subTo(t,a)),u.rShiftTo(1,u)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(i)>=0?(n.subTo(i,n),e&&o.subTo(u,o),s.subTo(a,s)):(i.subTo(n,i),e&&u.subTo(o,u),a.subTo(s,a))}return 0!=i.compareTo(r.ONE)?r.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}W.prototype.convert=M,W.prototype.revert=P,W.prototype.reduce=L,W.prototype.mulTo=N,W.prototype.sqrTo=j,U.prototype.convert=q,U.prototype.revert=V,U.prototype.reduce=z,U.prototype.mulTo=Y,U.prototype.sqrTo=Q,r.prototype.copyTo=m,r.prototype.fromInt=E,r.prototype.fromString=C,r.prototype.clamp=B,r.prototype.dlShiftTo=b,r.prototype.drShiftTo=S,r.prototype.lShiftTo=_,r.prototype.rShiftTo=T,r.prototype.subTo=k,r.prototype.multiplyTo=x,r.prototype.squareTo=R,r.prototype.divRemTo=I,r.prototype.invDigit=H,r.prototype.isEven=Z,r.prototype.exp=K,r.prototype.toString=A,r.prototype.negate=v,r.prototype.abs=D,r.prototype.compareTo=F,r.prototype.bitLength=w,r.prototype.mod=O,r.prototype.modPowInt=X,r.ZERO=y(0),r.ONE=y(1),Ht.prototype.convert=Ut,Ht.prototype.revert=Ut,Ht.prototype.mulTo=qt,Ht.prototype.sqrTo=Vt,Zt.prototype.convert=Kt,Zt.prototype.revert=Xt,Zt.prototype.reduce=Jt,Zt.prototype.mulTo=$t,Zt.prototype.sqrTo=Gt;var ie=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],oe=(1<<26)/ie[ie.length-1];function se(t){var e,n=this.abs();if(1==n.t&&n[0]<=ie[ie.length-1]){for(e=0;e<ie.length;++e)if(n[0]==ie[e])return!0;return!1}if(n.isEven())return!1;e=1;while(e<ie.length){var r=ie[e],i=e+1;while(i<ie.length&&r<oe)r*=ie[i++];r=n.modInt(r);while(e<i)if(r%ie[e++]==0)return!1}return n.millerRabin(t)}function ue(t){var e=this.subtract(r.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var o=e.shiftRight(n);t=t+1>>1,t>ie.length&&(t=ie.length);for(var s=i(),u=0;u<t;++u){s.fromInt(ie[Math.floor(Math.random()*ie.length)]);var a=s.modPow(o,this);if(0!=a.compareTo(r.ONE)&&0!=a.compareTo(e)){var c=1;while(c++<n&&0!=a.compareTo(e))if(a=a.modPowInt(2,this),0==a.compareTo(r.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0}return r.prototype.chunkSize=et,r.prototype.toRadix=rt,r.prototype.fromRadix=it,r.prototype.fromNumber=ot,r.prototype.bitwiseTo=ht,r.prototype.changeBit=St,r.prototype.addTo=xt,r.prototype.dMultiply=Nt,r.prototype.dAddOffset=jt,r.prototype.multiplyLowerTo=Qt,r.prototype.multiplyUpperTo=Yt,r.prototype.modInt=ne,r.prototype.millerRabin=ue,r.prototype.clone=J,r.prototype.intValue=G,r.prototype.byteValue=$,r.prototype.shortValue=tt,r.prototype.signum=nt,r.prototype.toByteArray=st,r.prototype.equals=ut,r.prototype.min=at,r.prototype.max=ct,r.prototype.and=lt,r.prototype.or=dt,r.prototype.xor=Et,r.prototype.andNot=Ct,r.prototype.not=Bt,r.prototype.shiftLeft=At,r.prototype.shiftRight=vt,r.prototype.getLowestSetBit=Ft,r.prototype.bitCount=wt,r.prototype.testBit=bt,r.prototype.setBit=_t,r.prototype.clearBit=Tt,r.prototype.flipBit=kt,r.prototype.add=Rt,r.prototype.subtract=It,r.prototype.multiply=Ot,r.prototype.divide=Mt,r.prototype.remainder=Pt,r.prototype.divideAndRemainder=Lt,r.prototype.modPow=te,r.prototype.modInverse=re,r.prototype.pow=zt,r.prototype.gcd=ee,r.prototype.isProbablePrime=se,r.prototype.square=Wt,r})),function(t){"use strict";"function"===typeof define&&define.amd?define("SRPClient",["sha1","sjcl","BigInteger"],t):window.SRPClient=t(sha1,sjcl,BigInteger)}((function(t,e,n){var r=function(t,e,r,i){if(!t)throw"Username cannot be empty.";this.username=t,this.password=e,this.hashFn=i||"sha-1";r=r||1024;var o=this.initVals[r];this.N=new n(o.N,16),this.g=new n(o.g,16),this.gBn=new n(o.g,16),this.k=this.k(),this.one=new n("1",16),this.two=new n("2",16)};return r.prototype={toHexString:function(t){var e=t.toString(16);return e.length%2===1&&(e="0"+e),e},padLeft:function(t,e){if(t.length>e)return t;var n=Array(e-t.length+1);return n.join("0")+t},bytesToHex:function(t){var e=this,n=t.map((function(t){return e.padLeft(e.toHexString(t),2)}));return n.join("")},hexToBytes:function(t){if(t.length%2===1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),t.match(/../g).map((function(t){return parseInt(t,16)}))},stringToBytes:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e},bytesToString:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},k:function(){var t=[this.toHexString(this.N),this.toHexString(this.g)];return this.paddedHash(t)},calculateX:function(t){if(!t)throw"Missing parameter.";if(!this.username||!this.password)throw"Username and password cannot be empty.";var e=this.stringToBytes(this.username),r=this.hexToBytes(this.password),i=e.concat([58]).concat(r),o=this.hash(this.bytesToString(i)),s=this.hexToBytes(o),u=this.hexToBytes(t),a=u.concat(s),c=this.hash(this.bytesToString(a)),h=new n(c,16);if(h.compareTo(this.N)<0)return h;var f=new n(1,16);return h.mod(this.N.subtract(f))},calculateV:function(t){if(!t)throw"Missing parameter.";var e=this.calculateX(t);return this.g.modPow(e,this.N)},calculateU:function(t,e){if(!t||!e)throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";var n=[this.toHexString(t),this.toHexString(e)];return this.paddedHash(n)},canCalculateA:function(t){if(!t)throw"Missing parameter.";return Math.ceil(t.bitLength()/8)>=32},calculateA:function(t){if(!t)throw"Missing parameter.";if(!this.canCalculateA(t))throw"Client key length is less than 256 bits.";var e=this.g.modPow(t,this.N);if("0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";return e},calculateM1:function(t,e,r,i){if(!t||!e||!r||!i)throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";for(var o=this.hexHash(this.toHexString(this.N)),s=this.hexHash(this.toHexString(this.g)),u=this.hash(this.username),a=[],c=this.hexToBytes(o),h=this.hexToBytes(s),f=0;f<c.length;f++)a[f]=c[f]^h[f];for(var l=this.bytesToHex(a),p=this.toHexString(t),d=this.toHexString(e),m=[l,u,i,p,d,r],E="",y=0;y<m.length;y++)E+=m[y];return new n(this.hexHash(E),16)},calculateM:function(t,e,n,r){if(!t||!e||!n||!r)throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";for(var i=this.hexHash(this.toHexString(this.N)),o=this.hexHash(this.toHexString(this.g)),s=this.hash(this.username),u=[],a=this.hexToBytes(i),c=this.hexToBytes(o),h=0;h<a.length;h++)u[h]=a[h]^c[h];for(var f=this.bytesToHex(u),l=this.toHexString(t),p=this.toHexString(e),d=[f,s,r,l,p,n],m="",E=0;E<d.length;E++)m+=d[E];return this.hexHash(m)},calculateM2:function(t,e,r){if(!t||!e||!r)throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";for(var i=this.toHexString(t),o=this.toHexString(e),s=[i,o,r],u="",a=0;a<s.length;a++)u+=s[a];return new n(this.hexHash(u),16)},calculateS:function(t,e,n,r){if(!t||!e||!n||!r)throw"Missing parameters.";if("0"==t.mod(this.N).toString())throw"ABORT: illegal_parameter";var i=this.calculateX(e),o=this.g.modPow(i,this.N),s=t.add(this.N.multiply(this.k)).subtract(o.multiply(this.k)).mod(this.N);return s.modPow(i.multiply(n).add(r),this.N)},calculateK:function(t){return this.hexHash(this.toHexString(t))},srpRandom:function(){var t=e.random.randomWords(8,0),r=e.codec.hex.fromBits(t);if(64!=r.length)throw"Invalid random number size.";var i=new n(r,16);return i.compareTo(this.N)>=0&&(i=a.mod(this.N.subtract(this.one))),i.compareTo(this.two)<0&&(i=two),i},randomHexSalt:function(){var t=e.random.randomWords(8,0),n=e.codec.hex.fromBits(t);return n},paddedHash:function(t){for(var e=2*(4*this.toHexString(this.N).length+7>>3),r="",i=0;i<t.length;i++)r+=this.nZeros(e-t[i].length)+t[i];var o=new n(this.hexHash(r),16);return o.mod(this.N)},hash:function(n){switch(this.hashFn.toLowerCase()){case"sha-256":var r=e.codec.hex.fromBits(e.hash.sha256.hash(n));return this.nZeros(64-r.length)+r;case"sha-1":default:return t.calcSHA1(n)}},hexHash:function(t){switch(this.hashFn.toLowerCase()){case"sha-256":var n=e.codec.hex.fromBits(e.hash.sha256.hash(e.codec.hex.toBits(t)));return this.nZeros(64-n.length)+n;case"sha-1":default:return this.hash(this.pack(t))}},pack:function(t){t.length%2!=0&&(t="0"+t),i=0,ascii="";while(i<t.length/2)ascii+=String.fromCharCode(parseInt(t.substr(2*i,2),16)),i++;return ascii},nZeros:function(t){if(t<1)return"";var e=this.nZeros(t>>1);return 0==(1&t)?e+e:e+e+"0"},initVals:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:"2"},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:"2"},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:"2"},3072:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",g:"5"},4096:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",g:"5"},6144:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DCC4024FFFFFFFFFFFFFFFF",g:"5"},8192:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD922222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC8862F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A66D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC50846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E7160C980DD98EDD3DFFFFFFFFFFFFFFFFF",g:"19"}},calculateB:function(t,e){if(!t||!e)throw"Missing parameters.";var n=this.g.modPow(t,this.N),r=n.add(e.multiply(this.k)).mod(this.N);return r},calculateServerS:function(t,e,n,r){if(!t||!e||!n||!r)throw"Missing parameters.";if("0"==t.mod(this.N).toString()||"0"==r.mod(this.N).toString())throw"ABORT: illegal_parameter";return e.modPow(n,this.N).multiply(t).mod(this.N).modPow(r,this.N)}},r})),function(){"use strict";function t(t){return"function"===typeof t||"object"===typeof t&&null!==t}function e(t){return"function"===typeof t}function n(t){return"object"===typeof t&&null!==t}var r;r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var i,o,s=r,u=0,a=function(t,e){D[u]=t,D[u+1]=e,u+=2,2===u&&(o?o(F):v())};function c(t){o=t}function h(t){a=t}var f="undefined"!==typeof window?window:void 0,l=f||{},p=l.MutationObserver||l.WebKitMutationObserver,d="undefined"!==typeof process&&"[object process]"==={}.toString.call(process),m="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function E(){return function(){process.nextTick(F)}}function y(){return function(){i(F)}}function C(){var t=0,e=new p(F),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function B(){var t=new MessageChannel;return t.port1.onmessage=F,function(){t.port2.postMessage(0)}}function A(){return function(){setTimeout(F,1)}}var v,D=new Array(1e3);function F(){for(var t=0;t<u;t+=2){var e=D[t],n=D[t+1];e(n),D[t]=void 0,D[t+1]=void 0}u=0}function g(){try{var t=require,e=t("@vertx/core");return i=e.runOnLoop||e.runOnContext,y()}catch(n){return A()}}function w(){}v=d?E():p?C():m?B():void 0===f&&"function"===typeof require?g():A();var b=void 0,S=1,_=2,T=new q;function k(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function R(t){try{return t.then}catch(e){return T.error=e,T}}function I(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function O(t,e,n){a((function(t){var r=!1,i=I(n,e,(function(n){r||(r=!0,e!==n?P(t,n):N(t,n))}),(function(e){r||(r=!0,j(t,e))}),"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,j(t,i))}),t)}function W(t,e){e._state===S?N(t,e._result):e._state===_?j(t,e._result):H(e,void 0,(function(e){P(t,e)}),(function(e){j(t,e)}))}function M(t,n){if(n.constructor===t.constructor)W(t,n);else{var r=R(n);r===T?j(t,T.error):void 0===r?N(t,n):e(r)?O(t,n,r):N(t,n)}}function P(e,n){e===n?j(e,k()):t(n)?M(e,n):N(e,n)}function L(t){t._onerror&&t._onerror(t._result),U(t)}function N(t,e){t._state===b&&(t._result=e,t._state=S,0!==t._subscribers.length&&a(U,t))}function j(t,e){t._state===b&&(t._state=_,t._result=e,a(L,t))}function H(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+S]=n,i[o+_]=r,0===o&&t._state&&a(U,t)}function U(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?Q(n,r,i,o):i(o);t._subscribers.length=0}}function q(){this.error=null}var V=new q;function z(t,e){try{return t(e)}catch(n){return V.error=n,V}}function Q(t,n,r,i){var o,s,u,a,c=e(r);if(c){if(o=z(r,i),o===V?(a=!0,s=o.error,o=null):u=!0,n===o)return void j(n,x())}else o=i,u=!0;n._state!==b||(c&&u?P(n,o):a?j(n,s):t===S?N(n,o):t===_&&j(n,o))}function Y(t,e){try{e((function(e){P(t,e)}),(function(e){j(t,e)}))}catch(n){j(t,n)}}function Z(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(w),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?N(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&N(n.promise,n._result))):j(n.promise,n._validationError())}Z.prototype._validateInput=function(t){return s(t)},Z.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},Z.prototype._init=function(){this._result=new Array(this.length)};var K=Z;function X(t){return new K(this,t).promise}Z.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===b&&i<e;i++)t._eachEntry(r[i],i)},Z.prototype._eachEntry=function(t,e){var r=this,i=r._instanceConstructor;n(t)?t.constructor===i&&t._state!==b?(t._onerror=null,r._settledAt(t._state,e,t._result)):r._willSettleAt(i.resolve(t),e):(r._remaining--,r._result[e]=t)},Z.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===b&&(r._remaining--,t===_?j(i,n):r._result[e]=n),0===r._remaining&&N(i,r._result)},Z.prototype._willSettleAt=function(t,e){var n=this;H(t,void 0,(function(t){n._settledAt(S,e,t)}),(function(t){n._settledAt(_,e,t)}))};var J=X;function G(t){var e=this,n=new e(w);if(!s(t))return j(n,new TypeError("You must pass an array to race.")),n;var r=t.length;function i(t){P(n,t)}function o(t){j(n,t)}for(var u=0;n._state===b&&u<r;u++)H(e.resolve(t[u]),void 0,i,o);return n}var $=G;function tt(t){var e=this;if(t&&"object"===typeof t&&t.constructor===e)return t;var n=new e(w);return P(n,t),n}var et=tt;function nt(t){var e=this,n=new e(w);return j(n,t),n}var rt=nt,it=0;function ot(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function st(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ut=at;function at(t){this._id=it++,this._state=void 0,this._result=void 0,this._subscribers=[],w!==t&&(e(t)||ot(),this instanceof at||st(),Y(this,t))}function ct(){var t;if("undefined"!==typeof global)t=global;else if("undefined"!==typeof self)t=self;else try{t=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=ut)}at.all=J,at.race=$,at.resolve=et,at.reject=rt,at._setScheduler=c,at._setAsap=h,at._asap=a,at.prototype={constructor:at,then:function(t,e){var n=this,r=n._state;if(r===S&&!t||r===_&&!e)return this;var i=new this.constructor(w),o=n._result;if(r){var s=arguments[r-1];a((function(){Q(r,i,s,o)}))}else H(n,i,t,e);return i},catch:function(t){return this.then(null,t)}};var ht=ct,ft={Promise:ut,polyfill:ht};"function"===typeof define&&define["amd"]?define("ES6Promise",(function(){return ft})):"undefined"!==typeof module&&module["exports"]?module["exports"]=ft:"undefined"!==typeof this&&(this["ES6Promise"]=ft),ht()}.call(this),function(t){"use strict";"function"===typeof define&&define.amd?define("WebSdkCore",[],t):window.WebSdkCore=t()}((function(){var t={Promise:null,debug:!1,version:4},e={None:1,Encoding:2,Encryption:3,AESEncryption:4},n={Binary:1,String:2},r={WebSdk:t,WebSdkEncryptionSupport:e,WebSdkDataSupport:n,log:function(){r.WebSdk.debug&&(console.log.apply?console.log.apply(console,[].slice.call(arguments)):console.log(arguments[0]))}};return r})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdkCore.utils",["WebSdkCore"],t);else{if(!window.WebSdkCore)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.utils=t(window.WebSdkCore)}}((function(t){function e(t,e){var n=RegExp("[?&]"+e+"=([^&]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null}function n(t,e,n){var r=new window.Promise((function(r,i){var o=new XMLHttpRequest;if(o.open(t,e,!0),o.responseType="json",o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){var t;this.readyState===XMLHttpRequest.DONE&&(200===this.status?(t=""===this.responseType&&"string"===typeof this.responseText?JSON.parse(this.responseText):this.response,r(t)):i(this))},"post"===t.toLowerCase()&&n){var s,u="",a=[];for(s in n)a.push(encodeURIComponent(s)+"="+encodeURIComponent(n[s]));u=a.join("&").replace(/%20/g,"+"),o.send(u)}else o.send()}));return r}function r(t){return t.promise=new window.Promise((function(e,n){t.resolve=e,t.reject=n})),t}function i(){return r(this instanceof i?this:Object.create(i.prototype))}function o(t){if(!t)return null;var e;try{e=JSON.parse(t)}catch(n){e=null}return e}var s=function(){function t(t){this.m_items=[],this.m_maxSize=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.m_items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.m_items},enumerable:!0,configurable:!0}),t.prototype.trimHead=function(){this.m_items.length<=this.m_maxSize||Array.prototype.splice.call(this.m_items,0,this.m_items.length-this.m_maxSize)},t.prototype.trimTail=function(){this.m_items.length<=this.m_maxSize||Array.prototype.splice.call(this.m_items,this.m_maxSize,this.m_items.length-this.m_maxSize)},t.prototype.push=function(){var t=Array.prototype.push.apply(this.m_items,arguments);return this.trimHead(),t},t.prototype.splice=function(){var t=Array.prototype.splice.apply(this.m_items,arguments);return this.trimTail(),t},t.prototype.unshift=function(){var t=Array.prototype.unshift.apply(this.m_items,arguments);return this.trimTail(),t},t}();return{getQueryParam:e,ajax:n,tryParseJson:o,Deferred:i,FixedQueue:s}})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdkCore.configurator",["WebSdkCore","WebSdkCore.utils"],t);else{if(!window.WebSdkCore)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.configurator=t(window.WebSdkCore,window.WebSdkCore.utils)}}((function(t,e){function n(){this.m_key="websdk";var t=e.tryParseJson(sessionStorage.getItem(this.m_key));t&&(this.m_port=parseInt(t.port),this.m_host=t.host||"127.0.0.1",this.m_isSecure=t.isSecure,this.m_srp=t.srp)}return Object.defineProperty(n.prototype,"url",{get:function(){if(!this.m_port||!this.m_host)return null;var t=this.m_isSecure?"https":"http";return t+"://"+this.m_host+":"+this.m_port.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"srp",{get:function(){return this.m_srp},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sessionId",{get:function(){return sessionStorage.getItem("websdk.sessionId")},set:function(t){return sessionStorage.setItem("websdk.sessionId",t)},enumerable:!0,configurable:!0}),n.prototype.ensureLoaded=function(n){if(t.log("Configurator: ensureLoaded"),this.url&&this.srp)return n(null);var r=this,i="https://127.0.0.1:52181/get_connection";e.ajax("get",i).then((function(e){t.log("Configurator: findConfiguration -> ",e),e&&e.endpoint&&r.tryParse(e.endpoint)?n(null):n(new Error("Cannot load configuration"))})).catch((function(e){t.log("Configurator: findConfiguration -> ERROR ",e),n(e)}))},n.prototype.tryParse=function(n){t.log("Configurator: tryParse "+n);var r=document.createElement("a");r.href=n;var i=parseInt(e.getQueryParam(r.search,"web_sdk_port")||""),o="true"==e.getQueryParam(r.search,"web_sdk_secure"),s=r.hostname,u=e.getQueryParam(r.search,"web_sdk_username"),a=e.getQueryParam(r.search,"web_sdk_password"),c=e.getQueryParam(r.search,"web_sdk_salt");return!!(i&&s&&u&&a&&c)&&(this.m_port=i,this.m_host=s,this.m_isSecure=o,this.m_srp={p1:u,p2:a,salt:c},sessionStorage.setItem(this.m_key,JSON.stringify({port:this.m_port,host:this.m_host,isSecure:this.m_isSecure,srp:this.m_srp})),!0)},new n})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdkCore.cipher",["WebSdkCore"],t);else{if(!window.WebSdkCore)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.cipher=t(window.WebSdkCore)}}((function(t){var e=1,n={Binary:1,UnicodeString:2,UTF8String:3},r=window.crypto||window.msCrypto;function i(t){var e=s(t);return btoa(e)}function o(t){var e=atob(t);return u(e)}function s(t){var e=encodeURIComponent(t),n=e.replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))}));return n}function u(t){var e=t.replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(e)}function a(t,e){return t.charCodeAt(Math.floor(e%t.length))}function c(t,e){var n=Array.prototype.map.call(e,(function(t){return t}));return n.map((function(e,n){return String.fromCharCode(e.charCodeAt(0)^a(t,n))})).join("")}function h(t){var e=new DataView(t),n=e.getUint8(0),r=e.getUint8(1),i=e.getUint32(2,!0),o=e.getUint16(6,!0);return{version:n,type:r,length:i,offset:o}}function f(t,n){var r=new DataView(t);r.setUint8(0,e),r.setUint8(1,n),r.setUint32(2,t.byteLength-8,!0),r.setUint16(6,8,!0)}function l(t){return new window.Promise((function(e,n){var r=new Blob([new Uint8Array(t)]),i=new FileReader;i.onload=function(t){return e(t.target.result)},i.onerror=function(t){return n(t.target.error)},i.readAsText(r,"utf-16")}))}function p(t){var e=new ArrayBuffer(2*t.length+8);f(e,n.UnicodeString);for(var r=new Uint16Array(e,8),i=0,o=t.length;i<o;i++)r[i]=t.charCodeAt(i);return e}function d(t){var e=new ArrayBuffer(t.length+8);f(e,n.Binary);var r=new Uint8Array(t),i=new Uint8Array(e,8);return i.set(r),e}function m(t){var e=["encrypt","decrypt"],n=!1;return r.subtle.importKey("raw",t,{name:"AES-CBC"},n,e)}function E(t,e,n){return r.subtle.encrypt({name:"AES-CBC",iv:n},e,t)}function y(t,e,n){return r.subtle.decrypt({name:"AES-CBC",iv:n},e,t)}function C(t){var e=["encrypt","decrypt"],n=!1;return new window.Promise((function(i,o){var s=r.subtle.importKey("raw",t,{name:"AES-CBC"},n,e);s.oncomplete=function(t){i(s.result)},s.onerror=function(t){o(new Error("Cannot create a key..."))}}))}function B(t,e,n){return new window.Promise((function(i,o){var s=r.subtle.encrypt({name:"AES-CBC",iv:n},e,t);s.oncomplete=function(t){i(s.result)},s.onerror=function(t){o(new Error("Fail to encrypt data..."))}}))}function A(t,e,n){return new window.Promise((function(i,o){var s=r.subtle.decrypt({name:"AES-CBC",iv:n},e,t);s.oncomplete=function(t){i(s.result)},s.onerror=function(t){o(new Error("Fail to encrypt data..."))}}))}function v(t,e,n){return"undefined"!==typeof window.crypto?m(e).then((function(e){return E(t,e,n)})):C(e).then((function(e){return B(t,e,n)}))}function D(t,e,n){return"undefined"!==typeof window.crypto?m(e).then((function(e){return y(t,e,n)})):C(e).then((function(e){return A(t,e,n)}))}function F(t){if(t.length%2===1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),new Uint8Array(t.match(/../g).map((function(t){return parseInt(t,16)})))}function g(t){return new window.Promise((function(e,n){setTimeout((function(){e(t)}))}))}function w(t,e,n){var r,i=new Uint8Array(F(e).buffer,0,16);return r="string"===typeof n?p(n):d(n),v(r,t,i)}function b(t,r,i){var o=new Uint8Array(F(r).buffer,0,16);return D(i,t,o).then((function(t){var r=h(t);if(r.version!==e)throw new Error("Invalid data version!");switch(r.type){case n.Binary:return t.slice(r.offset);case n.UnicodeString:return l(t.slice(r.offset));default:throw new Error("Invalid data type!")}return l(t)}))}return{encode:function(e,n,r){switch(t.WebSdk.version){case t.WebSdkEncryptionSupport.AESEncryption:return w(e,n,r);case t.WebSdkEncryptionSupport.Encryption:return g(i(c(n,r)));case t.WebSdkEncryptionSupport.Encoding:return g(i(r));default:return g(r)}},decode:function(e,n,r){switch(t.WebSdk.version){case t.WebSdkEncryptionSupport.AESEncryption:return b(e,n,r);case t.WebSdkEncryptionSupport.Encryption:return g(c(n,o(r)));case t.WebSdkEncryptionSupport.Encoding:return g(o(r));default:return g(r)}},isCryptoSupported:function(){return"undefined"!==typeof r&&r.subtle&&r.subtle.importKey&&r.subtle.encrypt},hexToBytes:function(t){return F(t)}}})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdkCore.channelOptions",["WebSdkCore"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.channelOptions=t(e)}}((function(t){function e(e){e||(e={});var n=t.WebSdkEncryptionSupport.AESEncryption,r=!0===e.debug;function i(e){for(var n in t.WebSdkEncryptionSupport)if(t.WebSdkEncryptionSupport.hasOwnProperty(n)&&t.WebSdkEncryptionSupport[n]===e)return;throw new Error("invalid WebSdk version requested")}e.version&&(i(e.version),n=e.version),Object.defineProperties(this,{version:{get:function(){return n},set:function(t){i(t),n=t},enumerable:!0},debug:{get:function(){return r},set:function(){r=value},enumerable:!0}})}return e})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdkCore.channelClientImplementation",["async","sjcl","BigInteger","SRPClient","ES6Promise","WebSdkCore","WebSdkCore.utils","WebSdkCore.configurator","WebSdkCore.cipher"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.channelClientImplementation=t(async,sjcl,BigInteger,SRPClient,ES6Promise,e,e.utils,e.configurator,e.cipher)}}((function(t,e,n,r,i,o,s,u,a){function c(t){if(!t)throw new Error("clientPath cannot be empty");o.log("WebSdkVersion: ",o.WebSdk.version,"clientPath: ",t),this.clientPath=t,this.wsThreshold=10240,this.wsQueueInterval=1e3,this.wsQueueLimit=100,this.wsReconnectInterval=5e3,this.queue=new s.FixedQueue(this.wsQueueLimit),this.queueInterval=null,this.webSocket=null,this.sessionKey=null,this.M1=null,this.reconnectTimer=null,this.onConnectionFailed=null,this.onConnectionSucceed=null,this.onDataReceivedBin=null,this.onDataReceivedTxt=null;var e=this;window.parent.parent.addEventListener("blur",(function(){e.resetReconnectTimer(),e.notifyFocusChanged(!1)})),window.parent.parent.addEventListener("focus",(function(){e.notifyFocusChanged(!0)}))}return window.Promise||(window.Promise=i.Promise),c.prototype.notifyFocusChanged=function(t){if(this.isConnected()){o.log("WebChannelClientImpl: notifyFocusChanged ->",t);var e={type:"sdk.focusChanged",data:t};this.sendData(JSON.stringify(e))}},c.prototype.fireConnectionFailed=function(){window.parent.parent.document.hasFocus()&&this.setReconnectTimer(),this.onConnectionFailed&&this.onConnectionFailed()},c.prototype.fireConnectionSucceed=function(){this.onConnectionSucceed&&this.onConnectionSucceed()},c.prototype.resetReconnectTimer=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},c.prototype.setReconnectTimer=function(){this.resetReconnectTimer();var t=this;this.reconnectTimer=setInterval((function(){t.connectInternal(!1)}),this.wsReconnectInterval)},c.prototype.wsconnect=function(t){o.log("WebChannelClientImpl: wsconnect "+t);var e=this,n=s.Deferred();if(this.webSocket&&this.webSocket.readyState!==WebSocket.CLOSED)throw new Error("wsdisconnect has not been called");return this.webSocket=new WebSocket(t),this.webSocket.binaryType="arraybuffer",this.webSocket.onclose=function(t){return o.log("WebChannelClientImpl: wsonclose"),e.wsonclose(!0)},this.webSocket.onopen=function(t){o.log("WebChannelClientImpl: wsonopen"),n.resolve(),window.parent.parent.document.hasFocus()?e.notifyFocusChanged(!0):e.notifyFocusChanged(!1)},this.webSocket.onerror=function(t){return o.log("WebChannelClientImpl: wsonerror "+arguments),n.reject(new Error("WebSocket connection failed."))},this.webSocket.onmessage=function(t){return e.wsonmessage(t)},n.promise},c.prototype.wsdisconnect=function(){var t=this,e=s.Deferred();return this.webSocket&&this.webSocket.readyState===WebSocket.OPEN?(this.webSocket.onclose=function(n){t.wsonclose(!1),e.resolve()},this.webSocket.close()):e.resolve(),e.promise},c.prototype.wsonclose=function(t){o.log("WebChannelClientImpl: connection closed"),this.webSocket.onclose=null,this.webSocket.onopen=null,this.webSocket.onmessage=null,this.webSocket.onerror=null,this.deactivateBufferCheck(),t&&this.fireConnectionFailed()},c.prototype.wsonmessage=function(t){var e=this;a.decode(this.sessionKey,this.M1,t.data).then((function(t){"string"===typeof t?e.onDataReceivedTxt&&e.onDataReceivedTxt(t):e.onDataReceivedBin&&e.onDataReceivedBin(t)}))},c.prototype.wssend=function(t){return!!this.isConnected()&&(this.webSocket.bufferedAmount>=this.wsThreshold?(this.activateBufferCheck(),!1):(this.webSocket.send(t),!0))},c.prototype.generateSessionKey=function(t){var i=u.srp;if(!i.p1||!i.p2||!i.salt)return t(new Error("No data available for authentication"));var c,h=this,f=new r(i.p1,i.p2);do{c=f.srpRandom()}while(!f.canCalculateA(c));var l=f.calculateA(c);o.WebSdk.version>=o.WebSdkEncryptionSupport.AESEncryption&&!a.isCryptoSupported()&&(o.WebSdk.version=o.WebSdkEncryptionSupport.Encryption),s.ajax("post",u.url+"/connect",{username:i.p1,A:f.toHexString(l),version:o.WebSdk.version.toString()}).then((function(r){void 0===r.version?o.WebSdk.version=Math.min(o.WebSdk.version,o.WebSdkEncryptionSupport.Encryption):o.WebSdk.version=r.version;var s=new n(r.B,16),u=f.calculateU(l,s),p=f.calculateS(s,i.salt,u,c),d=f.calculateK(p),m=f.calculateM(l,s,d,i.salt);h.sessionKey=a.hexToBytes(e.codec.hex.fromBits(e.hash.sha256.hash(e.codec.hex.toBits(d)))),h.M1=m,t(null,m)})).catch(t)},c.prototype.setupSecureChannel=function(n){o.log("WebChannelClientImpl.setupSecureChannel");var r=this;t.waterfall([function(t){r.generateSessionKey(t)},function(t,n){var i=u.url.replace("http","ws")+"/"+r.clientPath+"?username="+u.srp.p1+"&M1="+r.M1;u.sessionId||(u.sessionId=e.codec.hex.fromBits(e.random.randomWords(2,0))),i+="&sessionId="+u.sessionId,i+="&version="+o.WebSdk.version.toString(),r.wsconnect(i).then((function(){n(null)})).catch((function(t){o.log(t),n(t)}))}],n)},c.prototype.isConnected=function(){return!!this.webSocket&&this.webSocket.readyState===WebSocket.OPEN},c.prototype.sendData=function(t){this.wssend(t)||this.queue.push(t)},c.prototype.deactivateBufferCheck=function(){this.queueInterval&&(clearInterval(this.queueInterval),this.queueInterval=null)},c.prototype.activateBufferCheck=function(){if(!this.queueInterval){var t=this;this.queueInterval=setInterval((function(){t.processMessageQueue(),0===t.queue.length&&t.deactivateBufferCheck()}),this.wsQueueInterval)}},c.prototype.processMessageQueue=function(){if(o.log("WebChannelClientImpl: processMessageQueue "+this.queue.length),0!==this.queue.length)for(var t=0;t<this.queue.length;){if(!this.wssend(this.queue.items[t]))break;this.queue.splice(t,1)}},c.prototype.connectInternal=function(e){o.log("WebChannelClientImpl.connectInternal"),this.resetReconnectTimer();var n=this;t.waterfall([function(t){u.ensureLoaded(t)},function(r){t.retry(e?3:1,(function(){n.setupSecureChannel(r)}),r)}],(function(t){if(t)return n.fireConnectionFailed();n.fireConnectionSucceed(),n.processMessageQueue()}))},c.prototype.connect=function(){this.connectInternal(!0)},c.prototype.disconnect=function(){this.wsdisconnect()},c.prototype.sendDataBin=function(t){var e=this;a.encode(this.sessionKey,this.M1,t).then((function(t){e.sendData(t)}))},c.prototype.sendDataTxt=function(t){var e=this;a.encode(this.sessionKey,this.M1,t).then((function(t){e.sendData(t)}))},c})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdkCore.channelClient",["WebSdkCore","WebSdkCore.channelOptions","WebSdkCore.channelClientImplementation"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.channelClient=t(e,e.channelOptions,e.channelClientImplementation)}}((function(t,e,n){function r(r,i){if(i){t.log(i);var o=new e(i);t.WebSdk.debug=o.debug,t.WebSdk.version=o.version}var s=new n(r);Object.defineProperties(this,{path:{get:function(){return r},enumerable:!0},onConnectionFailed:{get:function(){return s.onConnectionFailed},set:function(t){s.onConnectionFailed=t},enumerable:!0},onConnectionSucceed:{get:function(){return s.onConnectionSucceed},set:function(t){s.onConnectionSucceed=t},enumerable:!0},onDataReceivedBin:{get:function(){return s.onDataReceivedBin},set:function(t){s.onDataReceivedBin=t},enumerable:!0},onDataReceivedTxt:{get:function(){return s.onDataReceivedTxt},set:function(t){s.onDataReceivedTxt=t},enumerable:!0}}),this.connect=function(){s.connect()},this.disconnect=function(){s.disconnect()},this.isConnected=function(){return s.isConnected()},this.sendDataBin=function(t){s.sendDataBin(t)},this.sendDataTxt=function(t){s.sendDataTxt(t)},this.resetReconnectTimer=function(){s.resetReconnectTimer()}}return r})),function(t){"use strict";if("function"===typeof define&&define.amd)define("WebSdk",["WebSdkCore","WebSdkCore.channelOptions","WebSdkCore.channelClient"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdk=t(e,e.channelOptions,e.channelClient)}}((function(t,e,n){return t.log("loaded websdk.client"),{WebChannelOptions:e,WebChannelClient:n}}));