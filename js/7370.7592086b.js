"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[7370],{27370:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var i=n(59835),o=n(86970);const a={class:"row"},l={class:"q-pa-md col-md-5 col-sm-12"},r={class:"row q-pa-md"},c={class:"col-xs-12 col-sm-12"},d={class:"row full-width"},s=(0,i.Uk)("Imprimir Contrato");function u(e,t,n,u,p,m){const f=(0,i.up)("q-icon"),h=(0,i.up)("q-btn"),g=(0,i.up)("q-file"),C=(0,i.up)("q-card-section"),v=(0,i.up)("q-card"),w=(0,i.up)("q-inner-loading"),b=(0,i.up)("q-input"),y=(0,i.up)("q-td"),S=(0,i.up)("q-item-section"),P=(0,i.up)("q-item"),x=(0,i.up)("q-list"),_=(0,i.up)("q-menu"),N=(0,i.up)("q-table"),E=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(E,null,{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",l,[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{modelValue:e.filesPdfContract,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filesPdfContract=t),rounded:"",clearable:"",outlined:"",label:"Subir Contrato (Formato PDF)",filter:e.checkFileType,onRejected:e.onRejected},{prepend:(0,i.w5)((()=>[(0,i.Wm)(f,{name:"drive_folder_upload"})])),after:(0,i.w5)((()=>[(0,i.Wm)(h,{round:"",size:"lg",dense:"",flat:"",icon:"save",color:"primary",onClick:e.sendFileContract},null,8,["onClick"])])),_:1},8,["modelValue","filter","onRejected"])])),_:1})])),_:1})])]),(0,i._)("div",r,[(0,i._)("div",c,[(0,i.Wm)(N,{style:{height:"50vh"},title:"Clientes",loading:e.tblLoading,rows:e.clientes,columns:[{name:"cliente",label:"Cliente",field:"Cliente",align:"center"},{name:"nombre",label:"Nombre",field:"Nombre",align:"center"},{name:"Nit",label:"Nit",field:"Nit",align:"center"},{name:"Dpi",label:"Dpi",field:"Dpi",align:"center"}],"row-key":"name",pagination:{rowsPerPage:0},"rows-per-page-options":[0],dense:""},{loading:(0,i.w5)((()=>[(0,i.Wm)(w,{showing:"",color:"primary"})])),top:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i.Wm)(b,{autofocus:"",dense:"",debounce:"500",clearable:"",modelValue:e.nombreCliente,"onUpdate:modelValue":t[1]||(t[1]=t=>e.nombreCliente=t),placeholder:"Buscar Cliente",class:"col"},{append:(0,i.w5)((()=>[(0,i.Wm)(f,{name:"search"})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{autofocus:"",dense:"",debounce:"500",clearable:"",modelValue:e.nit,"onUpdate:modelValue":t[2]||(t[2]=t=>e.nit=t),placeholder:"Buscar nit",class:"col"},{append:(0,i.w5)((()=>[(0,i.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])])),"body-cell":(0,i.w5)((t=>[(0,i.Wm)(y,{props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t.value),1)])),_:2},1032,["props"]),(0,i.Wm)(_,{"touch-position":"","context-menu":""},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{dense:"",style:{"min-width":"100px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(P,{clickable:"",onClick:n=>e.generatePdf(t.row)},{default:(0,i.w5)((()=>[(0,i.Wm)(S,null,{default:(0,i.w5)((()=>[s])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["loading","rows"])])])])),_:1})}var p=n(68651),m=n(60499),f=n(34136),h=n(88656),g=n(72177),C=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function l(e){try{c(i.next(e))}catch(t){a(t)}}function r(e){try{c(i["throw"](e))}catch(t){a(t)}}function c(e){e.done?n(e.value):o(e.value).then(l,r)}c((i=i.apply(e,t||[])).next())}))};const v=e=>C(void 0,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,2500)));let t=[],n=!1,i="";if(yield f.api.get(f.endPoints.GYMCLIENTES+"datosCliente",{params:{codigoSpc:e}}).then((o=>C(void 0,void 0,void 0,(function*(){var a;const l=o.data.cliente;if(null===l)return(0,p.x2)("No Existen datos en sistema de Molinete para el cliente "+e.toString()),void(n=!1);t=[{"@Fecha de Impresion":l.ULTIMO_CONTRATO?new Date(l.ULTIMO_CONTRATO).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"","@CodigoSPC":l.CODIGO_SPC,"@Nombre_Cliente":l.NOMBRE_SPC,"@Fecha_Nacimiento":"","@DPI_Cliente":l.DPI,"@Direccion_Cliente":l.DIRECCION_CLIENTE,"@Telefono_Cliente":l.TELEFONO_CLIENTE,"@Correo_Cliente":null!==(a=l.CORREO)&&void 0!==a?a:"","@Monto_Cliente":l.MONTO?l.MONTO.toString():""}],yield new Promise((e=>setTimeout(e,500))),yield f.api.get(f.endPoints.GYMCLIENTES+"PdfRenovacion",{}).then((e=>{i=e.data,n=!0})).catch((e=>{(0,p.L1)(e)}))})))).catch((e=>{(0,p.L1)(e)})),!n)return;const o={schemas:[{"@Fecha de Impresion":{type:"text",position:{x:51.59,y:47.1},width:49.02,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@CodigoSPC":{type:"text",position:{x:161.92,y:40},width:35,height:7,alignment:"left",fontSize:12,characterSpacing:2,lineHeight:1,fontName:"Roboto"},"@Nombre_Cliente":{type:"text",position:{x:71.7,y:55.03},width:101.94,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@Fecha_Nacimiento":{type:"text",position:{x:72.76,y:63.24},width:102.47,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@DPI_Cliente":{type:"text",position:{x:41.01,y:71.38},width:99.29,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@Direccion_Cliente":{type:"text",position:{x:51.59,y:78.31},width:91.35,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@Telefono_Cliente":{type:"text",position:{x:52.92,y:86.25},width:91.35,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@Correo_Cliente":{type:"text",position:{x:66.94,y:95.72},width:80.24,height:7,alignment:"left",fontSize:12,characterSpacing:0,lineHeight:1,fontName:"Roboto"},"@Monto_Cliente":{type:"text",position:{x:115,y:224.2},width:17.79,height:5.68,alignment:"left",fontSize:10,characterSpacing:0,lineHeight:1,fontName:"Roboto"}},{},{},{},{},{}],basePdf:`${i}`};let a=!0;try{const e=yield(0,g.Z)({template:o,inputs:t}),n=new Blob([e.buffer],{type:"application/pdf"});window.open(URL.createObjectURL(n)),a=!1}catch(l){l instanceof Error&&(0,p.x2)(l.message)}a||f.api.post(f.endPoints.GYMCLIENTES+"FechaUltimaImpresion",null,{params:{codigoSpc:e}}).catch((e=>{(0,p.x2)("Error al actualizar fecha de Ultima Impresion"),(0,p.L1)(e)}))}));var w=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function l(e){try{c(i.next(e))}catch(t){a(t)}}function r(e){try{c(i["throw"](e))}catch(t){a(t)}}function c(e){e.done?n(e.value):o(e.value).then(l,r)}c((i=i.apply(e,t||[])).next())}))};const b=(0,i.aZ)({setup(){const e=(0,m.iH)("Prueba de Texto"),t=(0,m.iH)([]),n=(0,m.iH)(""),i=(0,m.iH)("");let o=(0,m.iH)(!1);const a=(0,m.iH)(null),l=(0,m.iH)(null),r=e=>new Promise(((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{var e;return t((null===(e=i.result)||void 0===e?void 0:e.toString())||"")},i.onerror=e=>n(e)})),c=()=>w(this,void 0,void 0,(function*(){if(null==a.value)return void(0,p.x2)("Debe cargar un archivo en PDF para el Contrato");const e=yield(0,p.pW)("Confirmacin","Esta Seguro de cambiar el reporte, no existe reversion para esta acción?",{});if(!e)return;const t=yield r(a.value);""!=t?yield f.api.post(f.endPoints.GYMCLIENTES+"SavePdfContract",{base64:t}).then((()=>{(0,p.dF)("Guardado Correctamente")})).catch((e=>{(0,p.L1)(e)})):(0,p.x2)("Error al convertir el archivo")})),d=()=>w(this,void 0,void 0,(function*(){if(null==l.value)return void(0,p.x2)("Debe cargar un archivo en PDF para el Contrato de Renovacion");const e=yield(0,p.pW)("Confirmacin","Esta Seguro de cambiar el reporte, no existe reversion para esta acción?",{});if(!e)return;const t=yield r(l.value);""!=t?yield f.api.post(f.endPoints.GYMCLIENTES+"SavePdfRenova",{base64:t}).then((()=>{(0,p.dF)("Guardado Correctamente")})).catch((e=>{(0,p.L1)(e)})):(0,p.x2)("Error al convertir el archivo")})),s=e=>e.filter((e=>"application/pdf"===e.type)),u=()=>{(0,p.x2)("Debe adjuntar un archivo en formato de PDF")},g=e=>w(this,void 0,void 0,(function*(){o.value=!0,yield(0,h.x)(e.Cliente),o.value=!1})),C=e=>w(this,void 0,void 0,(function*(){o.value=!0,yield v(e.Cliente),o.value=!1})),b=()=>w(this,void 0,void 0,(function*(){let e={rowsPerPage:100,nombre:n.value,nit:i.value,dpi:""};yield f.api.get(f.endPoints.CLIENTE+"NombreGym",(0,f.configApi)({queryParams:e})).then((e=>{let n=[]=e.data.Clientes;t.value=n})).catch((e=>{(0,p.L1)(e)}))}));return{editor:e,sendFileContract:c,sendFileRenovacion:d,pdfgenerator:h.x,clientes:t,nombreCliente:n,nit:i,getClientes:b,tblLoading:o,onRejected:u,checkFileType:s,filesPdfRenovacion:l,filesPdfContract:a,generatePdf:g,generatePdfRenovacion:C}},created(){this.getClientes()},watch:{nombreCliente(){this.getClientes()},nit(){this.getClientes()}}});var y=n(11639),S=n(69885),P=n(44458),x=n(63190),_=n(29420),N=n(22857),E=n(68879),R=n(50926),T=n(855),I=n(84277),L=n(60854),D=n(13119),F=n(67220),O=n(56362),Z=n(13246),W=n(490),q=n(76749),H=n(69984),Q=n.n(H);const k=(0,y.Z)(b,[["render",u]]),M=k;Q()(b,"components",{QPage:S.Z,QCard:P.Z,QCardSection:x.Z,QFile:_.Z,QIcon:N.Z,QBtn:E.Z,QSeparator:R.Z,QEditor:T.Z,QTable:I.Z,QInnerLoading:L.Z,QInput:D.Z,QTd:F.Z,QMenu:O.Z,QList:Z.Z,QItem:W.Z,QItemSection:q.Z})}}]);