"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[820],{80820:(e,t,i)=>{i.r(t),i.d(t,{default:()=>xe});var l=i(59835),n=i(86970);const a={class:"q-pa-sm report-ticket-p",id:"printNC"},c={id:"NC"},o={class:"text-subtitle2 text-center text-weight-bold"},s={class:"text-caption text-center"},r={class:"text-caption text-center"},d={class:"text-caption text-center"},p={class:"text-caption text-center"},u=(0,l._)("div",{class:"text-caption text-center"},"DOCUMENTO TRIBUTARIO ELECTRÓNICO",-1),x=(0,l._)("div",{class:"text-caption text-center"},"NOTA DE CRÉDITO ELECTÓNICA",-1),w={class:"text-caption text-center"},h={class:"text-caption text-center"},v=(0,l._)("div",{class:"text-caption text-center"},"NÚMERO DE AUTORIZACIÓN",-1),_={class:"text-caption text-center text-weight-bolder"},g={class:"text-caption text-center"},b={class:"text-caption text-center"},m=(0,l._)("div",{class:"text-caption text-center"},"NOMBRE:",-1),C={class:"text-caption text-center text-weight-bolder"},f={class:"text-caption text-center text-weight-bolder"},N=(0,l._)("div",{class:"text-caption text-center"},"DIRECCIÓN:",-1),E={class:"text-caption text-center text-weight-bolder"},D={class:"no-padding",style:{"line-height":"1.5em",height:"3em","white-space":"normal",overflow:"hidden","text-overflow":"ellipsis","font-size":"10px"}},I={class:"no-padding",style:{"line-height":"1em",height:"1rem","white-space":"normal",overflow:"hidden","text-overflow":"ellipsis","font-size":"0.5rem"}},O={class:"row"},S=(0,l._)("div",{class:"col-7 mytext text-weight-bolder q-pl-lg"},"TOTAL NOTA DE CRÉDITO",-1),T=(0,l._)("div",{class:"col-1 text-caption text-weight-bolder text-right"},"Q.",-1),z={class:"col-4 text-caption text text-weight-bolder text-right q-pr-lg"},k=(0,l._)("br",null,null,-1),y=(0,l._)("div",{class:"text-caption text-center"},"FECHA EMISIÓN DOC. ORIGEN:",-1),R={class:"text-caption text-center text-weight-medium"},A=(0,l._)("div",{class:"text-caption text-center"},"NÚMERO AUTORIZACIÓN DOC. ORIGEN:",-1),F={class:"text-caption text-center text-weight-medium"},q={class:"text-caption text-center q-pa-xs"},P=(0,l._)("div",{class:"text-caption text-center"},"DATOS DEL CERTIFICADOR",-1),L=(0,l._)("div",{class:"text-caption text-center"},"INFILE, S.A.",-1),H=(0,l._)("div",{class:"text-caption text-center"},"NIT: 12521337",-1),M=(0,l._)("br",null,null,-1),U=(0,l._)("br",null,null,-1),W=(0,l._)("br",null,null,-1),Z={class:"row"},Q=(0,l._)("div",{class:"col col-12 q-pl-lg"},"F:_______________________",-1),B={class:"col col-12 q-pl-xl text-caption"},j=(0,l._)("br",null,null,-1),G=(0,l._)("br",null,null,-1),$=(0,l._)("br",null,null,-1);function V(e,t,i,V,J,K){const X=(0,l.up)("q-circular-progress"),Y=(0,l.up)("q-separator"),ee=(0,l.up)("q-td"),te=(0,l.up)("q-table");return(0,l.wg)(),(0,l.iD)("div",a,[null===e.enc?((0,l.wg)(),(0,l.j4)(X,{key:0,indeterminate:"",size:"150px",thickness:.5,color:"primary","center-color":"grey-8","track-color":"transparent",class:"q-ma-md fixed-center"},null,8,["thickness"])):(0,l.kq)("",!0),null!==e.enc?((0,l.wg)(),(0,l.j4)(l.n4,{key:1},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",o,(0,n.zw)(e.enc.NombreComercial),1),(0,l._)("div",s,(0,n.zw)(e.enc.Emisor),1),(0,l._)("div",r,(0,n.zw)(e.enc.Direccion),1),(0,l._)("div",d,"NIT: "+(0,n.zw)(e.enc.Nit),1),(0,l._)("div",p,"TELÉFONO: "+(0,n.zw)(e.enc.Telefono),1),u,x,(0,l._)("div",w,"SERIE: "+(0,n.zw)(e.enc.SerieFel),1),(0,l._)("div",h,"NÚMERO: "+(0,n.zw)(e.enc.FacturaFel),1),v,(0,l._)("div",_,(0,n.zw)(e.enc.Uuid),1),(0,l._)("div",g,"FECHA EMISIÓN:"+(0,n.zw)(e.enc.Fecha),1),(0,l._)("div",b," NÚMERO INTERNO:"+(0,n.zw)(e.enc.Serie)+" | "+(0,n.zw)(e.enc.Factura),1),(0,l.Wm)(Y,{spaced:"",inset:""}),m,(0,l._)("div",C,(0,n.zw)(e.enc.NombreCliente),1),(0,l._)("div",f,"NIT: "+(0,n.zw)(e.enc.NitCliente),1),N,(0,l._)("div",E,(0,n.zw)(e.enc.DireccionCliente),1),(0,l.Wm)(te,{class:"q-ml-sm",rows:e.rows,columns:e.columns,separator:"cell","hide-bottom":"",square:"",flat:"",bordered:"","wrap-cells":""},{"body-cell":(0,l.w5)((e=>[(0,l.Wm)(ee,{props:e,style:{"max-width":"20px"},class:"no-padding"},{default:(0,l.w5)((()=>[(0,l._)("div",D,(0,n.zw)(e.value),1)])),_:2},1032,["props"])])),"body-cell-Descripcion":(0,l.w5)((e=>[(0,l.Wm)(ee,{props:e,style:{"max-width":"55px"},class:"no-padding"},{default:(0,l.w5)((()=>[(0,l._)("div",I,(0,n.zw)(e.value),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns"]),(0,l.Wm)(Y,{spaced:"",inset:"",color:"white"}),(0,l._)("div",O,[S,T,(0,l._)("div",z,(0,n.zw)(e.subTotal.toFixed(2)),1)]),k,y,(0,l._)("div",R,(0,n.zw)(e.enc.Fecha),1),A,(0,l._)("div",F,(0,n.zw)(e.enc.Uuid),1),(0,l._)("div",q," APLICADO A DOC. INTERNO:"+(0,n.zw)(e.enc.SerieFactura)+" | "+(0,n.zw)(e.enc.Factura),1),(0,l.Wm)(Y,{spaced:"",inset:"",color:"white"}),(0,l.Wm)(Y,{spaced:"",inset:""}),P,L,H,(0,l.Wm)(Y,{spaced:"",inset:""}),M,U,W,(0,l._)("div",Z,[Q,(0,l._)("div",B,(0,n.zw)(e.enc.NombreCliente),1)]),j,G,$])])),_:1})):(0,l.kq)("",!0)])}var J=i(34136),K=i(68651),X=i(32222),Y=i(60499),ee=i(67825),te=i(17779),ie=function(e,t,i,l){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function c(e){try{s(l.next(e))}catch(t){a(t)}}function o(e){try{s(l["throw"](e))}catch(t){a(t)}}function s(e){e.done?i(e.value):n(e.value).then(c,o)}s((l=l.apply(e,t||[])).next())}))};const le=[{name:"Cantidad",required:!0,label:"Cant",align:"center",field:"Cantidad",headerClasses:"no-padding",headerStyle:"width:1px; max-width:12px; white-space: break-spaces; overflow-wrap: break-word;"},{name:"Descripcion",align:"center",label:"Descripción",field:"Descripcion",headerClasses:"no-padding",headerStyle:"width: 1px; max-width:1px; white-space: break-spaces; overflow-wrap: break-word;"},{name:"Precio",label:"Precio",align:"center",field:"Precio",headerClasses:"no-padding",headerStyle:"width:1px; max-width:10px; white-space: break-spaces; overflow-wrap: break-word;"},{name:"Subtotal",label:"Subtotal",align:"center",field:"Subtotal",headerClasses:"no-padding",headerStyle:"width:1px; max-width:22px; white-space: break-spaces; overflow-wrap: break-word;"}],ne=(0,l.aZ)({name:"Factura",setup(){const e=(0,Y.iH)(null),t=(0,Y.iH)(""),i=(0,Y.iH)(null),l=(0,Y.iH)([]),n=(0,Y.iH)(0),a=(0,Y.iH)(!1),c=()=>ie(this,void 0,void 0,(function*(){a.value=!0,null!=e.value&&(yield J.api.get(J.endPoints.DEVOLUCIONENC+"NCDevolucion",(0,J.configApi)({serie:t.value,queryParams:{numeroDevolucion:e.value}})).then((e=>{null!==e.data.Encabezado?(i.value=e.data.Encabezado,l.value=e.data.Detalles,l.value.map((e=>{n.value+=e.Subtotal;let t=0,i=0;t=e.Precio,i=e.Subtotal;let l=t.toString().split(".");if(l[0].length>=4&&l[1].length>=3)e.Precio=l[0]+". "+l[1];else if(l[0].length>=8){let i=t.toString(),l=i.substring(0,8)+" "+i.substring(8,i.length);e.Precio=l}else e.Precio=e.Precio.toFixed(2);if(l=e.Subtotal.toString().split("."),l[0].length>3&&l[1].length>2)e.Subtotal=l[0]+". "+l[1];else if(l[0].length>=8){let t=i.toString(),l=t.substring(0,8)+" "+t.substring(8,t.length);e.Subtotal=l}else e.Subtotal=e.Subtotal.toFixed(2)}))):(0,K.x2)("No existe la devolución")})).catch((e=>{(0,K.L1)(e)})).finally((()=>{a.value=!1})),null!==i.value?setTimeout((()=>{(0,ee.Qe)()?(0,X.Bx)("printNC","ticket",!1):(0,X.Ue)("printNC",(0,ee.d4)(),"NCDevolucion.pdf","ticket").then((e=>{te.log(e)})).catch((e=>{te.log("er",e),(0,K.L1)(e)})).finally((()=>{window.close()}))}),500):setTimeout((()=>{window.close()}),1e3))}));return{getData:c,numeroDevolucion:e,serie:t,enc:i,columns:le,rows:l,subTotal:n,loading:a}},created(){this.numeroDevolucion=parseInt(this.$router.currentRoute.value.params.Devolucion.toString()),this.serie=this.$router.currentRoute.value.params.Serie.toString(),window.blur(),window.parent.focus(),this.getData()}});var ae=i(11639),ce=i(83302),oe=i(50926),se=i(84277),re=i(67220),de=i(69984),pe=i.n(de);const ue=(0,ae.Z)(ne,[["render",V]]),xe=ue;pe()(ne,"components",{QCircularProgress:ce.Z,QSeparator:oe.Z,QTable:se.Z,QTd:re.Z})}}]);