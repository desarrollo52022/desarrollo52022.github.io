"use strict";(globalThis["webpackChunkposweb"]=globalThis["webpackChunkposweb"]||[]).push([[212],{70212:(e,t,i)=>{i.r(t),i.d(t,{default:()=>be});var a=i(59835),n=i(86970);const c={class:"q-pa-sm report-ticket-p",id:"printFactura"},l={id:"factura"},o={class:"text-subtitle2 text-center text-weight-bold"},s={class:"text-caption text-center"},r={class:"text-caption text-center"},d={class:"text-caption text-center"},p={class:"text-caption text-center"},x={key:0},u=(0,a._)("div",{class:"text-caption text-center"},"DOCUMENTO TRIBUTARIO ELECTRÓNICO",-1),w=(0,a._)("div",{class:"text-caption text-center"},"FACTURA ELECTRÓNICA",-1),h={class:"text-caption text-center"},v={class:"text-caption text-center"},g=(0,a._)("div",{class:"text-caption text-center"},"NÚMERO DE AUTORIZACIÓN",-1),b={class:"text-caption text-center text-weight-bolder"},m={key:1},_=(0,a._)("div",{class:"text-caption text-center"},"DOCUMENTO EMITIDO EN CONTINGENCIA",-1),f=(0,a._)("div",{class:"text-caption text-center"},"CÓDIGO DE ACCESO",-1),C={class:"text-caption text-center text-weight-bolder"},E={class:"text-caption text-center"},S={class:"text-caption text-center"},T=(0,a._)("div",{class:"text-caption text-center"},"NOMBRE:",-1),z={class:"text-caption text-center text-weight-bolder"},N={class:"text-caption text-center text-weight-bolder"},I=(0,a._)("div",{class:"text-caption text-center"},"DIRECCIÓN:",-1),D={class:"text-caption text-center text-weight-bolder"},F={class:"no-padding",style:{"line-height":"1.5em",height:"3em","white-space":"normal",overflow:"hidden","text-overflow":"ellipsis","font-size":"10px"}},O={class:"no-padding",style:{"line-height":"1em",height:"1rem","white-space":"normal",overflow:"hidden","text-overflow":"ellipsis","font-size":"0.5rem"}},y={class:"row"},R=(0,a._)("div",{class:"col-7 text-caption q-pl-lg"},"Subtotal",-1),k=(0,a._)("div",{class:"col-1 text-caption text-right"},"Q.",-1),A={class:"col-4 text-caption text-right q-pr-lg"},q={class:"row"},P={class:"col-7 text-caption q-pl-lg"},M=(0,a._)("div",{class:"col-1 text-caption text-right"},"Q.",-1),U={class:"col-4 text-caption text-right q-pr-lg"},W={class:"row"},H=(0,a._)("div",{class:"col-7 text-caption text-weight-bolder q-pl-lg"},"Total a pagar",-1),L=(0,a._)("div",{class:"col-1 text-caption text-weight-bolder text-right"},"Q.",-1),Q={class:"col-4 text-caption text-weight-bolder text-right q-pr-lg"},Z=(0,a._)("br",null,null,-1),B={class:"text-caption text-center"},G=(0,a._)("div",{class:"text-caption text-center"},"DATOS DEL CERTIFICADOR",-1),$=(0,a._)("div",{class:"text-caption text-center"},"INFILE, S.A.",-1),j=(0,a._)("div",{class:"text-caption text-center"},"NIT: 12521337",-1),J=(0,a._)("div",{class:"text-caption text-weight-bolder text-center"},"SUJETO A PAGOS TRIMESTRALES",-1),V={class:"text-caption text-center"},K={class:"text-caption text-center"},X={class:"text-caption text-center"},Y=(0,a._)("br",null,null,-1);function ee(e,t,i,ee,te,ie){const ae=(0,a.up)("q-separator"),ne=(0,a.up)("q-td"),ce=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",c,[null!==e.enc?((0,a.wg)(),(0,a.j4)(a.n4,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("div",o,(0,n.zw)(e.enc.NombreComercial),1),(0,a._)("div",s,(0,n.zw)(e.enc.Emisor),1),(0,a._)("div",r,(0,n.zw)(e.enc.Direccion),1),(0,a._)("div",d,"NIT: "+(0,n.zw)(e.enc.Nit),1),(0,a._)("div",p,"TELÉFONO: "+(0,n.zw)(e.enc.Telefono),1),e.enc.Uuid?((0,a.wg)(),(0,a.iD)("div",x,[u,w,(0,a._)("div",h,"SERIE: "+(0,n.zw)(e.enc.SerieFel),1),(0,a._)("div",v,"NÚMERO: "+(0,n.zw)(e.enc.FacturaFel),1),g,(0,a._)("div",b,(0,n.zw)(e.enc.Uuid),1)])):((0,a.wg)(),(0,a.iD)("div",m,[_,f,(0,a._)("div",C,(0,n.zw)(e.enc.Contingencia),1)])),(0,a._)("div",E,"FECHA EMISIÓN:"+(0,n.zw)(e.enc.Fecha),1),(0,a._)("div",S," NÚMERO INTERNO:"+(0,n.zw)(e.enc.Serie)+" | "+(0,n.zw)(e.enc.Factura),1),(0,a.Wm)(ae,{spaced:"",inset:""}),T,(0,a._)("div",z,(0,n.zw)(e.enc.NombreCliente),1),(0,a._)("div",N,"NIT: "+(0,n.zw)(e.enc.NitCliente),1),I,(0,a._)("div",D,(0,n.zw)(e.enc.DireccionCliente),1),(0,a.Wm)(ce,{class:"q-ml-sm",rows:e.rows,columns:e.columns,separator:"cell","hide-bottom":"",square:"",flat:"",bordered:"","wrap-cells":""},{"body-cell":(0,a.w5)((e=>[(0,a.Wm)(ne,{props:e,style:{"max-width":"20px"},class:"no-padding"},{default:(0,a.w5)((()=>[(0,a._)("div",F,(0,n.zw)(e.value),1)])),_:2},1032,["props"])])),"body-cell-Descripcion":(0,a.w5)((e=>[(0,a.Wm)(ne,{props:e,style:{"max-width":"55px"},class:"no-padding"},{default:(0,a.w5)((()=>[(0,a._)("div",O,(0,n.zw)(e.value),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns"]),(0,a.Wm)(ae,{spaced:"",inset:"",color:"white"}),(0,a._)("div",y,[R,k,(0,a._)("div",A,(0,n.zw)(e.subTotal.toFixed(2)),1)]),(0,a._)("div",q,[(0,a._)("div",P," Descuento "+(0,n.zw)(e.enc.MontoCupon>0?e.enc.Cupon:""),1),M,(0,a._)("div",U,(0,n.zw)(e.enc.Descuento.toFixed(2)),1)]),(0,a.Wm)(ae,{inset:"",color:"black"}),(0,a._)("div",W,[H,L,(0,a._)("div",Q,(0,n.zw)(e.enc.Total.toFixed(2)),1)]),Z,(0,a._)("div",B,"Le atendio "+(0,n.zw)(e.enc.Vendedor),1),(0,a.Wm)(ae,{spaced:"",inset:"",color:"white"}),(0,a.Wm)(ae,{spaced:"",inset:""}),G,$,j,(0,a.Wm)(ae,{spaced:"",inset:""}),J,(0,a._)("div",V,(0,n.zw)(e.textos[0]),1),(0,a._)("div",K,(0,n.zw)(e.textos[1]),1),(0,a.Wm)(ae,{spaced:"",inset:"",color:"white"}),(0,a._)("div",X,(0,n.zw)(e.textos[2]),1),Y])])),_:1})):(0,a.kq)("",!0)])}var te=i(34136),ie=i(68651),ae=i(32222),ne=i(60499),ce=i(75700),le=i(37655),oe=function(e,t,i,a){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,c){function l(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a["throw"](e))}catch(t){c(t)}}function s(e){e.done?i(e.value):n(e.value).then(l,o)}s((a=a.apply(e,t||[])).next())}))};const se=[{name:"Cantidad",required:!0,label:"Cant",align:"center",field:"Cantidad",headerClasses:"no-padding",headerStyle:"width:1px; max-width:12px; white-space: break-spaces; overflow-wrap: break-word;"},{name:"Descripcion",align:"center",label:"Descripción",field:"Descripcion",headerClasses:"no-padding",headerStyle:"width: 1px; max-width:1px; white-space: break-spaces; overflow-wrap: break-word;"},{name:"Precio",label:"Precio",align:"center",field:"Precio",headerClasses:"no-padding",headerStyle:"width:1px; max-width:10px; white-space: break-spaces; overflow-wrap: break-word;"},{name:"Subtotal",label:"Subtotal",align:"center",field:"Subtotal",headerClasses:"no-padding",headerStyle:"width:1px; max-width:22px; white-space: break-spaces; overflow-wrap: break-word;"}],re=(0,a.aZ)({name:"FacturaFile",setup(){const e=(0,ne.iH)(null),t=(0,ne.iH)(null),i=(0,ne.iH)(null),a=(0,ne.iH)([]),n=(0,ne.iH)(0),c=(0,ne.iH)(!1),l=(0,ne.iH)(!1),o=(0,ne.iH)([]),s=()=>oe(this,void 0,void 0,(function*(){(0,le.Q)("Cargando Factura..."),null!=e.value&&(yield te.api.get(te.endPoints.FACTURAS,(0,te.configApi)({queryParams:{uuid:e.value,empresa:t.value}})).then((e=>{if(null===e.data.Encabezado)return(0,ie.x2)("No existe la factura"),void setTimeout((()=>{window.close()}),1500);i.value=e.data.Encabezado,a.value=e.data.Detalles,a.value.map((e=>{n.value+=e.Subtotal;let t=0,i=0;t=e.Precio,i=e.Subtotal;let a=t.toString().split(".");if(a[0].length>=4&&a[1].length>=3)e.Precio=a[0]+". "+a[1];else if(a[0].length>=8){let i=t.toString(),a=i.substring(0,8)+" "+i.substring(8,i.length);e.Precio=a}else e.Precio=e.Precio.toFixed(2);if(a=e.Subtotal.toString().split("."),a[0].length>3&&a[1].length>2)e.Subtotal=a[0]+". "+a[1];else if(a[0].length>=8){let t=i.toString(),a=t.substring(0,8)+" "+t.substring(8,t.length);e.Subtotal=a}else e.Subtotal=e.Subtotal.toFixed(2)})),n.value=parseFloat(n.value.toFixed(2))})).catch((e=>{(0,ie.L1)(e)})).finally((()=>{c.value=!1})),null!==i.value?(o.value=yield(0,ce.E)("Factura"),setTimeout((()=>oe(this,void 0,void 0,(function*(){yield(0,ae.Bx)("printFactura","ticket")}))),500),(0,le.E)()):setTimeout((()=>{window.close()}),1e3))}));return{getData:s,uuid:e,empresa:t,enc:i,columns:se,rows:a,subTotal:n,loading:c,print:l,textos:o}},created(){this.uuid=this.$router.currentRoute.value.params.UUID.toString(),this.empresa=this.$router.currentRoute.value.params.EMPRESA.toString(),this.getData()}});var de=i(11639),pe=i(83302),xe=i(50926),ue=i(84277),we=i(67220),he=i(69984),ve=i.n(he);const ge=(0,de.Z)(re,[["render",ee]]),be=ge;ve()(re,"components",{QCircularProgress:pe.Z,QSeparator:xe.Z,QTable:ue.Z,QTd:we.Z})}}]);